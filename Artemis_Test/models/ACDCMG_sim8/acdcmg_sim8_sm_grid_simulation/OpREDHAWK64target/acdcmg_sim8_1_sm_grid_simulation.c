/*
 * acdcmg_sim8_1_sm_grid_simulation.c
 *
 * Academic License - for use in teaching, academic research, and meeting
 * course requirements at degree granting institutions only.  Not for
 * government, commercial, or other organizational use.
 *
 * Code generation for model "acdcmg_sim8_1_sm_grid_simulation".
 *
 * Model version              : 3.93
 * Simulink Coder version : 9.2 (R2019b) 18-Jul-2019
 * C source code generated on : Tue Jul 12 10:35:29 2022
 *
 * Target selection: rtlab_rtmodel.tlc
 * Note: GRT includes extra infrastructure and instrumentation for prototyping
 * Embedded hardware selection: Intel->x86-64 (Linux 64)
 * Code generation objectives: Unspecified
 * Validation result: Not run
 */

#include "acdcmg_sim8_1_sm_grid_simulation.h"
#include "acdcmg_sim8_1_sm_grid_simulation_private.h"

const real_T acdcmg_sim8_1_sm_grid_simulation_RGND = 0.0;/* real_T ground */

/* Block signals (default storage) */
B_acdcmg_sim8_1_sm_grid_simulation_T acdcmg_sim8_1_sm_grid_simulation_B;

/* Continuous states */
X_acdcmg_sim8_1_sm_grid_simulation_T acdcmg_sim8_1_sm_grid_simulation_X;

/* Block states (default storage) */
DW_acdcmg_sim8_1_sm_grid_simulation_T acdcmg_sim8_1_sm_grid_simulation_DW;

/* Real-time model */
RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T acdcmg_sim8_1_sm_grid_simulation_M_;
RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T *const
  acdcmg_sim8_1_sm_grid_simulation_M = &acdcmg_sim8_1_sm_grid_simulation_M_;
static void rate_scheduler(void);

/*
 * Time delay interpolation routine
 *
 * The linear interpolation is performed using the formula:
 *
 *          (t2 - tMinusDelay)         (tMinusDelay - t1)
 * u(t)  =  ----------------- * u1  +  ------------------- * u2
 *              (t2 - t1)                  (t2 - t1)
 */
real_T rt_TDelayInterpolate(
  real_T tMinusDelay,                 /* tMinusDelay = currentSimTime - delay */
  real_T tStart,
  real_T *tBuf,
  real_T *uBuf,
  int_T bufSz,
  int_T *lastIdx,
  int_T oldestIdx,
  int_T newIdx,
  real_T initOutput,
  boolean_T discrete,
  boolean_T minorStepAndTAtLastMajorOutput)
{
  int_T i;
  real_T yout, t1, t2, u1, u2;

  /*
   * If there is only one data point in the buffer, this data point must be
   * the t= 0 and tMinusDelay > t0, it ask for something unknown. The best
   * guess if initial output as well
   */
  if ((newIdx == 0) && (oldestIdx ==0 ) && (tMinusDelay > tStart))
    return initOutput;

  /*
   * If tMinusDelay is less than zero, should output initial value
   */
  if (tMinusDelay <= tStart)
    return initOutput;

  /* For fixed buffer extrapolation:
   * if tMinusDelay is small than the time at oldestIdx, if discrete, output
   * tailptr value,  else use tailptr and tailptr+1 value to extrapolate
   * It is also for fixed buffer. Note: The same condition can happen for transport delay block where
   * use tStart and and t[tail] other than using t[tail] and t[tail+1].
   * See below
   */
  if ((tMinusDelay <= tBuf[oldestIdx] ) ) {
    if (discrete) {
      return(uBuf[oldestIdx]);
    } else {
      int_T tempIdx= oldestIdx + 1;
      if (oldestIdx == bufSz-1)
        tempIdx = 0;
      t1= tBuf[oldestIdx];
      t2= tBuf[tempIdx];
      u1= uBuf[oldestIdx];
      u2= uBuf[tempIdx];
      if (t2 == t1) {
        if (tMinusDelay >= t2) {
          yout = u2;
        } else {
          yout = u1;
        }
      } else {
        real_T f1 = (t2-tMinusDelay) / (t2-t1);
        real_T f2 = 1.0 - f1;

        /*
         * Use Lagrange's interpolation formula.  Exact outputs at t1, t2.
         */
        yout = f1*u1 + f2*u2;
      }

      return yout;
    }
  }

  /*
   * When block does not have direct feedthrough, we use the table of
   * values to extrapolate off the end of the table for delays that are less
   * than 0 (less then step size).  This is not completely accurate.  The
   * chain of events is as follows for a given time t.  Major output - look
   * in table.  Update - add entry to table.  Now, if we call the output at
   * time t again, there is a new entry in the table. For very small delays,
   * this means that we will have a different answer from the previous call
   * to the output fcn at the same time t.  The following code prevents this
   * from happening.
   */
  if (minorStepAndTAtLastMajorOutput) {
    /* pretend that the new entry has not been added to table */
    if (newIdx != 0) {
      if (*lastIdx == newIdx) {
        (*lastIdx)--;
      }

      newIdx--;
    } else {
      if (*lastIdx == newIdx) {
        *lastIdx = bufSz-1;
      }

      newIdx = bufSz - 1;
    }
  }

  i = *lastIdx;
  if (tBuf[i] < tMinusDelay) {
    /* Look forward starting at last index */
    while (tBuf[i] < tMinusDelay) {
      /* May occur if the delay is less than step-size - extrapolate */
      if (i == newIdx)
        break;
      i = ( i < (bufSz-1) ) ? (i+1) : 0;/* move through buffer */
    }
  } else {
    /*
     * Look backwards starting at last index which can happen when the
     * delay time increases.
     */
    while (tBuf[i] >= tMinusDelay) {
      /*
       * Due to the entry condition at top of function, we
       * should never hit the end.
       */
      i = (i > 0) ? i-1 : (bufSz-1);   /* move through buffer */
    }

    i = ( i < (bufSz-1) ) ? (i+1) : 0;
  }

  *lastIdx = i;
  if (discrete) {
    /*
     * tempEps = 128 * eps;
     * localEps = max(tempEps, tempEps*fabs(tBuf[i]))/2;
     */
    double tempEps = (DBL_EPSILON) * 128.0;
    double localEps = tempEps * fabs(tBuf[i]);
    if (tempEps > localEps) {
      localEps = tempEps;
    }

    localEps = localEps / 2.0;
    if (tMinusDelay >= (tBuf[i] - localEps)) {
      yout = uBuf[i];
    } else {
      if (i == 0) {
        yout = uBuf[bufSz-1];
      } else {
        yout = uBuf[i-1];
      }
    }
  } else {
    if (i == 0) {
      t1 = tBuf[bufSz-1];
      u1 = uBuf[bufSz-1];
    } else {
      t1 = tBuf[i-1];
      u1 = uBuf[i-1];
    }

    t2 = tBuf[i];
    u2 = uBuf[i];
    if (t2 == t1) {
      if (tMinusDelay >= t2) {
        yout = u2;
      } else {
        yout = u1;
      }
    } else {
      real_T f1 = (t2-tMinusDelay) / (t2-t1);
      real_T f2 = 1.0 - f1;

      /*
       * Use Lagrange's interpolation formula.  Exact outputs at t1, t2.
       */
      yout = f1*u1 + f2*u2;
    }
  }

  return(yout);
}

/*
 *   This function updates active task flag for each subrate.
 * The function is called at model base rate, hence the
 * generated code self-manages all its subrates.
 */
static void rate_scheduler(void)
{
  /* Compute which subrates run during the next base time step.  Subrates
   * are an integer multiple of the base rate counter.  Therefore, the subtask
   * counter is reset when it reaches its limit (zero means run).
   */
  (acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2])++;
  if ((acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2]) > 5) {
                              /* Sample time: [0.00024000000000000003s, 0.0s] */
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] = 0;
  }

  acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleHits[2] =
    (acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0);
}

/* This function updates continuous states using the ODE8 fixed-step
 * solver algorithm
 */
static void rt_ertODEUpdateContinuousStates(RTWSolverInfo *si )
{
  /* Solver Matrices */
#define acdcmg_sim8_1_sm_grid_simulation_NSTAGES 13

  static real_T rt_ODE8_B[13] = {
    4.174749114153025E-2, 0.0, 0.0, 0.0,
    0.0, -5.54523286112393E-2, 2.393128072011801E-1, 7.03510669403443E-1,
    -7.597596138144609E-1, 6.605630309222863E-1, 1.581874825101233E-1,
    -2.381095387528628E-1, 2.5E-1
  };

  static real_T rt_ODE8_C[13] = {
    0.0, 5.555555555555556E-2, 8.333333333333333E-2, 1.25E-1,
    3.125E-1, 3.75E-1, 1.475E-1, 4.65E-1,
    5.648654513822596E-1, 6.5E-1, 9.246562776405044E-1, 1.0, 1.0
  };

  static real_T rt_ODE8_A[13][13] = {
    /* rt_ODE8_A[0][] */
    { 0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[1][] */
    { 5.555555555555556E-2, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[2][] */
    { 2.083333333333333E-2, 6.25E-2, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[3][] */
    { 3.125E-2, 0.0, 9.375E-2, 0.0,
      0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[4][] */
    { 3.125E-1, 0.0, -1.171875, 1.171875,
      0.0, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[5][] */
    { 3.75E-2, 0.0, 0.0, 1.875E-1,
      1.5E-1, 0.0, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[6][] */
    { 4.791013711111111E-2, 0.0, 0.0, 1.122487127777778E-1,
      -2.550567377777778E-2, 1.284682388888889E-2, 0.0, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[7][] */
    { 1.691798978729228E-2, 0.0, 0.0, 3.878482784860432E-1,
      3.597736985150033E-2, 1.969702142156661E-1, -1.727138523405018E-1, 0.0,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[8][] */
    { 6.90957533591923E-2, 0.0, 0.0, -6.342479767288542E-1,
      -1.611975752246041E-1, 1.386503094588253E-1, 9.409286140357563E-1,
      2.11636326481944E-1,
      0.0, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[9][] */
    { 1.835569968390454E-1, 0.0, 0.0, -2.468768084315592,
      -2.912868878163005E-1, -2.647302023311738E-2, 2.8478387641928,
      2.813873314698498E-1,
      1.237448998633147E-1, 0.0, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[10][] */
    { -1.215424817395888, 0.0, 0.0, 1.667260866594577E1,
      9.157418284168179E-1, -6.056605804357471, -1.600357359415618E1,
      1.484930308629766E1,
      -1.337157573528985E1, 5.134182648179638, 0.0, 0.0, 0.0 },

    /* rt_ODE8_A[11][] */
    { 2.588609164382643E-1, 0.0, 0.0, -4.774485785489205,
      -4.350930137770325E-1, -3.049483332072241, 5.577920039936099,
      6.155831589861039,
      -5.062104586736938, 2.193926173180679, 1.346279986593349E-1, 0.0, 0.0 },

    /* rt_ODE8_A[12][] */
    { 8.224275996265075E-1, 0.0, 0.0, -1.165867325727766E1,
      -7.576221166909362E-1, 7.139735881595818E-1, 1.207577498689006E1,
      -2.127659113920403,
      1.990166207048956, -2.342864715440405E-1, 1.758985777079423E-1, 0.0, 0.0 },
  };

  time_T t = rtsiGetT(si);
  time_T tnew = rtsiGetSolverStopTime(si);
  time_T h = rtsiGetStepSize(si);
  real_T *x = rtsiGetContStates(si);
  ODE8_IntgData *intgData = (ODE8_IntgData *)rtsiGetSolverData(si);
  real_T *deltaY = intgData->deltaY;
  real_T *x0 = intgData->x0;
  real_T* f[acdcmg_sim8_1_sm_grid_simulation_NSTAGES];
  int idx,stagesIdx,statesIdx;
  double deltaX;
  int_T nXc = 140;
  rtsiSetSimTimeStep(si,MINOR_TIME_STEP);
  f[0] = intgData->f[0];
  f[1] = intgData->f[1];
  f[2] = intgData->f[2];
  f[3] = intgData->f[3];
  f[4] = intgData->f[4];
  f[5] = intgData->f[5];
  f[6] = intgData->f[6];
  f[7] = intgData->f[7];
  f[8] = intgData->f[8];
  f[9] = intgData->f[9];
  f[10] = intgData->f[10];
  f[11] = intgData->f[11];
  f[12] = intgData->f[12];

  /* Save the state values at time t in y and x0*/
  (void) memset(deltaY, 0,
                (uint_T)nXc*sizeof(real_T));
  (void) memcpy(x0, x,
                nXc*sizeof(real_T));
  for (stagesIdx=0;stagesIdx<acdcmg_sim8_1_sm_grid_simulation_NSTAGES;stagesIdx
       ++) {
    (void) memcpy(x, x0,
                  (uint_T)nXc*sizeof(real_T));
    for (statesIdx=0;statesIdx<nXc;statesIdx++) {
      deltaX = 0;
      for (idx=0;idx<stagesIdx;idx++) {
        deltaX = deltaX + h*rt_ODE8_A[stagesIdx][idx]*f[idx][statesIdx];
      }

      x[statesIdx] = x0[statesIdx] + deltaX;
    }

    if (stagesIdx==0) {
      rtsiSetdX(si, f[stagesIdx]);
      acdcmg_sim8_1_sm_grid_simulation_derivatives();
    } else {
      (stagesIdx==acdcmg_sim8_1_sm_grid_simulation_NSTAGES-1)? rtsiSetT(si, tnew)
        : rtsiSetT(si, t + h*rt_ODE8_C[stagesIdx]);
      rtsiSetdX(si, f[stagesIdx]);
      acdcmg_sim8_1_sm_grid_simulation_output();
      acdcmg_sim8_1_sm_grid_simulation_derivatives();
    }

    for (statesIdx=0;statesIdx<nXc;statesIdx++) {
      deltaY[statesIdx] = deltaY[statesIdx] + h*rt_ODE8_B[stagesIdx]*f[stagesIdx]
        [statesIdx];
    }
  }

  for (statesIdx=0;statesIdx<nXc;statesIdx++) {
    x[statesIdx] = x0[statesIdx] + deltaY[statesIdx];
  }

  rtsiSetSimTimeStep(si,MAJOR_TIME_STEP);
}

/*
 * System initialize for enable system:
 *    '<S409>/RMS '
 *    '<S631>/RMS '
 *    '<S643>/RMS '
 *    '<S655>/RMS '
 *    '<S667>/RMS '
 *    '<S679>/RMS '
 *    '<S691>/RMS '
 *    '<S703>/RMS '
 */
void acdcmg_sim8_1_sm_grid__RMS_Init(P_RMS_acdcmg_sim8_1_sm_grid_s_T *localP,
  X_RMS_acdcmg_sim8_1_sm_grid_s_T *localX)
{
  /* InitializeConditions for Integrator: '<S415>/integrator' */
  localX->integrator_CSTATE_f[0] = localP->integrator_IC;
  localX->integrator_CSTATE_f[1] = localP->integrator_IC;
  localX->integrator_CSTATE_f[2] = localP->integrator_IC;

  /* InitializeConditions for Integrator: '<S416>/integrator' */
  localX->integrator_CSTATE_g[0] = localP->integrator_IC_a;
  localX->integrator_CSTATE_g[1] = localP->integrator_IC_a;
  localX->integrator_CSTATE_g[2] = localP->integrator_IC_a;
}

/*
 * Disable for enable system:
 *    '<S409>/RMS '
 *    '<S631>/RMS '
 *    '<S643>/RMS '
 *    '<S655>/RMS '
 *    '<S667>/RMS '
 *    '<S679>/RMS '
 *    '<S691>/RMS '
 *    '<S703>/RMS '
 */
void acdcmg_sim8_1_sm_gr_RMS_Disable(DW_RMS_acdcmg_sim8_1_sm_grid__T *localDW)
{
  localDW->RMS_MODE = false;
}

/*
 * Outputs for enable system:
 *    '<S409>/RMS '
 *    '<S631>/RMS '
 *    '<S643>/RMS '
 *    '<S655>/RMS '
 *    '<S667>/RMS '
 *    '<S679>/RMS '
 *    '<S691>/RMS '
 *    '<S703>/RMS '
 */
void acdcmg_sim8_1_sm_grid_simul_RMS(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, boolean_T rtu_Enable, const real_T
  rtu_In[3], B_RMS_acdcmg_sim8_1_sm_grid_s_T *localB,
  DW_RMS_acdcmg_sim8_1_sm_grid__T *localDW, P_RMS_acdcmg_sim8_1_sm_grid_s_T
  *localP, X_RMS_acdcmg_sim8_1_sm_grid_s_T *localX)
{
  /* Outputs for Enabled SubSystem: '<S409>/RMS ' incorporates:
   *  EnablePort: '<S410>/Enable'
   */
  if ((rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) &&
      rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable) {
      if (!localDW->RMS_MODE) {
        localDW->RMS_MODE = true;
      }
    } else {
      if (localDW->RMS_MODE) {
        acdcmg_sim8_1_sm_gr_RMS_Disable(localDW);
      }
    }
  }

  if (localDW->RMS_MODE) {
    /* Integrator: '<S415>/integrator' */
    localB->integrator[0] = localX->integrator_CSTATE_f[0];
    localB->integrator[1] = localX->integrator_CSTATE_f[1];
    localB->integrator[2] = localX->integrator_CSTATE_f[2];

    /* Integrator: '<S416>/integrator' */
    localB->integrator_b[0] = localX->integrator_CSTATE_g[0];
    localB->integrator_b[1] = localX->integrator_CSTATE_g[1];
    localB->integrator_b[2] = localX->integrator_CSTATE_g[2];

    /* Sin: '<S412>/sin(wt)' */
    localB->coswt = sin(6.2831853071795862 * localP->Fourier1_Freq *
                        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] +
                        localP->sinwt_Phase) * localP->sinwt_Amp +
      localP->sinwt_Bias;

    /* Product: '<S412>/Product' */
    localB->Product[0] = rtu_In[0] * localB->coswt;
    localB->Product[1] = rtu_In[1] * localB->coswt;
    localB->Product[2] = rtu_In[2] * localB->coswt;

    /* Sin: '<S412>/cos(wt)' */
    localB->coswt = sin(6.2831853071795862 * localP->Fourier1_Freq *
                        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] +
                        localP->coswt_Phase) * localP->coswt_Amp +
      localP->coswt_Bias;

    /* Product: '<S412>/Product1' */
    localB->Product1[0] = rtu_In[0] * localB->coswt;
    localB->Product1[1] = rtu_In[1] * localB->coswt;
    localB->Product1[2] = rtu_In[2] * localB->coswt;
  }

  /* End of Outputs for SubSystem: '<S409>/RMS ' */
}

/*
 * Derivatives for enable system:
 *    '<S409>/RMS '
 *    '<S631>/RMS '
 *    '<S643>/RMS '
 *    '<S655>/RMS '
 *    '<S667>/RMS '
 *    '<S679>/RMS '
 *    '<S691>/RMS '
 *    '<S703>/RMS '
 */
void acdcmg_sim8_1_sm_grid_RMS_Deriv(B_RMS_acdcmg_sim8_1_sm_grid_s_T *localB,
  DW_RMS_acdcmg_sim8_1_sm_grid__T *localDW, XDot_RMS_acdcmg_sim8_1_sm_gri_T
  *localXdot)
{
  if (localDW->RMS_MODE) {
    /* Derivatives for Integrator: '<S415>/integrator' */
    localXdot->integrator_CSTATE_f[0] = localB->Product1[0];
    localXdot->integrator_CSTATE_f[1] = localB->Product1[1];
    localXdot->integrator_CSTATE_f[2] = localB->Product1[2];

    /* Derivatives for Integrator: '<S416>/integrator' */
    localXdot->integrator_CSTATE_g[0] = localB->Product[0];
    localXdot->integrator_CSTATE_g[1] = localB->Product[1];
    localXdot->integrator_CSTATE_g[2] = localB->Product[2];
  } else {
    {
      real_T *dx;
      int_T i;
      dx = &(localXdot->integrator_CSTATE_f[0]);
      for (i=0; i < 6; i++) {
        dx[i] = 0.0;
      }
    }
  }
}

/*
 * System initialize for enable system:
 *    '<S409>/TrueRMS '
 *    '<S631>/TrueRMS '
 *    '<S643>/TrueRMS '
 *    '<S655>/TrueRMS '
 *    '<S667>/TrueRMS '
 *    '<S679>/TrueRMS '
 *    '<S691>/TrueRMS '
 *    '<S703>/TrueRMS '
 */
void acdcmg_sim8_1_sm_g_TrueRMS_Init(P_TrueRMS_acdcmg_sim8_1_sm_gr_T *localP,
  X_TrueRMS_acdcmg_sim8_1_sm_gr_T *localX)
{
  /* InitializeConditions for Integrator: '<S418>/integrator' */
  localX->integrator_CSTATE_o[0] = localP->integrator_IC;
  localX->integrator_CSTATE_o[1] = localP->integrator_IC;
  localX->integrator_CSTATE_o[2] = localP->integrator_IC;
}

/*
 * Disable for enable system:
 *    '<S409>/TrueRMS '
 *    '<S631>/TrueRMS '
 *    '<S643>/TrueRMS '
 *    '<S655>/TrueRMS '
 *    '<S667>/TrueRMS '
 *    '<S679>/TrueRMS '
 *    '<S691>/TrueRMS '
 *    '<S703>/TrueRMS '
 */
void acdcmg_sim8_1_s_TrueRMS_Disable(DW_TrueRMS_acdcmg_sim8_1_sm_g_T *localDW)
{
  localDW->TrueRMS_MODE = false;
}

/*
 * Outputs for enable system:
 *    '<S409>/TrueRMS '
 *    '<S631>/TrueRMS '
 *    '<S643>/TrueRMS '
 *    '<S655>/TrueRMS '
 *    '<S667>/TrueRMS '
 *    '<S679>/TrueRMS '
 *    '<S691>/TrueRMS '
 *    '<S703>/TrueRMS '
 */
void acdcmg_sim8_1_sm_grid_s_TrueRMS(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, boolean_T rtu_Enable, const real_T
  rtu_In[3], B_TrueRMS_acdcmg_sim8_1_sm_gr_T *localB,
  DW_TrueRMS_acdcmg_sim8_1_sm_g_T *localDW, X_TrueRMS_acdcmg_sim8_1_sm_gr_T
  *localX)
{
  /* Outputs for Enabled SubSystem: '<S409>/TrueRMS ' incorporates:
   *  EnablePort: '<S411>/Enable'
   */
  if ((rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) &&
      rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable) {
      if (!localDW->TrueRMS_MODE) {
        localDW->TrueRMS_MODE = true;
      }
    } else {
      if (localDW->TrueRMS_MODE) {
        acdcmg_sim8_1_s_TrueRMS_Disable(localDW);
      }
    }
  }

  if (localDW->TrueRMS_MODE) {
    /* Integrator: '<S418>/integrator' */
    localB->integrator[0] = localX->integrator_CSTATE_o[0];
    localB->integrator[1] = localX->integrator_CSTATE_o[1];
    localB->integrator[2] = localX->integrator_CSTATE_o[2];

    /* Product: '<S411>/Product' */
    localB->Product[0] = rtu_In[0] * rtu_In[0];
    localB->Product[1] = rtu_In[1] * rtu_In[1];
    localB->Product[2] = rtu_In[2] * rtu_In[2];
  }

  /* End of Outputs for SubSystem: '<S409>/TrueRMS ' */
}

/*
 * Derivatives for enable system:
 *    '<S409>/TrueRMS '
 *    '<S631>/TrueRMS '
 *    '<S643>/TrueRMS '
 *    '<S655>/TrueRMS '
 *    '<S667>/TrueRMS '
 *    '<S679>/TrueRMS '
 *    '<S691>/TrueRMS '
 *    '<S703>/TrueRMS '
 */
void acdcmg_sim8_1_sm__TrueRMS_Deriv(B_TrueRMS_acdcmg_sim8_1_sm_gr_T *localB,
  DW_TrueRMS_acdcmg_sim8_1_sm_g_T *localDW, XDot_TrueRMS_acdcmg_sim8_1_sm_T
  *localXdot)
{
  if (localDW->TrueRMS_MODE) {
    /* Derivatives for Integrator: '<S418>/integrator' */
    localXdot->integrator_CSTATE_o[0] = localB->Product[0];
    localXdot->integrator_CSTATE_o[1] = localB->Product[1];
    localXdot->integrator_CSTATE_o[2] = localB->Product[2];
  } else {
    {
      real_T *dx;
      int_T i;
      dx = &(localXdot->integrator_CSTATE_o[0]);
      for (i=0; i < 3; i++) {
        dx[i] = 0.0;
      }
    }
  }
}

real_T rt_hypotd_snf(real_T u0, real_T u1)
{
  real_T y;
  real_T a;
  a = fabs(u0);
  y = fabs(u1);
  if (a < y) {
    a = a / y;
    y = y * sqrt(a * a + 1.0);
  } else if (a > y) {
    y = y / a;
    y = a * sqrt(y * y + 1.0);
  } else if (rtIsNaN(y)) {
  } else {
    y = a * 1.4142135623730951;
  }

  return y;
}

real_T rt_atan2d_snf(real_T u0, real_T u1)
{
  real_T y;
  real_T tmp;
  real_T tmp_0;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = rtGetNaN();
  } else if (rtIsInf(u0) && rtIsInf(u1)) {
    if (u1 > 0.0) {
      tmp = 1.0;
    } else {
      tmp = -1.0;
    }

    if (u0 > 0.0) {
      tmp_0 = 1.0;
    } else {
      tmp_0 = -1.0;
    }

    y = atan2(tmp_0, tmp);
  } else if (u1 == 0.0) {
    if (u0 > 0.0) {
      y = RT_PI / 2.0;
    } else if (u0 < 0.0) {
      y = -(RT_PI / 2.0);
    } else {
      y = 0.0;
    }
  } else {
    y = atan2(u0, u1);
  }

  return y;
}

/*
 * System initialize for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm_gri_RMS_h_Init(DW_RMS_acdcmg_sim8_1_sm_gri_a_T *localDW,
  P_RMS_acdcmg_sim8_1_sm_grid_p_T *localP, X_RMS_acdcmg_sim8_1_sm_grid_m_T
  *localX)
{
  /* InitializeConditions for Integrator: '<S428>/integrator' */
  localX->integrator_CSTATE_bx = localP->integrator_IC;

  /* InitializeConditions for Memory: '<S428>/Memory' */
  localDW->Memory_PreviousInput = localP->Memory_InitialCondition;

  /* InitializeConditions for Integrator: '<S427>/integrator' */
  localX->integrator_CSTATE_fb = localP->integrator_IC_k;

  /* InitializeConditions for Memory: '<S427>/Memory' */
  localDW->Memory_PreviousInput_d = localP->Memory_InitialCondition_l;
}

/*
 * Disable for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm__RMS_b_Disable(DW_RMS_acdcmg_sim8_1_sm_gri_a_T *localDW)
{
  localDW->RMS_MODE = false;
}

/*
 * Start for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm_gr_RMS_a_Start(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, DW_RMS_acdcmg_sim8_1_sm_gri_a_T
  *localDW, P_RMS_acdcmg_sim8_1_sm_grid_p_T *localP)
{
  /* Start for TransportDelay: '<S428>/Transport Delay' */
  {
    real_T *pBuffer = &localDW->TransportDelay_RWORK.TUbufferArea[0];
    localDW->TransportDelay_IWORK.Tail = 0;
    localDW->TransportDelay_IWORK.Head = 0;
    localDW->TransportDelay_IWORK.Last = 0;
    localDW->TransportDelay_IWORK.CircularBufSize = 8192;
    pBuffer[0] = localP->TransportDelay_InitOutput;
    pBuffer[8192] = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    localDW->TransportDelay_PWORK.TUbufferPtrs[0] = (void *) &pBuffer[0];
    localDW->TransportDelay_PWORK.TUbufferPtrs[1] = (void *) &pBuffer[8192];
  }

  /* Start for TransportDelay: '<S427>/Transport Delay' */
  {
    real_T *pBuffer = &localDW->TransportDelay_RWORK_i.TUbufferArea[0];
    localDW->TransportDelay_IWORK_b.Tail = 0;
    localDW->TransportDelay_IWORK_b.Head = 0;
    localDW->TransportDelay_IWORK_b.Last = 0;
    localDW->TransportDelay_IWORK_b.CircularBufSize = 8192;
    pBuffer[0] = localP->TransportDelay_InitOutput_f;
    pBuffer[8192] = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    localDW->TransportDelay_PWORK_p.TUbufferPtrs[0] = (void *) &pBuffer[0];
    localDW->TransportDelay_PWORK_p.TUbufferPtrs[1] = (void *) &pBuffer[8192];
  }
}

/*
 * Outputs for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm_grid_sim_RMS_i(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, boolean_T rtu_Enable, real_T
  rtu_In, B_RMS_acdcmg_sim8_1_sm_grid_g_T *localB,
  DW_RMS_acdcmg_sim8_1_sm_gri_a_T *localDW, P_RMS_acdcmg_sim8_1_sm_grid_p_T
  *localP, X_RMS_acdcmg_sim8_1_sm_grid_m_T *localX)
{
  /* Outputs for Enabled SubSystem: '<S419>/RMS ' incorporates:
   *  EnablePort: '<S422>/Enable'
   */
  if ((rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) &&
      rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable) {
      if (!localDW->RMS_MODE) {
        localDW->RMS_MODE = true;
      }
    } else {
      if (localDW->RMS_MODE) {
        acdcmg_sim8_1_sm__RMS_b_Disable(localDW);
      }
    }
  }

  if (localDW->RMS_MODE) {
    /* Integrator: '<S428>/integrator' */
    localB->integrator = localX->integrator_CSTATE_bx;

    /* TransportDelay: '<S428>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      real_T tMinusDelay = simTime - (localP->TransportDelay_Delay);
      localB->TransportDelay = rt_TDelayInterpolate(
        tMinusDelay,
        0.0,
        *tBuffer,
        *uBuffer,
        localDW->TransportDelay_IWORK.CircularBufSize,
        &localDW->TransportDelay_IWORK.Last,
        localDW->TransportDelay_IWORK.Tail,
        localDW->TransportDelay_IWORK.Head,
        localP->TransportDelay_InitOutput,
        0,
        0);
    }

    /* Clock: '<S428>/Clock' */
    localB->ComplextoMagnitudeAngle_o1 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

    /* RelationalOperator: '<S428>/Relational Operator' incorporates:
     *  Constant: '<S428>/K1'
     */
    localB->RelationalOperator = (localB->ComplextoMagnitudeAngle_o1 >=
      localP->K1_Value);
    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Memory: '<S428>/Memory' */
      localB->Memory = localDW->Memory_PreviousInput;
    }

    /* Switch: '<S428>/Switch' */
    if (localB->RelationalOperator) {
      /* Sum: '<S428>/Sum' */
      localB->Sum = localB->integrator - localB->TransportDelay;

      /* Gain: '<S428>/Gain' */
      localB->Gain_d = localP->Gain_Gain_g * localB->Sum;
      localB->Switch = localB->Gain_d;
    } else {
      localB->Switch = localB->Memory;
    }

    /* End of Switch: '<S428>/Switch' */

    /* Integrator: '<S427>/integrator' */
    localB->integrator_j = localX->integrator_CSTATE_fb;

    /* TransportDelay: '<S427>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->
        TransportDelay_PWORK_p.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->
        TransportDelay_PWORK_p.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      real_T tMinusDelay = simTime - (localP->TransportDelay_Delay_n);
      localB->TransportDelay_d = rt_TDelayInterpolate(
        tMinusDelay,
        0.0,
        *tBuffer,
        *uBuffer,
        localDW->TransportDelay_IWORK_b.CircularBufSize,
        &localDW->TransportDelay_IWORK_b.Last,
        localDW->TransportDelay_IWORK_b.Tail,
        localDW->TransportDelay_IWORK_b.Head,
        localP->TransportDelay_InitOutput_f,
        0,
        0);
    }

    /* Clock: '<S427>/Clock' */
    localB->ComplextoMagnitudeAngle_o1 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

    /* RelationalOperator: '<S427>/Relational Operator' incorporates:
     *  Constant: '<S427>/K1'
     */
    localB->RelationalOperator = (localB->ComplextoMagnitudeAngle_o1 >=
      localP->K1_Value_c);
    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Memory: '<S427>/Memory' */
      localB->Memory_e = localDW->Memory_PreviousInput_d;
    }

    /* Switch: '<S427>/Switch' */
    if (localB->RelationalOperator) {
      /* Sum: '<S427>/Sum' */
      localB->Sum_m = localB->integrator_j - localB->TransportDelay_d;

      /* Gain: '<S427>/Gain' */
      localB->Gain_o = localP->Gain_Gain * localB->Sum_m;
      localB->Switch_p = localB->Gain_o;
    } else {
      localB->Switch_p = localB->Memory_e;
    }

    /* End of Switch: '<S427>/Switch' */

    /* RealImagToComplex: '<S424>/Real-Imag to Complex' */
    localB->RealImagtoComplex.re = localB->Switch;
    localB->RealImagtoComplex.im = localB->Switch_p;

    /* ComplexToMagnitudeAngle: '<S424>/Complex to Magnitude-Angle' */
    localB->ComplextoMagnitudeAngle_o1 = rt_hypotd_snf
      (localB->RealImagtoComplex.re, localB->RealImagtoComplex.im);
    localB->ComplextoMagnitudeAngle_o2 = rt_atan2d_snf
      (localB->RealImagtoComplex.im, localB->RealImagtoComplex.re);

    /* Sin: '<S424>/sin(wt)' */
    localB->coswt = sin(6.2831853071795862 * localP->Fourier1_Freq *
                        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] +
                        localP->sinwt_Phase) * localP->sinwt_Amp +
      localP->sinwt_Bias;

    /* Product: '<S424>/Product' */
    localB->Product = rtu_In * localB->coswt;

    /* Sin: '<S424>/cos(wt)' */
    localB->coswt = sin(6.2831853071795862 * localP->Fourier1_Freq *
                        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] +
                        localP->coswt_Phase) * localP->coswt_Amp +
      localP->coswt_Bias;

    /* Product: '<S424>/Product1' */
    localB->Product1 = rtu_In * localB->coswt;

    /* Gain: '<S422>/Gain' */
    localB->Gain = localP->Gain_Gain_a * localB->ComplextoMagnitudeAngle_o1;
  }

  /* End of Outputs for SubSystem: '<S419>/RMS ' */
}

/*
 * Update for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm_g_RMS_n_Update(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, B_RMS_acdcmg_sim8_1_sm_grid_g_T
  *localB, DW_RMS_acdcmg_sim8_1_sm_gri_a_T *localDW)
{
  /* Update for Enabled SubSystem: '<S419>/RMS ' incorporates:
   *  EnablePort: '<S422>/Enable'
   */
  if (localDW->RMS_MODE) {
    /* Update for TransportDelay: '<S428>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      localDW->TransportDelay_IWORK.Head = ((localDW->TransportDelay_IWORK.Head <
        (localDW->TransportDelay_IWORK.CircularBufSize-1)) ?
        (localDW->TransportDelay_IWORK.Head+1) : 0);
      if (localDW->TransportDelay_IWORK.Head ==
          localDW->TransportDelay_IWORK.Tail) {
        localDW->TransportDelay_IWORK.Tail =
          ((localDW->TransportDelay_IWORK.Tail <
            (localDW->TransportDelay_IWORK.CircularBufSize-1)) ?
           (localDW->TransportDelay_IWORK.Tail+1) : 0);
      }

      (*tBuffer)[localDW->TransportDelay_IWORK.Head] = simTime;
      (*uBuffer)[localDW->TransportDelay_IWORK.Head] = localB->integrator;
    }

    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Update for Memory: '<S428>/Memory' */
      localDW->Memory_PreviousInput = localB->Switch;
    }

    /* Update for TransportDelay: '<S427>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->
        TransportDelay_PWORK_p.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->
        TransportDelay_PWORK_p.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      localDW->TransportDelay_IWORK_b.Head =
        ((localDW->TransportDelay_IWORK_b.Head <
          (localDW->TransportDelay_IWORK_b.CircularBufSize-1)) ?
         (localDW->TransportDelay_IWORK_b.Head+1) : 0);
      if (localDW->TransportDelay_IWORK_b.Head ==
          localDW->TransportDelay_IWORK_b.Tail) {
        localDW->TransportDelay_IWORK_b.Tail =
          ((localDW->TransportDelay_IWORK_b.Tail <
            (localDW->TransportDelay_IWORK_b.CircularBufSize-1)) ?
           (localDW->TransportDelay_IWORK_b.Tail+1) : 0);
      }

      (*tBuffer)[localDW->TransportDelay_IWORK_b.Head] = simTime;
      (*uBuffer)[localDW->TransportDelay_IWORK_b.Head] = localB->integrator_j;
    }

    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Update for Memory: '<S427>/Memory' */
      localDW->Memory_PreviousInput_d = localB->Switch_p;
    }
  }

  /* End of Update for SubSystem: '<S419>/RMS ' */
}

/*
 * Derivatives for enable system:
 *    '<S419>/RMS '
 *    '<S420>/RMS '
 *    '<S421>/RMS '
 *    '<S449>/RMS '
 *    '<S450>/RMS '
 *    '<S451>/RMS '
 *    '<S479>/RMS '
 *    '<S480>/RMS '
 *    '<S481>/RMS '
 *    '<S509>/RMS '
 *    ...
 */
void acdcmg_sim8_1_sm_gr_RMS_n_Deriv(B_RMS_acdcmg_sim8_1_sm_grid_g_T *localB,
  DW_RMS_acdcmg_sim8_1_sm_gri_a_T *localDW, XDot_RMS_acdcmg_sim8_1_sm_g_c_T
  *localXdot)
{
  if (localDW->RMS_MODE) {
    /* Derivatives for Integrator: '<S428>/integrator' */
    localXdot->integrator_CSTATE_bx = localB->Product;

    /* Derivatives for Integrator: '<S427>/integrator' */
    localXdot->integrator_CSTATE_fb = localB->Product1;
  } else {
    {
      real_T *dx;
      int_T i;
      dx = &(localXdot->integrator_CSTATE_bx);
      for (i=0; i < 2; i++) {
        dx[i] = 0.0;
      }
    }
  }
}

/*
 * System initialize for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1_sm_TrueRMS_n_Init(DW_TrueRMS_acdcmg_sim8_1_sm_d_T *localDW,
  P_TrueRMS_acdcmg_sim8_1_sm__p_T *localP, X_TrueRMS_acdcmg_sim8_1_sm__i_T
  *localX)
{
  /* InitializeConditions for Integrator: '<S430>/integrator' */
  localX->integrator_CSTATE_e = localP->integrator_IC;

  /* InitializeConditions for Memory: '<S430>/Memory' */
  localDW->Memory_PreviousInput = localP->Memory_InitialCondition;
}

/*
 * Disable for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1_TrueRMS_p_Disable(DW_TrueRMS_acdcmg_sim8_1_sm_d_T *localDW)
{
  localDW->TrueRMS_MODE = false;
}

/*
 * Start for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1_s_TrueRMS_c_Start(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, DW_TrueRMS_acdcmg_sim8_1_sm_d_T
  *localDW, P_TrueRMS_acdcmg_sim8_1_sm__p_T *localP)
{
  /* Start for TransportDelay: '<S430>/Transport Delay' */
  {
    real_T *pBuffer = &localDW->TransportDelay_RWORK.TUbufferArea[0];
    localDW->TransportDelay_IWORK.Tail = 0;
    localDW->TransportDelay_IWORK.Head = 0;
    localDW->TransportDelay_IWORK.Last = 0;
    localDW->TransportDelay_IWORK.CircularBufSize = 8192;
    pBuffer[0] = localP->TransportDelay_InitOutput;
    pBuffer[8192] = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    localDW->TransportDelay_PWORK.TUbufferPtrs[0] = (void *) &pBuffer[0];
    localDW->TransportDelay_PWORK.TUbufferPtrs[1] = (void *) &pBuffer[8192];
  }
}

/*
 * Outputs for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1_sm_grid_TrueRMS_p(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, boolean_T rtu_Enable, real_T
  rtu_In, B_TrueRMS_acdcmg_sim8_1_sm__p_T *localB,
  DW_TrueRMS_acdcmg_sim8_1_sm_d_T *localDW, P_TrueRMS_acdcmg_sim8_1_sm__p_T
  *localP, X_TrueRMS_acdcmg_sim8_1_sm__i_T *localX)
{
  /* Outputs for Enabled SubSystem: '<S419>/TrueRMS ' incorporates:
   *  EnablePort: '<S423>/Enable'
   */
  if ((rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) &&
      rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable) {
      if (!localDW->TrueRMS_MODE) {
        localDW->TrueRMS_MODE = true;
      }
    } else {
      if (localDW->TrueRMS_MODE) {
        acdcmg_sim8_1_TrueRMS_p_Disable(localDW);
      }
    }
  }

  if (localDW->TrueRMS_MODE) {
    /* Clock: '<S430>/Clock' */
    localB->Saturationtoavoidnegativesqrt =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

    /* Integrator: '<S430>/integrator' */
    localB->integrator = localX->integrator_CSTATE_e;

    /* TransportDelay: '<S430>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      real_T tMinusDelay = simTime - (localP->TransportDelay_Delay);
      localB->TransportDelay = rt_TDelayInterpolate(
        tMinusDelay,
        0.0,
        *tBuffer,
        *uBuffer,
        localDW->TransportDelay_IWORK.CircularBufSize,
        &localDW->TransportDelay_IWORK.Last,
        localDW->TransportDelay_IWORK.Tail,
        localDW->TransportDelay_IWORK.Head,
        localP->TransportDelay_InitOutput,
        0,
        0);
    }

    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Memory: '<S430>/Memory' */
      localB->Memory = localDW->Memory_PreviousInput;
    }

    /* RelationalOperator: '<S430>/Relational Operator' incorporates:
     *  Constant: '<S430>/K1'
     */
    localB->RelationalOperator = (localB->Saturationtoavoidnegativesqrt >=
      localP->K1_Value);

    /* Switch: '<S430>/Switch' */
    if (localB->RelationalOperator) {
      /* Sum: '<S430>/Sum' */
      localB->Sum = localB->integrator - localB->TransportDelay;

      /* Gain: '<S430>/Gain' */
      localB->Gain = localP->Gain_Gain * localB->Sum;
      localB->Switch = localB->Gain;
    } else {
      localB->Switch = localB->Memory;
    }

    /* End of Switch: '<S430>/Switch' */

    /* Product: '<S423>/Product' */
    localB->Product = rtu_In * rtu_In;

    /* Saturate: '<S423>/Saturation to avoid negative sqrt' */
    if (localB->Switch > localP->Saturationtoavoidnegativesqrt_U) {
      localB->Saturationtoavoidnegativesqrt =
        localP->Saturationtoavoidnegativesqrt_U;
    } else if (localB->Switch < localP->Saturationtoavoidnegativesqrt_L) {
      localB->Saturationtoavoidnegativesqrt =
        localP->Saturationtoavoidnegativesqrt_L;
    } else {
      localB->Saturationtoavoidnegativesqrt = localB->Switch;
    }

    /* End of Saturate: '<S423>/Saturation to avoid negative sqrt' */

    /* Sqrt: '<S423>/Sqrt' */
    localB->Sqrt = sqrt(localB->Saturationtoavoidnegativesqrt);
  }

  /* End of Outputs for SubSystem: '<S419>/TrueRMS ' */
}

/*
 * Update for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1__TrueRMS_a_Update(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, B_TrueRMS_acdcmg_sim8_1_sm__p_T
  *localB, DW_TrueRMS_acdcmg_sim8_1_sm_d_T *localDW)
{
  /* Update for Enabled SubSystem: '<S419>/TrueRMS ' incorporates:
   *  EnablePort: '<S423>/Enable'
   */
  if (localDW->TrueRMS_MODE) {
    /* Update for TransportDelay: '<S430>/Transport Delay' */
    {
      real_T **uBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[0];
      real_T **tBuffer = (real_T**)&localDW->TransportDelay_PWORK.TUbufferPtrs[1];
      real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
      localDW->TransportDelay_IWORK.Head = ((localDW->TransportDelay_IWORK.Head <
        (localDW->TransportDelay_IWORK.CircularBufSize-1)) ?
        (localDW->TransportDelay_IWORK.Head+1) : 0);
      if (localDW->TransportDelay_IWORK.Head ==
          localDW->TransportDelay_IWORK.Tail) {
        localDW->TransportDelay_IWORK.Tail =
          ((localDW->TransportDelay_IWORK.Tail <
            (localDW->TransportDelay_IWORK.CircularBufSize-1)) ?
           (localDW->TransportDelay_IWORK.Tail+1) : 0);
      }

      (*tBuffer)[localDW->TransportDelay_IWORK.Head] = simTime;
      (*uBuffer)[localDW->TransportDelay_IWORK.Head] = localB->integrator;
    }

    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
      /* Update for Memory: '<S430>/Memory' */
      localDW->Memory_PreviousInput = localB->Switch;
    }
  }

  /* End of Update for SubSystem: '<S419>/TrueRMS ' */
}

/*
 * Derivatives for enable system:
 *    '<S419>/TrueRMS '
 *    '<S420>/TrueRMS '
 *    '<S421>/TrueRMS '
 *    '<S449>/TrueRMS '
 *    '<S450>/TrueRMS '
 *    '<S451>/TrueRMS '
 *    '<S479>/TrueRMS '
 *    '<S480>/TrueRMS '
 *    '<S481>/TrueRMS '
 *    '<S509>/TrueRMS '
 *    ...
 */
void acdcmg_sim8_1_s_TrueRMS_p_Deriv(B_TrueRMS_acdcmg_sim8_1_sm__p_T *localB,
  DW_TrueRMS_acdcmg_sim8_1_sm_d_T *localDW, XDot_TrueRMS_acdcmg_sim8_1__f_T
  *localXdot)
{
  if (localDW->TrueRMS_MODE) {
    /* Derivatives for Integrator: '<S430>/integrator' */
    localXdot->integrator_CSTATE_e = localB->Product;
  } else {
    localXdot->integrator_CSTATE_e = 0.0;
  }
}

/*
 * System initialize for enable system:
 *    '<S725>/Harmonic Generator'
 *    '<S955>/Harmonic Generator'
 */
void acdcmg_s_HarmonicGenerator_Init(B_HarmonicGenerator_acdcmg_si_T *localB,
  P_HarmonicGenerator_acdcmg_si_T *localP)
{
  /* SystemInitialize for Outport: '<S726>/Out1' */
  localB->Product1[0] = localP->Out1_Y0;
  localB->Product1[1] = localP->Out1_Y0;
  localB->Product1[2] = localP->Out1_Y0;

  /* SystemInitialize for Outport: '<S726>/Out2' */
  localB->Product1_d[0] = localP->Out2_Y0;
  localB->Product1_d[1] = localP->Out2_Y0;
  localB->Product1_d[2] = localP->Out2_Y0;
}

/*
 * Disable for enable system:
 *    '<S725>/Harmonic Generator'
 *    '<S955>/Harmonic Generator'
 */
void acdcm_HarmonicGenerator_Disable(B_HarmonicGenerator_acdcmg_si_T *localB,
  DW_HarmonicGenerator_acdcmg_s_T *localDW, P_HarmonicGenerator_acdcmg_si_T
  *localP)
{
  /* Disable for Outport: '<S726>/Out1' */
  localB->Product1[0] = localP->Out1_Y0;
  localB->Product1[1] = localP->Out1_Y0;
  localB->Product1[2] = localP->Out1_Y0;

  /* Disable for Outport: '<S726>/Out2' */
  localB->Product1_d[0] = localP->Out2_Y0;
  localB->Product1_d[1] = localP->Out2_Y0;
  localB->Product1_d[2] = localP->Out2_Y0;
  localDW->HarmonicGenerator_MODE = false;
}

/*
 * Output and update for enable system:
 *    '<S725>/Harmonic Generator'
 *    '<S955>/Harmonic Generator'
 */
void acdcmg_sim8_1_HarmonicGenerator(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, real_T rtu_Enable, real_T rtu_wt,
  B_HarmonicGenerator_acdcmg_si_T *localB, DW_HarmonicGenerator_acdcmg_s_T
  *localDW, P_HarmonicGenerator_acdcmg_si_T *localP)
{
  /* Outputs for Enabled SubSystem: '<S725>/Harmonic Generator' incorporates:
   *  EnablePort: '<S726>/Enable'
   */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable > 0.0) {
      if (!localDW->HarmonicGenerator_MODE) {
        localDW->HarmonicGenerator_MODE = true;
      }
    } else {
      if (localDW->HarmonicGenerator_MODE) {
        acdcm_HarmonicGenerator_Disable(localB, localDW, localP);
      }
    }
  }

  if (localDW->HarmonicGenerator_MODE) {
    /* Gain: '<S728>/Gain1' */
    localB->Gain1 = localP->HarmonicAgeneration_n_Harmo * rtu_wt;

    /* Gain: '<S728>/Gain3' incorporates:
     *  Constant: '<S728>/Phase_Harmo'
     */
    localB->Gain3 = localP->Gain3_Gain * localP->HarmonicAgeneration_Phase_Harmo;

    /* Sum: '<S728>/Sum1' incorporates:
     *  Constant: '<S728>/Phase_Harmo2'
     *  Constant: '<S728>/valp_nom2'
     */
    localB->Sum1 = localP->HarmonicAgeneration_Seq_Harmo +
      localP->valp_nom2_Value;

    /* MultiPortSwitch: '<S728>/Multiport Switch' incorporates:
     *  Constant: '<S728>/Negative-sequence'
     *  Constant: '<S728>/Positive-sequence'
     *  Constant: '<S728>/Zero-sequence'
     */
    switch ((int32_T)localB->Sum1) {
     case 1:
      localB->Sum[0] = localP->Zerosequence_Value[0];
      localB->Sum[1] = localP->Zerosequence_Value[1];
      localB->Sum[2] = localP->Zerosequence_Value[2];
      break;

     case 2:
      localB->Sum[0] = localP->Positivesequence_Value[0];
      localB->Sum[1] = localP->Positivesequence_Value[1];
      localB->Sum[2] = localP->Positivesequence_Value[2];
      break;

     default:
      localB->Sum[0] = localP->Negativesequence_Value[0];
      localB->Sum[1] = localP->Negativesequence_Value[1];
      localB->Sum[2] = localP->Negativesequence_Value[2];
      break;
    }

    /* End of MultiPortSwitch: '<S728>/Multiport Switch' */

    /* Step: '<S726>/Step' */
    if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1] < localP->Step_Time) {
      localB->Gain3_j = localP->Step_Y0;
    } else {
      localB->Gain3_j = localP->Step_YFinal;
    }

    /* End of Step: '<S726>/Step' */

    /* Step: '<S726>/Step1' */
    if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1] < localP->Step1_Time) {
      localB->Gain1_k = localP->Step1_Y0;
    } else {
      localB->Gain1_k = localP->Step1_YFinal;
    }

    /* End of Step: '<S726>/Step1' */

    /* Sum: '<S726>/Sum4' */
    localB->Sum4 = localB->Gain3_j + localB->Gain1_k;

    /* Sum: '<S728>/Sum' */
    localB->TrigonometricFunction1[0] = (localB->Gain1 + localB->Gain3) +
      localB->Sum[0];
    localB->TrigonometricFunction1[1] = (localB->Gain1 + localB->Gain3) +
      localB->Sum[1];
    localB->TrigonometricFunction1[2] = (localB->Gain1 + localB->Gain3) +
      localB->Sum[2];

    /* Trigonometry: '<S728>/Trigonometric Function1' */
    localB->Sum[0] = sin(localB->TrigonometricFunction1[0]);
    localB->Sum[1] = sin(localB->TrigonometricFunction1[1]);
    localB->Sum[2] = sin(localB->TrigonometricFunction1[2]);

    /* Product: '<S728>/Product1' incorporates:
     *  Constant: '<S728>/Phase_Harmo1'
     */
    localB->Product1[0] = localB->Sum4 * localP->HarmonicAgeneration_Mag_Harmo *
      localB->Sum[0];
    localB->Product1[1] = localB->Sum4 * localP->HarmonicAgeneration_Mag_Harmo *
      localB->Sum[1];
    localB->Product1[2] = localB->Sum4 * localP->HarmonicAgeneration_Mag_Harmo *
      localB->Sum[2];

    /* Gain: '<S729>/Gain1' */
    localB->Gain1_k = localP->HarmonicBgeneration_n_Harmo * rtu_wt;

    /* Gain: '<S729>/Gain3' incorporates:
     *  Constant: '<S729>/Phase_Harmo'
     */
    localB->Gain3_j = localP->Gain3_Gain_f *
      localP->HarmonicBgeneration_Phase_Harmo;

    /* Sum: '<S729>/Sum1' incorporates:
     *  Constant: '<S729>/Phase_Harmo2'
     *  Constant: '<S729>/valp_nom2'
     */
    localB->Sum1_l = localP->HarmonicBgeneration_Seq_Harmo +
      localP->valp_nom2_Value_b;

    /* MultiPortSwitch: '<S729>/Multiport Switch' incorporates:
     *  Constant: '<S729>/Negative-sequence'
     *  Constant: '<S729>/Positive-sequence'
     *  Constant: '<S729>/Zero-sequence'
     */
    switch ((int32_T)localB->Sum1_l) {
     case 1:
      localB->TrigonometricFunction1[0] = localP->Zerosequence_Value_g[0];
      localB->TrigonometricFunction1[1] = localP->Zerosequence_Value_g[1];
      localB->TrigonometricFunction1[2] = localP->Zerosequence_Value_g[2];
      break;

     case 2:
      localB->TrigonometricFunction1[0] = localP->Positivesequence_Value_k[0];
      localB->TrigonometricFunction1[1] = localP->Positivesequence_Value_k[1];
      localB->TrigonometricFunction1[2] = localP->Positivesequence_Value_k[2];
      break;

     default:
      localB->TrigonometricFunction1[0] = localP->Negativesequence_Value_c[0];
      localB->TrigonometricFunction1[1] = localP->Negativesequence_Value_c[1];
      localB->TrigonometricFunction1[2] = localP->Negativesequence_Value_c[2];
      break;
    }

    /* End of MultiPortSwitch: '<S729>/Multiport Switch' */

    /* Sum: '<S729>/Sum' */
    localB->Sum[0] = (localB->Gain1_k + localB->Gain3_j) +
      localB->TrigonometricFunction1[0];
    localB->Sum[1] = (localB->Gain1_k + localB->Gain3_j) +
      localB->TrigonometricFunction1[1];
    localB->Sum[2] = (localB->Gain1_k + localB->Gain3_j) +
      localB->TrigonometricFunction1[2];

    /* Trigonometry: '<S729>/Trigonometric Function1' */
    localB->TrigonometricFunction1[0] = sin(localB->Sum[0]);
    localB->TrigonometricFunction1[1] = sin(localB->Sum[1]);
    localB->TrigonometricFunction1[2] = sin(localB->Sum[2]);

    /* Product: '<S729>/Product1' incorporates:
     *  Constant: '<S729>/Phase_Harmo1'
     */
    localB->Product1_d[0] = localB->Sum4 * localP->HarmonicBgeneration_Mag_Harmo
      * localB->TrigonometricFunction1[0];
    localB->Product1_d[1] = localB->Sum4 * localP->HarmonicBgeneration_Mag_Harmo
      * localB->TrigonometricFunction1[1];
    localB->Product1_d[2] = localB->Sum4 * localP->HarmonicBgeneration_Mag_Harmo
      * localB->TrigonometricFunction1[2];
  }

  /* End of Outputs for SubSystem: '<S725>/Harmonic Generator' */
}

/*
 * System initialize for enable system:
 *    '<S725>/Signal generator'
 *    '<S955>/Signal generator'
 */
void acdcmg_sim_Signalgenerator_Init(B_Signalgenerator_acdcmg_sim8_T *localB,
  DW_Signalgenerator_acdcmg_sim_T *localDW, P_Signalgenerator_acdcmg_sim8_T
  *localP)
{
  /* InitializeConditions for DiscreteIntegrator: '<S727>/Discrete-Time Integrator' */
  localDW->DiscreteTimeIntegrator_DSTATE = localP->DiscreteTimeIntegrator_IC;

  /* InitializeConditions for DiscreteIntegrator: '<S731>/Discrete-Time Integrator1' */
  localDW->DiscreteTimeIntegrator1_DSTATE = localP->DiscreteTimeIntegrator1_IC;

  /* InitializeConditions for UnitDelay: '<S731>/Unit Delay' */
  localDW->UnitDelay_DSTATE = localP->UnitDelay_InitialCondition;

  /* SystemInitialize for Outport: '<S727>/timer' */
  localB->LookUpTable = localP->timer_Y0;

  /* SystemInitialize for Outport: '<S727>/selector' */
  localB->LogicalOperator1 = localP->selector_Y0;

  /* SystemInitialize for Outport: '<S727>/magnitude' */
  localB->Switch2_i = localP->magnitude_Y0;

  /* SystemInitialize for Outport: '<S727>/frequency' */
  localB->DiscreteTimeIntegrator = localP->frequency_Y0;

  /* SystemInitialize for Outport: '<S727>/phase' */
  localB->Switch3_d = localP->phase_Y0;
}

/*
 * Disable for enable system:
 *    '<S725>/Signal generator'
 *    '<S955>/Signal generator'
 */
void acdcmg__Signalgenerator_Disable(B_Signalgenerator_acdcmg_sim8_T *localB,
  DW_Signalgenerator_acdcmg_sim_T *localDW, P_Signalgenerator_acdcmg_sim8_T
  *localP)
{
  /* Disable for Outport: '<S727>/timer' */
  localB->LookUpTable = localP->timer_Y0;

  /* Disable for Outport: '<S727>/selector' */
  localB->LogicalOperator1 = localP->selector_Y0;

  /* Disable for Outport: '<S727>/magnitude' */
  localB->Switch2_i = localP->magnitude_Y0;

  /* Disable for Outport: '<S727>/frequency' */
  localB->DiscreteTimeIntegrator = localP->frequency_Y0;

  /* Disable for Outport: '<S727>/phase' */
  localB->Switch3_d = localP->phase_Y0;
  localDW->Signalgenerator_MODE = false;
}

/*
 * Outputs for enable system:
 *    '<S725>/Signal generator'
 *    '<S955>/Signal generator'
 */
void acdcmg_sim8_1_s_Signalgenerator(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T
  * const acdcmg_sim8_1_sm_grid_simulation_M, real_T rtu_Enable,
  B_Signalgenerator_acdcmg_sim8_T *localB, DW_Signalgenerator_acdcmg_sim_T
  *localDW, P_Signalgenerator_acdcmg_sim8_T *localP, real_T rtp_VariationEntity)
{
  /* Outputs for Enabled SubSystem: '<S725>/Signal generator' incorporates:
   *  EnablePort: '<S727>/Enable'
   */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    if (rtu_Enable > 0.0) {
      if (!localDW->Signalgenerator_MODE) {
        localDW->Signalgenerator_MODE = true;
      }
    } else {
      if (localDW->Signalgenerator_MODE) {
        acdcmg__Signalgenerator_Disable(localB, localDW, localP);
      }
    }
  }

  if (localDW->Signalgenerator_MODE) {
    /* DigitalClock: '<S732>/Digital Clock' */
    localB->Toff = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S732>/Look-Up Table' */
    localB->LookUpTable = rt_Lookup(localP->LookUpTable_XData, 2, localB->Toff,
      localP->LookUpTable_YData);

    /* DiscreteIntegrator: '<S727>/Discrete-Time Integrator' */
    localB->DiscreteTimeIntegrator = localDW->DiscreteTimeIntegrator_DSTATE;

    /* Step: '<S731>/Step1' */
    if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1] <
        localP->VariationSubSystem_Toff_Variati) {
      localB->Toff = localP->Step1_Y0;
    } else {
      localB->Toff = localP->Step1_YFinal;
    }

    /* End of Step: '<S731>/Step1' */

    /* DataTypeConversion: '<S731>/Data Type  Conversion2' */
    localB->RelationalOperator1 = (localB->Toff != 0.0);

    /* Logic: '<S731>/Logical Operator1' */
    localB->Amplitude = !localB->RelationalOperator1;

    /* RelationalOperator: '<S731>/Relational Operator1' incorporates:
     *  Constant: '<S727>/valp_nom5'
     *  Constant: '<S731>/Constant3'
     */
    localB->RelationalOperator1 = (localP->valp_nom5_Value ==
      localP->Constant3_Value_m);

    /* Logic: '<S731>/Logical Operator' */
    localB->Phase = (localB->Amplitude && localB->RelationalOperator1);

    /* Step: '<S731>/Step' */
    if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1] <
        localP->VariationSubSystem_Ton_Variatio) {
      localB->Ton = localP->Step_Y0;
    } else {
      localB->Ton = localP->Step_YFinal;
    }

    /* End of Step: '<S731>/Step' */

    /* DiscreteIntegrator: '<S731>/Discrete-Time Integrator1' */
    localB->Ramp = localDW->DiscreteTimeIntegrator1_DSTATE;

    /* UnitDelay: '<S731>/Unit Delay' */
    localB->Switch4 = localDW->UnitDelay_DSTATE;

    /* Switch: '<S731>/Switch2' */
    if (localB->Toff >= localP->Switch2_Threshold) {
      /* MultiPortSwitch: '<S731>/Multiport Switch1' incorporates:
       *  Constant: '<S727>/valp_nom5'
       *  Constant: '<S731>/Constant5'
       */
      switch ((int32_T)localP->valp_nom5_Value) {
       case 1:
        /* Product: '<S731>/Product2' incorporates:
         *  Constant: '<S731>/valp_nom6'
         */
        localB->Step = localP->VariationSubSystem_VariationSte * localB->Ton;
        localB->MultiportSwitch1 = localB->Step;
        break;

       case 2:
        localB->MultiportSwitch1 = localB->Ramp;
        break;

       case 3:
        /* Gain: '<S731>/Gain1' incorporates:
         *  Constant: '<S731>/valp_nom9'
         */
        localB->TrigonometricFunction1 = localP->Gain1_Gain *
          localP->VariationSubSystem_VariationFre;

        /* Product: '<S731>/Product1' */
        localB->Product1 = localB->Ramp * localB->TrigonometricFunction1;

        /* Trigonometry: '<S731>/Trigonometric Function1' */
        localB->TrigonometricFunction1 = sin(localB->Product1);

        /* Product: '<S731>/Product' incorporates:
         *  Constant: '<S731>/valp_nom8'
         */
        localB->Mod = localP->VariationSubSystem_VariationMag *
          localB->TrigonometricFunction1;
        localB->MultiportSwitch1 = localB->Mod;
        break;

       default:
        localB->MultiportSwitch1 = localP->Constant5_Value_j;
        break;
      }

      /* End of MultiPortSwitch: '<S731>/Multiport Switch1' */
      localB->Switch2 = localB->MultiportSwitch1;
    } else {
      localB->Switch2 = localB->Switch4;
    }

    /* End of Switch: '<S731>/Switch2' */

    /* Switch: '<S731>/Switch3' incorporates:
     *  Constant: '<S731>/Constant1'
     */
    if (localB->Phase) {
      localB->Switch3 = localP->Constant1_Value_p;
    } else {
      localB->Switch3 = localB->Switch2;
    }

    /* End of Switch: '<S731>/Switch3' */

    /* RelationalOperator: '<S727>/Relational Operator2' incorporates:
     *  Constant: '<S727>/Constant3'
     *  Constant: '<S727>/valp_nom3'
     */
    localB->Phase = (rtp_VariationEntity == localP->Constant3_Value);

    /* Switch: '<S727>/Switch4' incorporates:
     *  Constant: '<S727>/Constant5'
     */
    if (localB->Phase) {
      localB->Switch4 = localB->Switch3;
    } else {
      localB->Switch4 = localP->Constant5_Value;
    }

    /* End of Switch: '<S727>/Switch4' */

    /* Gain: '<S727>/Gain2' */
    localB->Gain2 = localP->Gain2_Gain * localB->Switch4;

    /* RelationalOperator: '<S727>/Relational Operator3' incorporates:
     *  Constant: '<S727>/Constant6'
     *  Constant: '<S727>/valp_nom5'
     */
    localB->Phase = (localP->valp_nom5_Value == localP->Constant6_Value);

    /* RelationalOperator: '<S727>/Relational Operator' incorporates:
     *  Constant: '<S727>/Constant'
     *  Constant: '<S727>/valp_nom3'
     */
    localB->Amplitude = (rtp_VariationEntity == localP->Constant_Value_e);

    /* Logic: '<S727>/Logical Operator1' */
    localB->LogicalOperator1 = (localB->Phase && localB->Amplitude);

    /* RelationalOperator: '<S727>/Relational Operator1' incorporates:
     *  Constant: '<S727>/Constant2'
     *  Constant: '<S727>/valp_nom3'
     */
    localB->Phase = (rtp_VariationEntity == localP->Constant2_Value_j);

    /* Switch: '<S727>/Switch2' incorporates:
     *  Constant: '<S727>/Constant1'
     */
    if (localB->Amplitude) {
      localB->Switch2_i = localB->Switch3;
    } else {
      localB->Switch2_i = localP->Constant1_Value;
    }

    /* End of Switch: '<S727>/Switch2' */

    /* Switch: '<S727>/Switch3' incorporates:
     *  Constant: '<S727>/Constant4'
     */
    if (localB->Phase) {
      /* Gain: '<S727>/Gain4' */
      localB->Gain4 = localP->Gain4_Gain * localB->Switch3;
      localB->Switch3_d = localB->Gain4;
    } else {
      localB->Switch3_d = localP->Constant4_Value;
    }

    /* End of Switch: '<S727>/Switch3' */

    /* Switch: '<S731>/Switch' incorporates:
     *  Constant: '<S731>/Constant4'
     */
    if (localB->Ton >= localP->Switch_Threshold) {
      /* RelationalOperator: '<S731>/Relational Operator' incorporates:
       *  Constant: '<S727>/valp_nom5'
       *  Constant: '<S731>/Constant'
       */
      localB->RelationalOperator = (localP->valp_nom5_Value ==
        localP->Constant_Value);

      /* Switch: '<S731>/Switch1' incorporates:
       *  Constant: '<S731>/Constant2'
       *  Constant: '<S731>/valp_nom7'
       */
      if (localB->RelationalOperator) {
        localB->Switch1 = localP->VariationSubSystem_VariationRat;
      } else {
        localB->Switch1 = localP->Constant2_Value;
      }

      /* End of Switch: '<S731>/Switch1' */
      localB->Switch = localB->Switch1;
    } else {
      localB->Switch = localP->Constant4_Value_h;
    }

    /* End of Switch: '<S731>/Switch' */
  }

  /* End of Outputs for SubSystem: '<S725>/Signal generator' */
}

/*
 * Update for enable system:
 *    '<S725>/Signal generator'
 *    '<S955>/Signal generator'
 */
void acdcmg_s_Signalgenerator_Update(B_Signalgenerator_acdcmg_sim8_T *localB,
  DW_Signalgenerator_acdcmg_sim_T *localDW, P_Signalgenerator_acdcmg_sim8_T
  *localP)
{
  /* Update for Enabled SubSystem: '<S725>/Signal generator' incorporates:
   *  EnablePort: '<S727>/Enable'
   */
  if (localDW->Signalgenerator_MODE) {
    /* Update for DiscreteIntegrator: '<S727>/Discrete-Time Integrator' */
    localDW->DiscreteTimeIntegrator_DSTATE =
      localDW->DiscreteTimeIntegrator_DSTATE +
      localP->DiscreteTimeIntegrator_gainval * localB->Gain2;

    /* Update for DiscreteIntegrator: '<S731>/Discrete-Time Integrator1' */
    localDW->DiscreteTimeIntegrator1_DSTATE =
      localDW->DiscreteTimeIntegrator1_DSTATE +
      localP->DiscreteTimeIntegrator1_gainval * localB->Switch;

    /* Update for UnitDelay: '<S731>/Unit Delay' */
    localDW->UnitDelay_DSTATE = localB->Switch2;
  }

  /* End of Update for SubSystem: '<S725>/Signal generator' */
}

/*
 * System initialize for enable system:
 *    '<S880>/Subsystem - pi//2 delay'
 *    '<S893>/Subsystem - pi//2 delay'
 *    '<S899>/Subsystem - pi//2 delay'
 *    '<S905>/Subsystem - pi//2 delay'
 */
void acdcmg_s_Subsystempi2delay_Init(B_Subsystempi2delay_acdcmg_si_T *localB,
  P_Subsystempi2delay_acdcmg_si_T *localP)
{
  /* SystemInitialize for Outport: '<S884>/dq' */
  localB->Fcn = localP->dq_Y0[0];
  localB->Fcn1 = localP->dq_Y0[1];
}

/*
 * Output and update for enable system:
 *    '<S880>/Subsystem - pi//2 delay'
 *    '<S893>/Subsystem - pi//2 delay'
 *    '<S899>/Subsystem - pi//2 delay'
 *    '<S905>/Subsystem - pi//2 delay'
 */
void acdcmg_sim8_1_Subsystempi2delay(uint8_T rtu_Enable, const real_T
  rtu_alpha_beta[2], real_T rtu_wt, B_Subsystempi2delay_acdcmg_si_T *localB)
{
  /* Outputs for Enabled SubSystem: '<S880>/Subsystem - pi//2 delay' incorporates:
   *  EnablePort: '<S884>/Enable'
   */
  if (rtu_Enable > 0) {
    /* Fcn: '<S884>/Fcn' */
    localB->Fcn = rtu_alpha_beta[0] * sin(rtu_wt) - rtu_alpha_beta[1] * cos
      (rtu_wt);

    /* Fcn: '<S884>/Fcn1' */
    localB->Fcn1 = rtu_alpha_beta[0] * cos(rtu_wt) + rtu_alpha_beta[1] * sin
      (rtu_wt);
  }

  /* End of Outputs for SubSystem: '<S880>/Subsystem - pi//2 delay' */
}

/*
 * System initialize for enable system:
 *    '<S880>/Subsystem1'
 *    '<S893>/Subsystem1'
 *    '<S899>/Subsystem1'
 *    '<S905>/Subsystem1'
 */
void acdcmg_sim8_1_s_Subsystem1_Init(B_Subsystem1_acdcmg_sim8_1_sm_T *localB,
  P_Subsystem1_acdcmg_sim8_1_sm_T *localP)
{
  /* SystemInitialize for Outport: '<S885>/dq' */
  localB->Fcn = localP->dq_Y0[0];
  localB->Fcn1 = localP->dq_Y0[1];
}

/*
 * Output and update for enable system:
 *    '<S880>/Subsystem1'
 *    '<S893>/Subsystem1'
 *    '<S899>/Subsystem1'
 *    '<S905>/Subsystem1'
 */
void acdcmg_sim8_1_sm_gri_Subsystem1(uint8_T rtu_Enable, const real_T
  rtu_alpha_beta[2], real_T rtu_wt, B_Subsystem1_acdcmg_sim8_1_sm_T *localB)
{
  /* Outputs for Enabled SubSystem: '<S880>/Subsystem1' incorporates:
   *  EnablePort: '<S885>/Enable'
   */
  if (rtu_Enable > 0) {
    /* Fcn: '<S885>/Fcn' */
    localB->Fcn = rtu_alpha_beta[0] * cos(rtu_wt) + rtu_alpha_beta[1] * sin
      (rtu_wt);

    /* Fcn: '<S885>/Fcn1' */
    localB->Fcn1 = -rtu_alpha_beta[0] * sin(rtu_wt) + rtu_alpha_beta[1] * cos
      (rtu_wt);
  }

  /* End of Outputs for SubSystem: '<S880>/Subsystem1' */
}

real_T rt_powd_snf(real_T u0, real_T u1)
{
  real_T y;
  real_T tmp;
  real_T tmp_0;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = rtGetNaN();
  } else {
    tmp = fabs(u0);
    tmp_0 = fabs(u1);
    if (rtIsInf(u1)) {
      if (tmp == 1.0) {
        y = 1.0;
      } else if (tmp > 1.0) {
        if (u1 > 0.0) {
          y = rtGetInf();
        } else {
          y = 0.0;
        }
      } else if (u1 > 0.0) {
        y = 0.0;
      } else {
        y = rtGetInf();
      }
    } else if (tmp_0 == 0.0) {
      y = 1.0;
    } else if (tmp_0 == 1.0) {
      if (u1 > 0.0) {
        y = u0;
      } else {
        y = 1.0 / u0;
      }
    } else if (u1 == 2.0) {
      y = u0 * u0;
    } else if ((u1 == 0.5) && (u0 >= 0.0)) {
      y = sqrt(u0);
    } else if ((u0 < 0.0) && (u1 > floor(u1))) {
      y = rtGetNaN();
    } else {
      y = pow(u0, u1);
    }
  }

  return y;
}

/* Model output function */
void acdcmg_sim8_1_sm_grid_simulation_output(void)
{
  real_T *lastU;
  int32_T tmp;
  real_T tmp_0;
  int32_T i;
  int32_T i_0;
  int32_T i_1;
  int32_T i_2;
  int32_T i_3;
  int32_T qY;
  int32_T qY_0;
  int32_T qY_1;
  int32_T qY_2;
  int32_T qY_3;
  int32_T qY_4;
  int32_T qY_5;
  int32_T qY_6;
  int32_T qY_7;
  int32_T qY_8;
  int32_T qY_9;
  int32_T qY_a;
  int32_T qY_b;
  int32_T qY_c;
  int32_T qY_d;
  int32_T qY_e;
  int32_T qY_f;
  int32_T qY_g;
  int32_T qY_h;
  int32_T qY_i;
  int32_T qY_j;
  int32_T qY_k;
  int32_T qY_l;
  int32_T qY_m;
  int32_T qY_n;
  int32_T qY_o;
  int32_T qY_p;
  int32_T qY_q;
  int32_T qY_r;
  int32_T qY_s;
  int32_T qY_t;
  int32_T qY_u;
  int32_T qY_v;
  int32_T qY_w;
  int32_T qY_x;
  int32_T qY_y;
  int32_T qY_z;
  int32_T qY_10;
  int32_T qY_11;
  int32_T qY_12;
  int32_T qY_13;
  int32_T qY_14;
  int32_T qY_15;
  int32_T qY_16;
  int32_T qY_17;
  int32_T qY_18;
  int32_T qY_19;
  int32_T qY_1a;
  int32_T qY_1b;
  int32_T qY_1c;
  int32_T qY_1d;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    /* set solver stop time */
    if (!(acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick0+1)) {
      rtsiSetSolverStopTime(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                            ((acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH0
        + 1) * acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize0 *
        4294967296.0));
    } else {
      rtsiSetSolverStopTime(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                            ((acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick0
        + 1) * acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize0 +
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH0 *
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize0 * 4294967296.0));
    }
  }                                    /* end MajorTimeStep */

  /* Update absolute time of base rate at minor time step */
  if (rtmIsMinorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] = rtsiGetT
      (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo);
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Memory: '<S2>/S-Function' */
    acdcmg_sim8_1_sm_grid_simulation_B.Vd =
      acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PreviousInput;

    /* Sum: '<S2>/Sum' incorporates:
     *  Constant: '<S2>/S-Function1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum =
      acdcmg_sim8_1_sm_grid_simulation_P.SFunction1_Value +
      acdcmg_sim8_1_sm_grid_simulation_B.Vd;

    /* Stop: '<S2>/Stop Simulation' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Sum != 0.0) {
      rtmSetStopRequested(acdcmg_sim8_1_sm_grid_simulation_M, 1);
    }

    /* End of Stop: '<S2>/Stop Simulation' */

    /* Saturate: '<S72>/Saturation' incorporates:
     *  Constant: '<S72>/Temp C'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.TempC_Value >
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_e) {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation =
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_e;
    } else if (acdcmg_sim8_1_sm_grid_simulation_P.TempC_Value <
               acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_c) {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation =
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_c;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation =
        acdcmg_sim8_1_sm_grid_simulation_P.TempC_Value;
    }

    /* End of Saturate: '<S72>/Saturation' */
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* DiscreteIntegrator: '<S149>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_B.D =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE;
  }

  /* Step: '<S141>/Deblock MPPT' */
  if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] <
      acdcmg_sim8_1_sm_grid_simulation_P.Ts_PV) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_k =
      acdcmg_sim8_1_sm_grid_simulation_P.DeblockMPPT_Y0;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_k =
      acdcmg_sim8_1_sm_grid_simulation_P.DeblockMPPT_YFinal;
  }

  /* End of Step: '<S141>/Deblock MPPT' */

  /* Switch: '<S149>/Switch1' incorporates:
   *  Constant: '<S149>/Constant1'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Sum_k >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_B.D;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value_a;
  }

  /* End of Switch: '<S149>/Switch1' */

  /* Sum: '<S141>/Add' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g = 0.0 +
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Saturate: '<S141>/Saturation' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g >
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_i) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_i;
  } else if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g <
             acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_g) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_g;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  }

  /* End of Saturate: '<S141>/Saturation' */

  /* Product: '<S12>/Product' incorporates:
   *  Constant: '<S12>/Constant1'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Product =
    acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value_m *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Constant: '<S1236>/SwitchCurrents' */
    memcpy(&acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents[0],
           &acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value[0], 9U *
           sizeof(real_T));

    /* Memory: '<S94>/it init1' */
    acdcmg_sim8_1_sm_grid_simulation_B.itinit1 =
      acdcmg_sim8_1_sm_grid_simulation_DW.itinit1_PreviousInput;

    /* Gain: '<S94>/R2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Vd =
      acdcmg_sim8_1_sm_grid_simulation_P.R2_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

    /* Fcn: '<S94>/Fcn9' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e = 1.000001 *
      acdcmg_sim8_1_sm_grid_simulation_B.Vd * 0.96711798839458663 / 0.9999;

    /* DiscreteTransferFcn: '<S94>/Current filter' */
    acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter = 0.0 +
      acdcmg_sim8_1_sm_grid_simulation_P.Currentfilter_NumCoef *
      acdcmg_sim8_1_sm_grid_simulation_DW.Currentfilter_states;

    /* RelationalOperator: '<S96>/Compare' incorporates:
     *  Constant: '<S96>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_f = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter >
       acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_e);

    /* DataTypeConversion: '<S94>/Data Type Conversion2' */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 = (real_T)
      acdcmg_sim8_1_sm_grid_simulation_B.Compare_f;

    /* Memory: '<S94>/it init' */
    acdcmg_sim8_1_sm_grid_simulation_B.itinit =
      acdcmg_sim8_1_sm_grid_simulation_DW.itinit_PreviousInput;

    /* DiscreteIntegrator: '<S94>/int(i)' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_IC_LOADING != 0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
        acdcmg_sim8_1_sm_grid_simulation_B.itinit;
      if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE >=
          acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat) {
        acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
          acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat;
      } else {
        if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE <=
            acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat) {
          acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
            acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat;
        }
      }
    }

    if ((acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 > 0.0) &&
        (acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState <= 0)) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
        acdcmg_sim8_1_sm_grid_simulation_B.itinit;
      if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE >=
          acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat) {
        acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
          acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat;
      } else {
        if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE <=
            acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat) {
          acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
            acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat;
        }
      }
    }

    if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE >=
        acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
        acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat;
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE <=
          acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat) {
        acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
          acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE;

    /* End of DiscreteIntegrator: '<S94>/int(i)' */

    /* Gain: '<S94>/Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_p *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* RelationalOperator: '<S101>/LowerRelop1' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.Gain >
       acdcmg_sim8_1_sm_grid_simulation_B.Vd);

    /* Switch: '<S101>/Switch2' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
        acdcmg_sim8_1_sm_grid_simulation_B.Vd;
    } else {
      /* RelationalOperator: '<S101>/UpperRelop' incorporates:
       *  Constant: '<S94>/Constant9'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop_k =
        (acdcmg_sim8_1_sm_grid_simulation_B.Gain <
         acdcmg_sim8_1_sm_grid_simulation_P.Constant9_Value);

      /* Switch: '<S101>/Switch' incorporates:
       *  Constant: '<S94>/Constant9'
       */
      if (acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop_k) {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_le =
          acdcmg_sim8_1_sm_grid_simulation_P.Constant9_Value;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_le =
          acdcmg_sim8_1_sm_grid_simulation_B.Gain;
      }

      /* End of Switch: '<S101>/Switch' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_le;
    }

    /* End of Switch: '<S101>/Switch2' */

    /* RelationalOperator: '<S94>/Relational Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.Divide_e <=
       acdcmg_sim8_1_sm_grid_simulation_B.Sum_h);

    /* Switch: '<S94>/Switch7' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch7 =
        acdcmg_sim8_1_sm_grid_simulation_B.Vd;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch7 =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    }

    /* End of Switch: '<S94>/Switch7' */

    /* Fcn: '<S94>/E_NL' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = -0.0011237722207230567 *
      acdcmg_sim8_1_sm_grid_simulation_B.itinit1 /
      (acdcmg_sim8_1_sm_grid_simulation_B.itinit1 -
       acdcmg_sim8_1_sm_grid_simulation_B.Switch7) *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch7;

    /* Fcn: '<S94>/E_dyn Discharge' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      -acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 *
      0.0011237722207230567 * acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter *
      acdcmg_sim8_1_sm_grid_simulation_B.itinit1 /
      (acdcmg_sim8_1_sm_grid_simulation_B.itinit1 -
       acdcmg_sim8_1_sm_grid_simulation_B.Switch7);

    /* Gain: '<S94>/R3' */
    acdcmg_sim8_1_sm_grid_simulation_B.R3 =
      acdcmg_sim8_1_sm_grid_simulation_P.R3_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

    /* RelationalOperator: '<S102>/LowerRelop1' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.Gain >
       acdcmg_sim8_1_sm_grid_simulation_B.R3);

    /* Switch: '<S102>/Switch2' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2 =
        acdcmg_sim8_1_sm_grid_simulation_B.R3;
    } else {
      /* Fcn: '<S94>/Fcn6' */
      acdcmg_sim8_1_sm_grid_simulation_B.Fcn6 =
        -acdcmg_sim8_1_sm_grid_simulation_B.R3 * 0.999 * 0.1 * 0.9999;

      /* RelationalOperator: '<S102>/UpperRelop' */
      acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop =
        (acdcmg_sim8_1_sm_grid_simulation_B.Gain <
         acdcmg_sim8_1_sm_grid_simulation_B.Fcn6);

      /* Switch: '<S102>/Switch' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop) {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_o =
          acdcmg_sim8_1_sm_grid_simulation_B.Fcn6;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_o =
          acdcmg_sim8_1_sm_grid_simulation_B.Gain;
      }

      /* End of Switch: '<S102>/Switch' */
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2 =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_o;
    }

    /* End of Switch: '<S102>/Switch2' */

    /* RelationalOperator: '<S97>/Compare' incorporates:
     *  Constant: '<S97>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_f = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter <
       acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_ex);

    /* DataTypeConversion: '<S94>/Data Type Conversion1' */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion1 = (real_T)
      acdcmg_sim8_1_sm_grid_simulation_B.Compare_f;

    /* MultiPortSwitch: '<S98>/Multiport Switch1' incorporates:
     *  Constant: '<S98>/Constant'
     */
    switch ((int32_T)acdcmg_sim8_1_sm_grid_simulation_P.Battery1_BatType) {
     case 1:
      /* Product: '<S98>/Product3' incorporates:
       *  Constant: '<S98>/Constant4'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[0] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch2;
      acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[1] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter;
      acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[2] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion1;
      acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[3] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

      /* Fcn: '<S98>/Charge Lead-Acid' */
      acdcmg_sim8_1_sm_grid_simulation_B.ChargeLeadAcid =
        -acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[2] *
        0.0011237722207230567 * acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[1]
        * (827.19999999999789 / (acdcmg_sim8_1_sm_grid_simulation_B.Product3_j[0]
            + 82.7199999999998));
      acdcmg_sim8_1_sm_grid_simulation_B.Vd =
        acdcmg_sim8_1_sm_grid_simulation_B.ChargeLeadAcid;
      break;

     case 2:
      /* Product: '<S98>/Product' incorporates:
       *  Constant: '<S98>/Constant1'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Product_m[0] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch2;
      acdcmg_sim8_1_sm_grid_simulation_B.Product_m[1] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter;
      acdcmg_sim8_1_sm_grid_simulation_B.Product_m[2] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion1;
      acdcmg_sim8_1_sm_grid_simulation_B.Product_m[3] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

      /* Fcn: '<S98>/Charge Li-Ion' */
      acdcmg_sim8_1_sm_grid_simulation_B.ChargeLiIon =
        -acdcmg_sim8_1_sm_grid_simulation_B.Product_m[2] * 0.0011237722207230567
        * acdcmg_sim8_1_sm_grid_simulation_B.Product_m[1] *
        acdcmg_sim8_1_sm_grid_simulation_B.Product_m[3] /
        (acdcmg_sim8_1_sm_grid_simulation_B.Product_m[0] +
         acdcmg_sim8_1_sm_grid_simulation_B.Product_m[3] * 0.1);
      acdcmg_sim8_1_sm_grid_simulation_B.Vd =
        acdcmg_sim8_1_sm_grid_simulation_B.ChargeLiIon;
      break;

     case 3:
      /* Product: '<S98>/Product2' incorporates:
       *  Constant: '<S98>/Constant3'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Product2[0] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant3_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch2;
      acdcmg_sim8_1_sm_grid_simulation_B.Product2[1] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant3_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter;
      acdcmg_sim8_1_sm_grid_simulation_B.Product2[2] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant3_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion1;
      acdcmg_sim8_1_sm_grid_simulation_B.Product2[3] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant3_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

      /* Fcn: '<S98>/Charge NiCD' */
      acdcmg_sim8_1_sm_grid_simulation_B.ChargeNiCD =
        -acdcmg_sim8_1_sm_grid_simulation_B.Product2[2] * 0.0011237722207230567 *
        acdcmg_sim8_1_sm_grid_simulation_B.Product2[1] * (827.19999999999789 /
        (fabs(acdcmg_sim8_1_sm_grid_simulation_B.Product2[0]) + 82.7199999999998));
      acdcmg_sim8_1_sm_grid_simulation_B.Vd =
        acdcmg_sim8_1_sm_grid_simulation_B.ChargeNiCD;
      break;

     default:
      /* Product: '<S98>/Product1' incorporates:
       *  Constant: '<S98>/Constant2'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Product1[0] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant2_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch2;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1[1] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant2_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.Currentfilter;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1[2] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant2_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion1;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1[3] =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant2_Value *
        acdcmg_sim8_1_sm_grid_simulation_B.itinit1;

      /* Fcn: '<S98>/Charge NiMH' */
      acdcmg_sim8_1_sm_grid_simulation_B.ChargeNiMH =
        -acdcmg_sim8_1_sm_grid_simulation_B.Product1[2] * 0.0011237722207230567 *
        acdcmg_sim8_1_sm_grid_simulation_B.Product1[1] * (827.19999999999789 /
        (fabs(acdcmg_sim8_1_sm_grid_simulation_B.Product1[0]) + 82.7199999999998));
      acdcmg_sim8_1_sm_grid_simulation_B.Vd =
        acdcmg_sim8_1_sm_grid_simulation_B.ChargeNiMH;
      break;
    }

    /* End of MultiPortSwitch: '<S98>/Multiport Switch1' */

    /* DiscreteIntegrator: '<S99>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_n;

    /* MultiPortSwitch: '<S99>/Multiport Switch1' incorporates:
     *  Constant: '<S99>/Constant'
     */
    switch ((int32_T)acdcmg_sim8_1_sm_grid_simulation_P.Battery1_BatType) {
     case 1:
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator;
      break;

     case 2:
      /* Saturate: '<S99>/Saturation' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.Switch7 >
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat) {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_k =
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat;
      } else if (acdcmg_sim8_1_sm_grid_simulation_B.Switch7 <
                 acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat) {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_k =
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_k =
          acdcmg_sim8_1_sm_grid_simulation_B.Switch7;
      }

      /* End of Saturate: '<S99>/Saturation' */

      /* Fcn: '<S99>/Li-Ion' */
      acdcmg_sim8_1_sm_grid_simulation_B.LiIon = 10.077115567411333 * exp
        (-0.076327433628318578 * acdcmg_sim8_1_sm_grid_simulation_B.Saturation_k);
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.LiIon;
      break;

     case 3:
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator;
      break;

     default:
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator;
      break;
    }

    /* End of MultiPortSwitch: '<S99>/Multiport Switch1' */

    /* Fcn: '<S94>/Fcn5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na = -0.0 *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch7;

    /* Sum: '<S94>/Add2' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (((acdcmg_sim8_1_sm_grid_simulation_B.Sum_h +
         acdcmg_sim8_1_sm_grid_simulation_B.Divide_e) +
        acdcmg_sim8_1_sm_grid_simulation_B.Vd) +
       acdcmg_sim8_1_sm_grid_simulation_B.SSref) +
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;

    /* Sum: '<S94>/Add3' incorporates:
     *  Constant: '<S94>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Add3 =
      acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_j +
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* RelationalOperator: '<S100>/LowerRelop1' incorporates:
     *  Constant: '<S94>/Constant1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.Add3 >
       acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value_o);

    /* Memory: '<S94>/Memory2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory2 =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory2_PreviousInput;

    /* Switch: '<S100>/Switch2' incorporates:
     *  Constant: '<S94>/Constant1'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_h =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value_o;
    } else {
      /* RelationalOperator: '<S100>/UpperRelop' */
      acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop_m =
        (acdcmg_sim8_1_sm_grid_simulation_B.Add3 <
         acdcmg_sim8_1_sm_grid_simulation_B.Memory2);

      /* Switch: '<S100>/Switch' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.UpperRelop_m) {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_jb =
          acdcmg_sim8_1_sm_grid_simulation_B.Memory2;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_jb =
          acdcmg_sim8_1_sm_grid_simulation_B.Add3;
      }

      /* End of Switch: '<S100>/Switch' */
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_h =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_jb;
    }

    /* End of Switch: '<S100>/Switch2' */

    /* Delay: '<S132>/Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE;

    /* Gain: '<S132>/Kp1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.Kp1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Gain: '<S132>/Kp' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kp =
      acdcmg_sim8_1_sm_grid_simulation_P.Kp_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
  }

  /* Integrator: '<S132>/Integrator' */
  /* Limited  Integrator  */
  if (acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE >=
      acdcmg_sim8_1_sm_grid_simulation_P.Integrator_UpperSat) {
    acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE =
      acdcmg_sim8_1_sm_grid_simulation_P.Integrator_UpperSat;
  } else {
    if (acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE <=
        acdcmg_sim8_1_sm_grid_simulation_P.Integrator_LowerSat) {
      acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE =
        acdcmg_sim8_1_sm_grid_simulation_P.Integrator_LowerSat;
    }
  }

  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE;

  /* End of Integrator: '<S132>/Integrator' */

  /* Sum: '<S132>/Sum1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Kp +
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Saturate: '<S114>/Saturation' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Product4_f >
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_o) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_o;
  } else if (acdcmg_sim8_1_sm_grid_simulation_B.Product4_f <
             acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_gp) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_gp;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;
  }

  /* End of Saturate: '<S114>/Saturation' */

  /* Sum: '<S114>/Sum1' incorporates:
   *  Constant: '<S114>/Constant'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_m -
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S11>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay1 =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE;
  }

  /* Product: '<S11>/Divide' */
  acdcmg_sim8_1_sm_grid_simulation_B.Divide =
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f *
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay1;

  /* Sum: '<S12>/Sum1' incorporates:
   *  Constant: '<S12>/Constant'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1 =
    acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_c -
    acdcmg_sim8_1_sm_grid_simulation_B.Product;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S12>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay1_c =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_p;
  }

  /* Product: '<S12>/Divide2' incorporates:
   *  Constant: '<S12>/Constant2'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Divide2 =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1 *
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay1_c /
    acdcmg_sim8_1_sm_grid_simulation_P.Constant2_Value_d;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S11>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE;
  }

  /* Product: '<S11>/Divide1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Divide1 =
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f *
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S12>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_o =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_k;
  }

  /* Product: '<S12>/Divide3' incorporates:
   *  Constant: '<S12>/Constant3'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Divide3 =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1 *
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_o /
    acdcmg_sim8_1_sm_grid_simulation_P.Constant3_Value_c;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S766>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[0];
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[1];
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[2];

    /* Constant: '<S1254>/SwitchCurrents' */
    memcpy(&acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_j[0],
           &acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_b[0], 9U *
           sizeof(real_T));

    /* S-Function (fts5stub): '<S1027>/S-Function' */

    /* Level2 S-Function Block: '<S1027>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[2];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1039>/S-Function' */

    /* Level2 S-Function Block: '<S1039>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[3];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1027>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3 =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2 +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_g;

    /* Gain: '<S1027>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3;

    /* S-Function (fts5stub): '<S1025>/S-Function' */

    /* Level2 S-Function Block: '<S1025>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[4];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1037>/S-Function' */

    /* Level2 S-Function Block: '<S1037>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[5];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1025>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_m =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_g +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_j;

    /* Gain: '<S1025>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_i =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_a *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_m;

    /* S-Function (fts5stub): '<S1026>/S-Function' */

    /* Level2 S-Function Block: '<S1026>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[6];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1038>/S-Function' */

    /* Level2 S-Function Block: '<S1038>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[7];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1026>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_b =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_f +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m4;

    /* Gain: '<S1026>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_iz =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_d *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_b;

    /* S-Function (fts5stub): '<S1091>/S-Function' */

    /* Level2 S-Function Block: '<S1091>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[8];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1079>/S-Function' */

    /* Level2 S-Function Block: '<S1079>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[9];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1091>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_c =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_at +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_k;

    /* Gain: '<S1091>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_m =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_c;

    /* S-Function (fts5stub): '<S1089>/S-Function' */

    /* Level2 S-Function Block: '<S1089>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[10];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1077>/S-Function' */

    /* Level2 S-Function Block: '<S1077>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[11];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1089>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_d =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_n4 +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_d;

    /* Gain: '<S1089>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_o =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_j *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_d;

    /* S-Function (fts5stub): '<S1090>/S-Function' */

    /* Level2 S-Function Block: '<S1090>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[12];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1078>/S-Function' */

    /* Level2 S-Function Block: '<S1078>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[13];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1090>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_p =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_k +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_hx;

    /* Gain: '<S1090>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_p =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_p;

    /* S-Function (fts5stub): '<S1105>/S-Function' */

    /* Level2 S-Function Block: '<S1105>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[14];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1117>/S-Function' */

    /* Level2 S-Function Block: '<S1117>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[15];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1105>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_bq =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_i +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_dv;

    /* Gain: '<S1105>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_pp =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_i *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_bq;

    /* Sum: '<S1117>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_i =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_mh +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_p;

    /* Gain: '<S1117>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_g *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_i;

    /* S-Function (fts5stub): '<S1103>/S-Function' */

    /* Level2 S-Function Block: '<S1103>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[16];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1115>/S-Function' */

    /* Level2 S-Function Block: '<S1115>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[17];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1103>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_e =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_e +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_b;

    /* Gain: '<S1103>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_oz =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_j4 *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_e;

    /* Sum: '<S1115>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_f =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_d +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_f;

    /* Gain: '<S1115>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_c =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_oj *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_f;

    /* S-Function (fts5stub): '<S1104>/S-Function' */

    /* Level2 S-Function Block: '<S1104>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[18];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1116>/S-Function' */

    /* Level2 S-Function Block: '<S1116>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[19];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1104>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ci =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_gb +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_g1;

    /* Gain: '<S1104>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ci;

    /* Sum: '<S1116>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_g =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_dp +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_c;

    /* Gain: '<S1116>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a3 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_g;

    /* S-Function (fts5stub): '<S1131>/S-Function' */

    /* Level2 S-Function Block: '<S1131>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[20];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1143>/S-Function' */

    /* Level2 S-Function Block: '<S1143>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[21];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1131>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ga =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_mq +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cs;

    /* Gain: '<S1131>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_p1 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_fe *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ga;

    /* S-Function (fts5stub): '<S1129>/S-Function' */

    /* Level2 S-Function Block: '<S1129>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[22];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1141>/S-Function' */

    /* Level2 S-Function Block: '<S1141>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[23];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1129>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cq =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_an +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cn;

    /* Gain: '<S1129>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_pe =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cq;

    /* S-Function (fts5stub): '<S1130>/S-Function' */

    /* Level2 S-Function Block: '<S1130>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[24];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1142>/S-Function' */

    /* Level2 S-Function Block: '<S1142>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[25];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1130>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cz =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_lv +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_fg;

    /* Gain: '<S1130>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_cf =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_m2 *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cz;

    /* Outputs for Enabled SubSystem: '<S725>/Signal generator' */
    /* Constant: '<S725>/valp_nom3' */
    acdcmg_sim8_1_s_Signalgenerator(acdcmg_sim8_1_sm_grid_simulation_M,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Vari - 1.0,
      &acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator,
      &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator,
      &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Vari);

    /* End of Outputs for SubSystem: '<S725>/Signal generator' */

    /* Sum: '<S725>/Sum3' incorporates:
     *  Constant: '<S725>/valp_nom2'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.Switch2_i +
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom2_Value;

    /* Switch: '<S725>/Switch1' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.LogicalOperator1) {
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.LookUpTable;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.SSref =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    }

    /* End of Switch: '<S725>/Switch1' */

    /* Switch: '<S725>/Switch5' incorporates:
     *  Constant: '<S725>/SinglePhase'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.SinglePhase_Value >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch5_Threshold) {
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
    }

    /* End of Switch: '<S725>/Switch5' */

    /* DigitalClock: '<S725>/t' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Gain: '<S725>/Gain' incorporates:
     *  Constant: '<S725>/valp_nom1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_pf *
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom1_Value;

    /* Product: '<S725>/Product' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;

    /* Sum: '<S725>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.wt =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.DiscreteTimeIntegrator;

    /* Gain: '<S725>/Gain3' incorporates:
     *  Constant: '<S725>/valp_nom'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom_Value;

    /* Sum: '<S725>/Sum2' incorporates:
     *  Constant: '<S725>/P1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value[0]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.Switch3_d;
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value[1]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.Switch3_d;
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value[2]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator.Switch3_d;

    /* Sum: '<S725>/Sum1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2];

    /* Trigonometry: '<S725>/Trigonometric Function' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0]);
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1]);
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2]);

    /* Product: '<S725>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2];

    /* Outputs for Enabled SubSystem: '<S725>/Harmonic Generator' */
    /* Constant: '<S725>/valp_nom7' */
    acdcmg_sim8_1_HarmonicGenerator(acdcmg_sim8_1_sm_grid_simulation_M,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Harm,
      acdcmg_sim8_1_sm_grid_simulation_B.wt,
      &acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator,
      &acdcmg_sim8_1_sm_grid_simulation_DW.HarmonicGenerator,
      &acdcmg_sim8_1_sm_grid_simulation_P.HarmonicGenerator);

    /* End of Outputs for SubSystem: '<S725>/Harmonic Generator' */

    /* Sum: '<S725>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5[0] =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1[0]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1_d[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5[1] =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1[1]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1_d[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5[2] =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1[2]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator.Product1_d[2];

    /* S-Function (RECV_Param): '<S963>/S-Function' */

    /* Level2 S-Function Block: '<S963>/S-Function' (RECV_Param) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[26];
      sfcnOutputs(rts,1);
    }

    /* DigitalClock: '<S177>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S177>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData);

    /* Switch: '<S13>/Switch3' incorporates:
     *  Constant: '<S13>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[1];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
    }

    /* End of Switch: '<S13>/Switch3' */

    /* Switch: '<S13>/Switch' incorporates:
     *  Constant: '<S13>/Constant1'
     *  Constant: '<S13>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerG1_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value;
    }

    /* End of Switch: '<S13>/Switch' */
  }

  /* Clock: '<S166>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S166>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_a, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_n);

  /* Switch: '<S165>/Switch3' incorporates:
   *  Constant: '<S165>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_h >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_g) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3 =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3 =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable;
  }

  /* End of Switch: '<S165>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S13>/Switch1' incorporates:
     *  Constant: '<S13>/Constant2'
     *  Constant: '<S13>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerG1_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_c) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1 =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1 =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value;
    }

    /* End of Switch: '<S13>/Switch1' */
  }

  /* Clock: '<S170>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S170>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_m, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_j);

  /* Switch: '<S169>/Switch3' incorporates:
   *  Constant: '<S169>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_k >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_l) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_e =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i;
  }

  /* End of Switch: '<S169>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S13>/Switch2' incorporates:
     *  Constant: '<S13>/Constant3'
     *  Constant: '<S13>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerG1_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_g =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_g =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value;
    }

    /* End of Switch: '<S13>/Switch2' */
  }

  /* Clock: '<S174>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S174>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_an, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_m);

  /* Switch: '<S173>/Switch3' incorporates:
   *  Constant: '<S173>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_d >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_n) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_g;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n;
  }

  /* End of Switch: '<S173>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DigitalClock: '<S245>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S245>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_d, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_d);

    /* Switch: '<S17>/Switch3' incorporates:
     *  Constant: '<S17>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_c >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_p) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[5];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
    }

    /* End of Switch: '<S17>/Switch3' */

    /* Switch: '<S17>/Switch' incorporates:
     *  Constant: '<S17>/Constant1'
     *  Constant: '<S17>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC1_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_b) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_m =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_m =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_m;
    }

    /* End of Switch: '<S17>/Switch' */
  }

  /* Clock: '<S234>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S234>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i1 = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_j, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_c);

  /* Switch: '<S233>/Switch3' incorporates:
   *  Constant: '<S233>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_dl >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_e) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_m;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i1;
  }

  /* End of Switch: '<S233>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S17>/Switch1' incorporates:
     *  Constant: '<S17>/Constant2'
     *  Constant: '<S17>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC1_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_m) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_g =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_g =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_m;
    }

    /* End of Switch: '<S17>/Switch1' */
  }

  /* Clock: '<S238>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S238>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_b = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_f, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_k);

  /* Switch: '<S237>/Switch3' incorporates:
   *  Constant: '<S237>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_g >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_d) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_n =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_g;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_n =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_b;
  }

  /* End of Switch: '<S237>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S17>/Switch2' incorporates:
     *  Constant: '<S17>/Constant3'
     *  Constant: '<S17>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC1_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_gl =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_gl =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_m;
    }

    /* End of Switch: '<S17>/Switch2' */
  }

  /* Clock: '<S242>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S242>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_l = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ms, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_h);

  /* Switch: '<S241>/Switch3' incorporates:
   *  Constant: '<S241>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_b >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_c) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_a =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_gl;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_a =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_l;
  }

  /* End of Switch: '<S241>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DigitalClock: '<S262>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S262>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_b, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_p);

    /* Switch: '<S18>/Switch3' incorporates:
     *  Constant: '<S18>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_n >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_f) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[4];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SSref;
    }

    /* End of Switch: '<S18>/Switch3' */

    /* Switch: '<S18>/Switch' incorporates:
     *  Constant: '<S18>/Constant1'
     *  Constant: '<S18>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC2_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_n) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_g =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_g =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_f;
    }

    /* End of Switch: '<S18>/Switch' */
  }

  /* Clock: '<S251>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S251>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_p = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_e, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_g);

  /* Switch: '<S250>/Switch3' incorporates:
   *  Constant: '<S250>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_dg >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_b) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_c =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_g;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_c =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_p;
  }

  /* End of Switch: '<S250>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S18>/Switch1' incorporates:
     *  Constant: '<S18>/Constant2'
     *  Constant: '<S18>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC2_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_j) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_gq =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_gq =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_f;
    }

    /* End of Switch: '<S18>/Switch1' */
  }

  /* Clock: '<S255>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S255>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_d = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_fl, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_hs);

  /* Switch: '<S254>/Switch3' incorporates:
   *  Constant: '<S254>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_l >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_bv) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nm =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_gq;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nm =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_d;
  }

  /* End of Switch: '<S254>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S18>/Switch2' incorporates:
     *  Constant: '<S18>/Constant3'
     *  Constant: '<S18>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerbusDC2_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold_e) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_o =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_o =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_f;
    }

    /* End of Switch: '<S18>/Switch2' */
  }

  /* Clock: '<S259>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S259>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_c = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_i, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_pi);

  /* Switch: '<S258>/Switch3' incorporates:
   *  Constant: '<S258>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_bd >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_ch) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_f =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_o;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_f =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_c;
  }

  /* End of Switch: '<S258>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (ssn_sfun_v1): '<S1227>/State-Space' */

    /* Level2 S-Function Block: '<S1227>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[27];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S755>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[78];

    /* Gain: '<S756>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_g *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[79];

    /* Gain: '<S757>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[80];

    /* Product: '<S758>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S758>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_1d = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_1d = MAX_int32_T;
    } else {
      qY_1d = 0 + tmp;
    }

    if ((qY_1d < 0) && (1 < MIN_int32_T - qY_1d)) {
      qY_1c = MIN_int32_T;
    } else if ((qY_1d > 0) && (1 > MAX_int32_T - qY_1d)) {
      qY_1c = MAX_int32_T;
    } else {
      qY_1c = qY_1d + 1;
    }

    if ((qY_1d < 0) && (2 < MIN_int32_T - qY_1d)) {
      qY_1b = MIN_int32_T;
    } else if ((qY_1d > 0) && (2 > MAX_int32_T - qY_1d)) {
      qY_1b = MAX_int32_T;
    } else {
      qY_1b = qY_1d + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4 =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_1d]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_1c])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_1b];

    /* End of Sum: '<S758>/Sum4' */
  }

  /* VariableTransportDelay: '<S69>/Variable Time Delay' incorporates:
   *  Constant: '<S69>/Constant'
   */
  {
    real_T **uBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs
      [0];
    real_T **tBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs
      [1];
    real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    real_T appliedDelay;
    appliedDelay = acdcmg_sim8_1_sm_grid_simulation_P.Ts;

    /* For variable time delay, output here */
    if (appliedDelay > (2.0 * acdcmg_sim8_1_sm_grid_simulation_P.Ts)) {
      appliedDelay = (2.0 * acdcmg_sim8_1_sm_grid_simulation_P.Ts);
    }

    if (appliedDelay < 0.0) {
      /* negative delay is not supported
       *  set delay to 0
       */
      appliedDelay = 0.0;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g = rt_TDelayInterpolate(
      simTime - appliedDelay,
      0.0,
      *tBuffer,
      *uBuffer,
      acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.CircularBufSize,
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Last,
      acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail,
      acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head,
      acdcmg_sim8_1_sm_grid_simulation_P.Ts,
      1,
      0);
  }

  /* Saturate: '<S69>/Saturation' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g >
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_k) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_k;
  } else if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g <
             acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_gx) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_gx;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  }

  /* End of Saturate: '<S69>/Saturation' */

  /* Product: '<S69>/Divide' */
  acdcmg_sim8_1_sm_grid_simulation_B.Divide_d =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum4 /
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Sum: '<S983>/Add2' incorporates:
     *  Constant: '<S983>/0_K'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation +
      acdcmg_sim8_1_sm_grid_simulation_P.u_K_Value;

    /* Sum: '<S983>/Add3' incorporates:
     *  Constant: '<S983>/Tref_K'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk -
      acdcmg_sim8_1_sm_grid_simulation_P.Tref_K_Value;

    /* Gain: '<S983>/alpha_Isc' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.alpha_Isc_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;

    /* Sum: '<S983>/Add' incorporates:
     *  Constant: '<S983>/IL_module'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h +
      acdcmg_sim8_1_sm_grid_simulation_P.IL_module_Value;

    /* Gain: '<S983>/Npar' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Npar *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;

    /* RateLimiter: '<S72>/Rate Limiter' incorporates:
     *  Constant: '<S72>/Ir1'
     */
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_P.Ir1_Value -
      acdcmg_sim8_1_sm_grid_simulation_DW.PrevY;
    if (tmp_0 > acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_RisingLim) {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter =
        acdcmg_sim8_1_sm_grid_simulation_DW.PrevY +
        acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_RisingLim;
    } else if (tmp_0 < acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_FallingLim)
    {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter =
        acdcmg_sim8_1_sm_grid_simulation_DW.PrevY +
        acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_FallingLim;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter =
        acdcmg_sim8_1_sm_grid_simulation_P.Ir1_Value;
    }

    acdcmg_sim8_1_sm_grid_simulation_DW.PrevY =
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter;

    /* End of RateLimiter: '<S72>/Rate Limiter' */

    /* Gain: '<S983>/1//Sref' */
    acdcmg_sim8_1_sm_grid_simulation_B.SSref =
      acdcmg_sim8_1_sm_grid_simulation_P.uSref_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter;

    /* Product: '<S983>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.IL =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;

    /* UnitDelay: '<S987>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_m =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_h;

    /* Constant: '<S977>/eee' */
    acdcmg_sim8_1_sm_grid_simulation_B.eee =
      acdcmg_sim8_1_sm_grid_simulation_P.eee_Value;
  }

  /* Clock: '<S119>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S119>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_pt = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ex, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_o);

  /* Switch: '<S118>/Switch3' incorporates:
   *  Constant: '<S118>/C4'
   *  Constant: '<S11>/Constant'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_m >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_j) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_ga =
      acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_cr;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_ga =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_pt;
  }

  /* End of Switch: '<S118>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S11>/NOT' incorporates:
     *  Constant: '<S11>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      !(acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_cr != 0.0);

    /* DataTypeConversion: '<S124>/Data Type Conversion' */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion = (real_T)
      acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n;
  }

  /* Clock: '<S123>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S123>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_ls = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_jc, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_f);

  /* Switch: '<S122>/Switch3' incorporates:
   *  Constant: '<S122>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_i >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_k) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_er =
      acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_er =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_ls;
  }

  /* End of Switch: '<S122>/Switch3' */

  /* Clock: '<S264>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S264>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dn = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_o, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_l);

  /* Switch: '<S263>/Switch3' incorporates:
   *  Constant: '<S263>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_d2 >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_ds) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_cy =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction[5];
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_cy =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dn;
  }

  /* End of Switch: '<S263>/Switch3' */

  /* Clock: '<S268>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S268>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_j = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_h, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_gk);

  /* Switch: '<S267>/Switch3' incorporates:
   *  Constant: '<S267>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_im >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_fr) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_m =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction[5];
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_m =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_j;
  }

  /* End of Switch: '<S267>/Switch3' */

  /* Clock: '<S272>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S272>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n5 = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ie, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_n4);

  /* Switch: '<S271>/Switch3' incorporates:
   *  Constant: '<S271>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_m4 >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_m) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_i =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction[6];
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_i =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n5;
  }

  /* End of Switch: '<S271>/Switch3' */

  /* Clock: '<S276>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S276>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_h = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_l, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_no);

  /* Switch: '<S275>/Switch3' incorporates:
   *  Constant: '<S275>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_e >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_dk) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_j =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction[6];
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_j =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_h;
  }

  /* End of Switch: '<S275>/Switch3' */

  /* Clock: '<S280>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S280>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_lz = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_n, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_hm);

  /* Switch: '<S279>/Switch3' incorporates:
   *  Constant: '<S279>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_a >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_fd) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g2 = 0.0;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g2 =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_lz;
  }

  /* End of Switch: '<S279>/Switch3' */

  /* Clock: '<S284>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S284>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_m = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_hn, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_i);

  /* Switch: '<S283>/Switch3' incorporates:
   *  Constant: '<S283>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_p >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_gs) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l3 = 0.0;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l3 =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_m;
  }

  /* End of Switch: '<S283>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (ssn_sfun_v1): '<S1220>/State-Space' */

    /* Level2 S-Function Block: '<S1220>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[28];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S144>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_k4 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[13];

    /* Gain: '<S138>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_h *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[24];

    /* S-Function (OP_SEND): '<S1197>/S-Function' */

    /* Level2 S-Function Block: '<S1197>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[29];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S986>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_b *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[17];

    /* Gain: '<S984>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bt *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[28];

    /* Sum: '<S980>/Add4' incorporates:
     *  Constant: '<S980>/Tref_K1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk -
      acdcmg_sim8_1_sm_grid_simulation_P.Tref_K1_Value;

    /* Gain: '<S980>/dEgdT' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.dEgdT_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S980>/Add3' incorporates:
     *  Constant: '<S980>/one1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.one1_Value +
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S980>/EgRef' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.EgRef_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Gain: '<S989>/k1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.k1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S989>/Product' */
    acdcmg_sim8_1_sm_grid_simulation_B.Vd =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e /
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S989>/Add' incorporates:
     *  Constant: '<S989>/EgRef'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.EgRef_Value -
      acdcmg_sim8_1_sm_grid_simulation_B.Vd;

    /* Math: '<S989>/Math Function'
     *
     * About '<S989>/Math Function':
     *  Operator: exp
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e = exp
      (acdcmg_sim8_1_sm_grid_simulation_B.Sum_h);

    /* Product: '<S980>/Product3' incorporates:
     *  Constant: '<S980>/Tref_K2'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk /
      acdcmg_sim8_1_sm_grid_simulation_P.Tref_K2_Value;

    /* Fcn: '<S980>/Fcn' */
    if ((acdcmg_sim8_1_sm_grid_simulation_B.Sum_h < 0.0) && (3.0 > floor(3.0)))
    {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk = -rt_powd_snf
        (-acdcmg_sim8_1_sm_grid_simulation_B.Sum_h, 3.0);
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk = rt_powd_snf
        (acdcmg_sim8_1_sm_grid_simulation_B.Sum_h, 3.0);
    }

    /* End of Fcn: '<S980>/Fcn' */

    /* Gain: '<S980>/I0_array' */
    acdcmg_sim8_1_sm_grid_simulation_B.Vd = 2.9259E-10 *
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Npar *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S980>/Product4' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Vd;

    /* Gain: '<S980>/VT_ref_array' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e = 1.5124515334838344 *
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Nser *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Product: '<S975>/Product2' incorporates:
     *  Constant: '<S975>/Rs_array_'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h * (0.39383 *
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Nser /
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Npar);

    /* Sum: '<S975>/Add1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Vd =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j +
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Product: '<S980>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = 1.0 /
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Vd;

    /* Math: '<S980>/Math Function'
     *
     * About '<S980>/Math Function':
     *  Operator: exp
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e = exp
      (acdcmg_sim8_1_sm_grid_simulation_B.Sum_h);

    /* Sum: '<S980>/Add' incorporates:
     *  Constant: '<S980>/one'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e -
      acdcmg_sim8_1_sm_grid_simulation_P.one_Value;

    /* Product: '<S980>/Product' */
    acdcmg_sim8_1_sm_grid_simulation_B.Idiode =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* S-Function (OP_SEND): '<S1198>/S-Function' */

    /* Level2 S-Function Block: '<S1198>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[30];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S109>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_h1 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[21];

    /* S-Function (OP_SEND): '<S1199>/S-Function' */

    /* Level2 S-Function Block: '<S1199>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[31];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S353>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bs *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[12];

    /* Gain: '<S354>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[13];

    /* Gain: '<S355>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_c2 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[14];

    /* Gain: '<S29>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S350>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[54];

    /* Gain: '<S351>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_a *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[55];

    /* Gain: '<S352>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_p *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[56];

    /* Gain: '<S29>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S641>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[2];

    /* Sum: '<S641>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_1a = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_1a = MAX_int32_T;
    } else {
      qY_1a = 0 + tmp;
    }

    if ((qY_1a < 0) && (1 < MIN_int32_T - qY_1a)) {
      qY_19 = MIN_int32_T;
    } else if ((qY_1a > 0) && (1 > MAX_int32_T - qY_1a)) {
      qY_19 = MAX_int32_T;
    } else {
      qY_19 = qY_1a + 1;
    }

    if ((qY_1a < 0) && (2 < MIN_int32_T - qY_1a)) {
      qY_18 = MIN_int32_T;
    } else if ((qY_1a > 0) && (2 > MAX_int32_T - qY_1a)) {
      qY_18 = MAX_int32_T;
    } else {
      qY_18 = qY_1a + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_k =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_1a]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_19])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_18];

    /* End of Sum: '<S641>/Sum4' */

    /* Sum: '<S641>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[2];

    /* Sum: '<S641>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[0];

    /* Sum: '<S641>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[1];

    /* Product: '<S641>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv[2];

    /* Sum: '<S641>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_17 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_17 = MAX_int32_T;
    } else {
      qY_17 = 0 + tmp;
    }

    if ((qY_17 < 0) && (1 < MIN_int32_T - qY_17)) {
      qY_16 = MIN_int32_T;
    } else if ((qY_17 > 0) && (1 > MAX_int32_T - qY_17)) {
      qY_16 = MAX_int32_T;
    } else {
      qY_16 = qY_17 + 1;
    }

    if ((qY_17 < 0) && (2 < MIN_int32_T - qY_17)) {
      qY_15 = MIN_int32_T;
    } else if ((qY_17 > 0) && (2 > MAX_int32_T - qY_17)) {
      qY_15 = MAX_int32_T;
    } else {
      qY_15 = qY_17 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_17]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_16])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_15];

    /* End of Sum: '<S641>/Sum1' */

    /* Gain: '<S641>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S642>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[2];

    /* S-Function (OP_SEND): '<S1200>/S-Function' */

    /* Level2 S-Function Block: '<S1200>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[32];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S115>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_o =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ft *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[10];

    /* Gain: '<S116>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_pg *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[11];

    /* Gain: '<S111>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h1 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_j *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[23];

    /* S-Function (OP_SEND): '<S1201>/S-Function' */

    /* Level2 S-Function Block: '<S1201>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[33];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S140>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g5 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[26];

    /* Gain: '<S139>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pv =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_jp *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[25];

    /* S-Function (OP_SEND): '<S1202>/S-Function' */

    /* Level2 S-Function Block: '<S1202>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[34];
      sfcnOutputs(rts,1);
    }

    /* Constant: '<S1232>/SwitchCurrents' */
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_m[0];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_m[1];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_m[2];

    /* Sum: '<S1143>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_n =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_kk +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_mu;

    /* Gain: '<S1143>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_j =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_ia *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_n;

    /* Sum: '<S1141>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ix =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_da +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_n;

    /* Gain: '<S1141>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_j4q *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ix;

    /* Sum: '<S1142>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_nr +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cd;

    /* Gain: '<S1142>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_io =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o;

    /* DigitalClock: '<S211>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S211>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_hx, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_hi);

    /* Switch: '<S15>/Switch3' incorporates:
     *  Constant: '<S15>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_kt >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_gr) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[3];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    }

    /* End of Switch: '<S15>/Switch3' */

    /* Switch: '<S15>/Switch' incorporates:
     *  Constant: '<S15>/Constant1'
     *  Constant: '<S15>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad3_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_j) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_a;
    }

    /* End of Switch: '<S15>/Switch' */
  }

  /* Clock: '<S200>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S200>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_he = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ei, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_lc);

  /* Switch: '<S199>/Switch3' incorporates:
   *  Constant: '<S199>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_f >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_h) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_b =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_b =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_he;
  }

  /* End of Switch: '<S199>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S15>/Switch1' incorporates:
     *  Constant: '<S15>/Constant2'
     *  Constant: '<S15>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad3_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_f) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_l =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_l =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_a;
    }

    /* End of Switch: '<S15>/Switch1' */
  }

  /* Clock: '<S204>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S204>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_heh = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ez, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_ml);

  /* Switch: '<S203>/Switch3' incorporates:
   *  Constant: '<S203>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_mo >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_kx) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_bt =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_l;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_bt =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_heh;
  }

  /* End of Switch: '<S203>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S15>/Switch2' incorporates:
     *  Constant: '<S15>/Constant3'
     *  Constant: '<S15>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad3_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold_a) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_m =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_m =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_a;
    }

    /* End of Switch: '<S15>/Switch2' */
  }

  /* Clock: '<S208>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S208>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_nz = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_oa, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_kj);

  /* Switch: '<S207>/Switch3' incorporates:
   *  Constant: '<S207>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_j >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_o) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_m;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_h =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_nz;
  }

  /* End of Switch: '<S207>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (ssn_sfun_v1): '<S1219>/State-Space' */

    /* Level2 S-Function Block: '<S1219>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[35];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S58>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_i *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[12];

    /* DataTypeConversion: '<S600>/Data Type Conversion' incorporates:
     *  Constant: '<S600>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S600>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_kx);

  /* End of Outputs for SubSystem: '<S600>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S600>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o;
  }

  /* Outputs for Enabled SubSystem: '<S600>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_b4);

  /* End of Outputs for SubSystem: '<S600>/RMS ' */

  /* Switch: '<S600>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_kx.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_b4.Gain;
  }

  /* End of Switch: '<S600>/Switch' */

  /* Math: '<S40>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S40>/Product' incorporates:
   *  Constant: '<S40>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S40>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S65>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ka =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[13];

    /* DataTypeConversion: '<S599>/Data Type Conversion' incorporates:
     *  Constant: '<S599>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_e =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S599>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_e,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ka,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_k);

  /* End of Outputs for SubSystem: '<S599>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S599>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_h =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_e;
  }

  /* Outputs for Enabled SubSystem: '<S599>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_h,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ka,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_bh);

  /* End of Outputs for SubSystem: '<S599>/RMS ' */

  /* Switch: '<S599>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_e) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_k.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_bh.Gain;
  }

  /* End of Switch: '<S599>/Switch' */

  /* Math: '<S40>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S40>/Product1' incorporates:
   *  Constant: '<S40>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S40>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S68>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k0 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_gj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[14];

    /* DataTypeConversion: '<S601>/Data Type Conversion' incorporates:
     *  Constant: '<S601>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S601>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k0,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_c0);

  /* End of Outputs for SubSystem: '<S601>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S601>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_j =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j;
  }

  /* Outputs for Enabled SubSystem: '<S601>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_j,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k0,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_a);

  /* End of Outputs for SubSystem: '<S601>/RMS ' */

  /* Switch: '<S601>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c0.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_a.Gain;
  }

  /* End of Switch: '<S601>/Switch' */

  /* Math: '<S40>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S40>/Product2' incorporates:
   *  Constant: '<S40>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S40>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1203>/S-Function' */

    /* Level2 S-Function Block: '<S1203>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[36];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S383>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_he *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[18];

    /* Gain: '<S384>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_au *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[19];

    /* Gain: '<S385>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_nc *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[20];

    /* Gain: '<S31>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S380>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_hp *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[60];

    /* Gain: '<S381>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_fp *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[61];

    /* Gain: '<S382>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[62];

    /* Gain: '<S31>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S665>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[2];

    /* Sum: '<S665>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_14 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_14 = MAX_int32_T;
    } else {
      qY_14 = 0 + tmp;
    }

    if ((qY_14 < 0) && (1 < MIN_int32_T - qY_14)) {
      qY_13 = MIN_int32_T;
    } else if ((qY_14 > 0) && (1 > MAX_int32_T - qY_14)) {
      qY_13 = MAX_int32_T;
    } else {
      qY_13 = qY_14 + 1;
    }

    if ((qY_14 < 0) && (2 < MIN_int32_T - qY_14)) {
      qY_12 = MIN_int32_T;
    } else if ((qY_14 > 0) && (2 > MAX_int32_T - qY_14)) {
      qY_12 = MAX_int32_T;
    } else {
      qY_12 = qY_14 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_c =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_14]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_13])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_12];

    /* End of Sum: '<S665>/Sum4' */

    /* Sum: '<S665>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[2];

    /* Sum: '<S665>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[0];

    /* Sum: '<S665>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[1];

    /* Product: '<S665>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[2];

    /* Sum: '<S665>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_11 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_11 = MAX_int32_T;
    } else {
      qY_11 = 0 + tmp;
    }

    if ((qY_11 < 0) && (1 < MIN_int32_T - qY_11)) {
      qY_10 = MIN_int32_T;
    } else if ((qY_11 > 0) && (1 > MAX_int32_T - qY_11)) {
      qY_10 = MAX_int32_T;
    } else {
      qY_10 = qY_11 + 1;
    }

    if ((qY_11 < 0) && (2 < MIN_int32_T - qY_11)) {
      qY_z = MIN_int32_T;
    } else if ((qY_11 > 0) && (2 > MAX_int32_T - qY_11)) {
      qY_z = MAX_int32_T;
    } else {
      qY_z = qY_11 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_11]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_10])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_z];

    /* End of Sum: '<S665>/Sum1' */

    /* Gain: '<S665>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_k =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_p *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S666>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[2];

    /* S-Function (OP_SEND): '<S1204>/S-Function' */

    /* Level2 S-Function Block: '<S1204>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[37];
      sfcnOutputs(rts,1);
    }

    /* Constant: '<S1250>/SwitchCurrents' */
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_p[0];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_p[1];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_p[2];

    /* Sum: '<S1079>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o2 =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_n +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_i;

    /* Gain: '<S1079>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_k =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_mz *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o2;

    /* Sum: '<S1077>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_l =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_l +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_id;

    /* Gain: '<S1077>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_n =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_jq *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_l;

    /* Sum: '<S1078>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mm =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_m +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_hw;

    /* Gain: '<S1078>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_jj =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_fh *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mm;

    /* DigitalClock: '<S194>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S194>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_dd, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_ip);

    /* Switch: '<S14>/Switch3' incorporates:
     *  Constant: '<S14>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_f0 >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_pi) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[2];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    }

    /* End of Switch: '<S14>/Switch3' */

    /* Switch: '<S14>/Switch' incorporates:
     *  Constant: '<S14>/Constant1'
     *  Constant: '<S14>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad1_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_d) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_d =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_d =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_ah;
    }

    /* End of Switch: '<S14>/Switch' */
  }

  /* Clock: '<S183>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S183>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_mg = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_bt, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_me);

  /* Switch: '<S182>/Switch3' incorporates:
   *  Constant: '<S182>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_lp >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_k5) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_no =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_d;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_no =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_mg;
  }

  /* End of Switch: '<S182>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S14>/Switch1' incorporates:
     *  Constant: '<S14>/Constant2'
     *  Constant: '<S14>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad1_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_a) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_e =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_e =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_ah;
    }

    /* End of Switch: '<S14>/Switch1' */
  }

  /* Clock: '<S187>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S187>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_e = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_bw, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_e);

  /* Switch: '<S186>/Switch3' incorporates:
   *  Constant: '<S186>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_nn >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_i) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nl =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_e;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nl =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_e;
  }

  /* End of Switch: '<S186>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S14>/Switch2' incorporates:
     *  Constant: '<S14>/Constant3'
     *  Constant: '<S14>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerLoad1_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold_au) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_b =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_b =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_ah;
    }

    /* End of Switch: '<S14>/Switch2' */
  }

  /* Clock: '<S191>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S191>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_g = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_ou, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_a);

  /* Switch: '<S190>/Switch3' incorporates:
   *  Constant: '<S190>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_jo >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_ek) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_af =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_b;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_af =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_g;
  }

  /* End of Switch: '<S190>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (ssn_sfun_v1): '<S1226>/State-Space' */

    /* Level2 S-Function Block: '<S1226>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[38];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S54>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_e *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[9];

    /* DataTypeConversion: '<S450>/Data Type Conversion' incorporates:
     *  Constant: '<S450>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_c =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_e != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S450>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_c,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_i);

  /* End of Outputs for SubSystem: '<S450>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S450>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_l =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_c;
  }

  /* Outputs for Enabled SubSystem: '<S450>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_l,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_c);

  /* End of Outputs for SubSystem: '<S450>/RMS ' */

  /* Switch: '<S450>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_c) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_i.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_c.Gain;
  }

  /* End of Switch: '<S450>/Switch' */

  /* Math: '<S35>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S35>/Product' incorporates:
   *  Constant: '<S35>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S35>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_d =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_j *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S61>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_i =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_go *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[10];

    /* DataTypeConversion: '<S449>/Data Type Conversion' incorporates:
     *  Constant: '<S449>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_jl =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_h != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S449>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_jl,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_i,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_d);

  /* End of Outputs for SubSystem: '<S449>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S449>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_i =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_jl;
  }

  /* Outputs for Enabled SubSystem: '<S449>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_i,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_i,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_m);

  /* End of Outputs for SubSystem: '<S449>/RMS ' */

  /* Switch: '<S449>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_jl) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_d.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_m.Gain;
  }

  /* End of Switch: '<S449>/Switch' */

  /* Math: '<S35>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S35>/Product1' incorporates:
   *  Constant: '<S35>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S35>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_a =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_e *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S66>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_d =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_jy *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[11];

    /* DataTypeConversion: '<S451>/Data Type Conversion' incorporates:
     *  Constant: '<S451>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_h =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_c != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S451>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_h,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_d,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_e);

  /* End of Outputs for SubSystem: '<S451>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S451>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_n =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_h;
  }

  /* Outputs for Enabled SubSystem: '<S451>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_n,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_d,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cw);

  /* End of Outputs for SubSystem: '<S451>/RMS ' */

  /* Switch: '<S451>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_h) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_e.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_cw.Gain;
  }

  /* End of Switch: '<S451>/Switch' */

  /* Math: '<S35>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S35>/Product2' incorporates:
   *  Constant: '<S35>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S35>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_k =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_p *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1205>/S-Function' */

    /* Level2 S-Function Block: '<S1205>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[39];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S57>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_gl =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_l *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[69];

    /* DataTypeConversion: '<S510>/Data Type Conversion' incorporates:
     *  Constant: '<S510>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_l =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_n != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S510>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_l,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_gl,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ae);

  /* End of Outputs for SubSystem: '<S510>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S510>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_k =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_l;
  }

  /* Outputs for Enabled SubSystem: '<S510>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_k,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_gl,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_j);

  /* End of Outputs for SubSystem: '<S510>/RMS ' */

  /* Switch: '<S510>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_l) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ae.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_j.Gain;
  }

  /* End of Switch: '<S510>/Switch' */

  /* Math: '<S37>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S37>/Product' incorporates:
   *  Constant: '<S37>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S37>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_e =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_a *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S64>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_n =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_nn *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[73];

    /* DataTypeConversion: '<S509>/Data Type Conversion' incorporates:
     *  Constant: '<S509>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o2 =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_k != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S509>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o2,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_n,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_m);

  /* End of Outputs for SubSystem: '<S509>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S509>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_a =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o2;
  }

  /* Outputs for Enabled SubSystem: '<S509>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_a,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_n,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_l);

  /* End of Outputs for SubSystem: '<S509>/RMS ' */

  /* Switch: '<S509>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_o2) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_m.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_l.Gain;
  }

  /* End of Switch: '<S509>/Switch' */

  /* Math: '<S37>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S37>/Product1' incorporates:
   *  Constant: '<S37>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S37>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_p =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_o *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S67>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bb =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cs *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[74];

    /* DataTypeConversion: '<S511>/Data Type Conversion' incorporates:
     *  Constant: '<S511>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_m =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_g != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S511>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_m,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bb,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_b);

  /* End of Outputs for SubSystem: '<S511>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S511>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_g =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_m;
  }

  /* Outputs for Enabled SubSystem: '<S511>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_g,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bb,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_o);

  /* End of Outputs for SubSystem: '<S511>/RMS ' */

  /* Switch: '<S511>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_m) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_b.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_o.Gain;
  }

  /* End of Switch: '<S511>/Switch' */

  /* Math: '<S37>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S37>/Product2' incorporates:
   *  Constant: '<S37>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S37>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_a =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_c *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1206>/S-Function' */

    /* Level2 S-Function Block: '<S1206>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[40];
      sfcnOutputs(rts,1);
    }

    /* Constant: '<S1258>/SwitchCurrents' */
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_e[0];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_e[1];
    acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.SwitchCurrents_Value_e[2];

    /* Sum: '<S1039>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_j =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_c +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1;

    /* Gain: '<S1039>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ca =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_j;

    /* Sum: '<S1037>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mms =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_h +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m;

    /* Gain: '<S1037>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ij =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_gw *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mms;

    /* Sum: '<S1038>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_oc =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_a +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_h;

    /* Gain: '<S1038>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a4 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_l *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_oc;

    /* Outputs for Enabled SubSystem: '<S955>/Signal generator' */
    /* Constant: '<S955>/valp_nom3' */
    acdcmg_sim8_1_s_Signalgenerator(acdcmg_sim8_1_sm_grid_simulation_M,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Va_l - 1.0,
      &acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j,
      &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator_j,
      &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator_j,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Va_l);

    /* End of Outputs for SubSystem: '<S955>/Signal generator' */

    /* Sum: '<S955>/Sum3' incorporates:
     *  Constant: '<S955>/valp_nom2'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.Switch2_i +
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom2_Value_j;

    /* Switch: '<S955>/Switch1' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.LogicalOperator1) {
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
        acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.LookUpTable;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    }

    /* End of Switch: '<S955>/Switch1' */

    /* Switch: '<S955>/Switch5' incorporates:
     *  Constant: '<S955>/SinglePhase'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.SinglePhase_Value_m >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch5_Threshold_m) {
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    }

    /* End of Switch: '<S955>/Switch5' */

    /* DigitalClock: '<S955>/t' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Gain: '<S955>/Gain' incorporates:
     *  Constant: '<S955>/valp_nom1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_iv *
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom1_Value_d;

    /* Product: '<S955>/Product' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S955>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.wt_m =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.DiscreteTimeIntegrator;

    /* Gain: '<S955>/Gain3' incorporates:
     *  Constant: '<S955>/valp_nom'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_i *
      acdcmg_sim8_1_sm_grid_simulation_P.valp_nom_Value_l;

    /* Sum: '<S955>/Sum2' incorporates:
     *  Constant: '<S955>/P1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value_l[0]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.Switch3_d;
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value_l[1]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.Switch3_d;
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2] =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
       acdcmg_sim8_1_sm_grid_simulation_P.P1_Value_l[2]) +
      acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j.Switch3_d;

    /* Sum: '<S955>/Sum1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt_m +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt_m +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.wt_m +
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2];

    /* Trigonometry: '<S955>/Trigonometric Function' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0]);
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1]);
    acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2] = sin
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2]);

    /* Product: '<S955>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2];

    /* Outputs for Enabled SubSystem: '<S955>/Harmonic Generator' */
    /* Constant: '<S955>/valp_nom7' */
    acdcmg_sim8_1_HarmonicGenerator(acdcmg_sim8_1_sm_grid_simulation_M,
      acdcmg_sim8_1_sm_grid_simulation_P.ProgrammableVoltageSource1_Ha_n,
      acdcmg_sim8_1_sm_grid_simulation_B.wt_m,
      &acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g,
      &acdcmg_sim8_1_sm_grid_simulation_DW.HarmonicGenerator_g,
      &acdcmg_sim8_1_sm_grid_simulation_P.HarmonicGenerator_g);

    /* End of Outputs for SubSystem: '<S955>/Harmonic Generator' */

    /* Sum: '<S955>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[0] =
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[0] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1[0]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1_d[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[1] =
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[1] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1[1]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1_d[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[2] =
      (acdcmg_sim8_1_sm_grid_simulation_B.Product1_l[2] +
       acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1[2]) +
      acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g.Product1_d[2];

    /* DigitalClock: '<S228>/Digital Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* Lookup: '<S228>/Look-Up Table' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = rt_Lookup
      (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_eo, 4,
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk,
       acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_gv);

    /* Switch: '<S16>/Switch3' incorporates:
     *  Constant: '<S16>/C4'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_ll >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_pk) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction[0];
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    }

    /* End of Switch: '<S16>/Switch3' */

    /* Switch: '<S16>/Switch' incorporates:
     *  Constant: '<S16>/Constant1'
     *  Constant: '<S16>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerMG_SwitchA >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_e) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_b =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_b =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_p;
    }

    /* End of Switch: '<S16>/Switch' */
  }

  /* Clock: '<S217>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S217>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_o = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_bk, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_a2);

  /* Switch: '<S216>/Switch3' incorporates:
   *  Constant: '<S216>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_k0 >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_pu) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_fp =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_b;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_fp =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_o;
  }

  /* End of Switch: '<S216>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S16>/Switch1' incorporates:
     *  Constant: '<S16>/Constant2'
     *  Constant: '<S16>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerMG_SwitchB >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch1_Threshold_fp) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_ef =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_ef =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_p;
    }

    /* End of Switch: '<S16>/Switch1' */
  }

  /* Clock: '<S221>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S221>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_gu = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_oh, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_ih);

  /* Switch: '<S220>/Switch3' incorporates:
   *  Constant: '<S220>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_ay >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_ef) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_k =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch1_ef;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_k =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_gu;
  }

  /* End of Switch: '<S220>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Switch: '<S16>/Switch2' incorporates:
     *  Constant: '<S16>/Constant3'
     *  Constant: '<S16>/Constant5'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_P.BreakerMG_SwitchC >=
        acdcmg_sim8_1_sm_grid_simulation_P.Switch2_Threshold_f) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_n =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_n =
        acdcmg_sim8_1_sm_grid_simulation_P.Constant5_Value_p;
    }

    /* End of Switch: '<S16>/Switch2' */
  }

  /* Clock: '<S225>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* Lookup: '<S225>/Look-Up Table' */
  acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dd = rt_Lookup
    (acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_XData_me, 5,
     acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g,
     acdcmg_sim8_1_sm_grid_simulation_P.LookUpTable_YData_my);

  /* Switch: '<S224>/Switch3' incorporates:
   *  Constant: '<S224>/C4'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_P.C4_Value_dv >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch3_Threshold_dy) {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nf =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch2_n;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nf =
      acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dd;
  }

  /* End of Switch: '<S224>/Switch3' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (ssn_sfun_v1): '<S1228>/State-Space' */

    /* Level2 S-Function Block: '<S1228>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[41];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S53>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_af =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_kk *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[12];

    /* DataTypeConversion: '<S480>/Data Type Conversion' incorporates:
     *  Constant: '<S480>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_n =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_k != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S480>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_n,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_af,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ad);

  /* End of Outputs for SubSystem: '<S480>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S480>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_au =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_n;
  }

  /* Outputs for Enabled SubSystem: '<S480>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_au,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_af,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_b);

  /* End of Outputs for SubSystem: '<S480>/RMS ' */

  /* Switch: '<S480>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_n) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ad.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_b.Gain;
  }

  /* End of Switch: '<S480>/Switch' */

  /* Math: '<S36>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S36>/Product' incorporates:
   *  Constant: '<S36>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S36>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_b =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_jr *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S60>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h0 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_mf *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[13];

    /* DataTypeConversion: '<S479>/Data Type Conversion' incorporates:
     *  Constant: '<S479>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_lh =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_ks != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S479>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_lh,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h0,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_an);

  /* End of Outputs for SubSystem: '<S479>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S479>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_f =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_lh;
  }

  /* Outputs for Enabled SubSystem: '<S479>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_f,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h0,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_p);

  /* End of Outputs for SubSystem: '<S479>/RMS ' */

  /* Switch: '<S479>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_lh) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_an.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_p.Gain;
  }

  /* End of Switch: '<S479>/Switch' */

  /* Math: '<S36>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S36>/Product1' incorporates:
   *  Constant: '<S36>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S36>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_c =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_m *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S6>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_oh =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_o3 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[20];

    /* DataTypeConversion: '<S481>/Data Type Conversion' incorporates:
     *  Constant: '<S481>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_b =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_gn != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S481>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_b,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_oh,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_c);

  /* End of Outputs for SubSystem: '<S481>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S481>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_d =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_b;
  }

  /* Outputs for Enabled SubSystem: '<S481>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_d,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_oh,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_n);

  /* End of Outputs for SubSystem: '<S481>/RMS ' */

  /* Switch: '<S481>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_b) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_n.Gain;
  }

  /* End of Switch: '<S481>/Switch' */

  /* Math: '<S36>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S36>/Product2' incorporates:
   *  Constant: '<S36>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S36>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_m =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1196>/S-Function' */

    /* Level2 S-Function Block: '<S1196>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[42];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S55>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jv =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bk *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[67];

    /* DataTypeConversion: '<S540>/Data Type Conversion' incorporates:
     *  Constant: '<S540>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_oo =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_g != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S540>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_oo,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jv,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dq);

  /* End of Outputs for SubSystem: '<S540>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S540>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_p =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_oo;
  }

  /* Outputs for Enabled SubSystem: '<S540>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_p,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jv,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_mf);

  /* End of Outputs for SubSystem: '<S540>/RMS ' */

  /* Switch: '<S540>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_oo) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dq.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_mf.Gain;
  }

  /* End of Switch: '<S540>/Switch' */

  /* Math: '<S38>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S38>/Product' incorporates:
   *  Constant: '<S38>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S38>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_c =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_jn *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S62>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ph =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_mi *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[71];

    /* DataTypeConversion: '<S539>/Data Type Conversion' incorporates:
     *  Constant: '<S539>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bf =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_o != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S539>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bf,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ph,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dw);

  /* End of Outputs for SubSystem: '<S539>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S539>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_g1 =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bf;
  }

  /* Outputs for Enabled SubSystem: '<S539>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_g1,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ph,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_j2);

  /* End of Outputs for SubSystem: '<S539>/RMS ' */

  /* Switch: '<S539>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bf) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dw.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_j2.Gain;
  }

  /* End of Switch: '<S539>/Switch' */

  /* Math: '<S38>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S38>/Product1' incorporates:
   *  Constant: '<S38>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S38>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_cp =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_h *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S7>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bm =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ai *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[76];

    /* DataTypeConversion: '<S541>/Data Type Conversion' incorporates:
     *  Constant: '<S541>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_et =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_e != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S541>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_et,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bm,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_g);

  /* End of Outputs for SubSystem: '<S541>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S541>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_nf =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_et;
  }

  /* Outputs for Enabled SubSystem: '<S541>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_nf,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bm,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_h);

  /* End of Outputs for SubSystem: '<S541>/RMS ' */

  /* Switch: '<S541>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_et) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_g.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_h.Gain;
  }

  /* End of Switch: '<S541>/Switch' */

  /* Math: '<S38>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S38>/Product2' incorporates:
   *  Constant: '<S38>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S38>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_ml =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_pm *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1208>/S-Function' */

    /* Level2 S-Function Block: '<S1208>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[43];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S338>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[9];

    /* Gain: '<S339>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_nr *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[10];

    /* Gain: '<S340>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_k41 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[11];

    /* Gain: '<S28>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S335>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_mc *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[51];

    /* Gain: '<S336>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_es *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[52];

    /* Gain: '<S337>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_jk *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[53];

    /* Gain: '<S28>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S701>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[2];

    /* Sum: '<S701>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_y = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_y = MAX_int32_T;
    } else {
      qY_y = 0 + tmp;
    }

    if ((qY_y < 0) && (1 < MIN_int32_T - qY_y)) {
      qY_x = MIN_int32_T;
    } else if ((qY_y > 0) && (1 > MAX_int32_T - qY_y)) {
      qY_x = MAX_int32_T;
    } else {
      qY_x = qY_y + 1;
    }

    if ((qY_y < 0) && (2 < MIN_int32_T - qY_y)) {
      qY_w = MIN_int32_T;
    } else if ((qY_y > 0) && (2 > MAX_int32_T - qY_y)) {
      qY_w = MAX_int32_T;
    } else {
      qY_w = qY_y + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_f =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_y]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_x])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_w];

    /* End of Sum: '<S701>/Sum4' */

    /* Sum: '<S701>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[2];

    /* Sum: '<S701>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[0];

    /* Sum: '<S701>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[1];

    /* Product: '<S701>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[2];

    /* Sum: '<S701>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_v = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_v = MAX_int32_T;
    } else {
      qY_v = 0 + tmp;
    }

    if ((qY_v < 0) && (1 < MIN_int32_T - qY_v)) {
      qY_u = MIN_int32_T;
    } else if ((qY_v > 0) && (1 > MAX_int32_T - qY_v)) {
      qY_u = MAX_int32_T;
    } else {
      qY_u = qY_v + 1;
    }

    if ((qY_v < 0) && (2 < MIN_int32_T - qY_v)) {
      qY_t = MIN_int32_T;
    } else if ((qY_v > 0) && (2 > MAX_int32_T - qY_v)) {
      qY_t = MAX_int32_T;
    } else {
      qY_t = qY_v + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_v]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_u])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_t];

    /* End of Sum: '<S701>/Sum1' */

    /* Gain: '<S701>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_k0 =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_pg *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S702>/Memory1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory1[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory1[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory1[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[2];

    /* S-Function (OP_SEND): '<S1209>/S-Function' */

    /* Level2 S-Function Block: '<S1209>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[44];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S308>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ev *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[6];

    /* Gain: '<S309>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_n3 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[7];

    /* Gain: '<S310>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_c0 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[8];

    /* Gain: '<S26>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_h *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S305>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cr *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[12];

    /* Gain: '<S306>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_jq *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[13];

    /* Gain: '<S307>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_e5 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[14];

    /* Gain: '<S26>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_gz *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_gz *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_gz *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S629>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[2];

    /* Sum: '<S629>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_s = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_s = MAX_int32_T;
    } else {
      qY_s = 0 + tmp;
    }

    if ((qY_s < 0) && (1 < MIN_int32_T - qY_s)) {
      qY_r = MIN_int32_T;
    } else if ((qY_s > 0) && (1 > MAX_int32_T - qY_s)) {
      qY_r = MAX_int32_T;
    } else {
      qY_r = qY_s + 1;
    }

    if ((qY_s < 0) && (2 < MIN_int32_T - qY_s)) {
      qY_q = MIN_int32_T;
    } else if ((qY_s > 0) && (2 > MAX_int32_T - qY_s)) {
      qY_q = MAX_int32_T;
    } else {
      qY_q = qY_s + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_i =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_s]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_r])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_q];

    /* End of Sum: '<S629>/Sum4' */

    /* Sum: '<S629>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[2];

    /* Sum: '<S629>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[0];

    /* Sum: '<S629>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[1];

    /* Product: '<S629>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[2];

    /* Sum: '<S629>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_p = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_p = MAX_int32_T;
    } else {
      qY_p = 0 + tmp;
    }

    if ((qY_p < 0) && (1 < MIN_int32_T - qY_p)) {
      qY_o = MIN_int32_T;
    } else if ((qY_p > 0) && (1 > MAX_int32_T - qY_p)) {
      qY_o = MAX_int32_T;
    } else {
      qY_o = qY_p + 1;
    }

    if ((qY_p < 0) && (2 < MIN_int32_T - qY_p)) {
      qY_n = MIN_int32_T;
    } else if ((qY_p > 0) && (2 > MAX_int32_T - qY_p)) {
      qY_n = MAX_int32_T;
    } else {
      qY_n = qY_p + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_p]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_o])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_n];

    /* End of Sum: '<S629>/Sum1' */

    /* Gain: '<S629>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_i =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_p1 *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S630>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[2];

    /* S-Function (OP_SEND): '<S1210>/S-Function' */

    /* Level2 S-Function Block: '<S1210>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[45];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S398>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_iv *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[21];

    /* Gain: '<S399>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lf *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[22];

    /* Gain: '<S400>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_nj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[23];

    /* Gain: '<S32>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S395>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ow *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[63];

    /* Gain: '<S396>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_d *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[64];

    /* Gain: '<S397>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_g5 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[65];

    /* Gain: '<S32>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_mp *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_mp *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_mp *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S677>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[2];

    /* Sum: '<S677>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_m = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_m = MAX_int32_T;
    } else {
      qY_m = 0 + tmp;
    }

    if ((qY_m < 0) && (1 < MIN_int32_T - qY_m)) {
      qY_l = MIN_int32_T;
    } else if ((qY_m > 0) && (1 > MAX_int32_T - qY_m)) {
      qY_l = MAX_int32_T;
    } else {
      qY_l = qY_m + 1;
    }

    if ((qY_m < 0) && (2 < MIN_int32_T - qY_m)) {
      qY_k = MIN_int32_T;
    } else if ((qY_m > 0) && (2 > MAX_int32_T - qY_m)) {
      qY_k = MAX_int32_T;
    } else {
      qY_k = qY_m + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_cz =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_m]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_l])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_k];

    /* End of Sum: '<S677>/Sum4' */

    /* Sum: '<S677>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[2];

    /* Sum: '<S677>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[0];

    /* Sum: '<S677>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[1];

    /* Product: '<S677>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[2];

    /* Sum: '<S677>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_j = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_j = MAX_int32_T;
    } else {
      qY_j = 0 + tmp;
    }

    if ((qY_j < 0) && (1 < MIN_int32_T - qY_j)) {
      qY_i = MIN_int32_T;
    } else if ((qY_j > 0) && (1 > MAX_int32_T - qY_j)) {
      qY_i = MAX_int32_T;
    } else {
      qY_i = qY_j + 1;
    }

    if ((qY_j < 0) && (2 < MIN_int32_T - qY_j)) {
      qY_h = MIN_int32_T;
    } else if ((qY_j > 0) && (2 > MAX_int32_T - qY_j)) {
      qY_h = MAX_int32_T;
    } else {
      qY_h = qY_j + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_j]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_i])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_h];

    /* End of Sum: '<S677>/Sum1' */

    /* Gain: '<S677>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_c =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_e *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S678>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[2];

    /* S-Function (OP_SEND): '<S1207>/S-Function' */

    /* Level2 S-Function Block: '<S1207>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[46];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S5>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a4 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_gjk *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[75];

    /* DataTypeConversion: '<S420>/Data Type Conversion' incorporates:
     *  Constant: '<S420>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_f =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_j != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S420>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_f,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a4,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_j);

  /* End of Outputs for SubSystem: '<S420>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S420>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gf =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_f;
  }

  /* Outputs for Enabled SubSystem: '<S420>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gf,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_a4,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_il);

  /* End of Outputs for SubSystem: '<S420>/RMS ' */

  /* Switch: '<S420>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_f) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_il.Gain;
  }

  /* End of Switch: '<S420>/Switch' */

  /* Math: '<S34>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S34>/Product' incorporates:
   *  Constant: '<S34>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S34>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_p =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_p *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S59>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_oh *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[70];

    /* DataTypeConversion: '<S419>/Data Type Conversion' incorporates:
     *  Constant: '<S419>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ef =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_f != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S419>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ef,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_e,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_p);

  /* End of Outputs for SubSystem: '<S419>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S419>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hx =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ef;
  }

  /* Outputs for Enabled SubSystem: '<S419>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hx,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_e,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_i);

  /* End of Outputs for SubSystem: '<S419>/RMS ' */

  /* Switch: '<S419>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ef) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_p.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_i.Gain;
  }

  /* End of Switch: '<S419>/Switch' */

  /* Math: '<S34>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S34>/Product1' incorporates:
   *  Constant: '<S34>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S34>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_e =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_j *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S52>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bmy =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_pl *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[66];

    /* DataTypeConversion: '<S421>/Data Type Conversion' incorporates:
     *  Constant: '<S421>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_fl =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_i != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S421>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_fl,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bmy,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_a);

  /* End of Outputs for SubSystem: '<S421>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S421>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hg =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_fl;
  }

  /* Outputs for Enabled SubSystem: '<S421>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hg,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bmy,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_id);

  /* End of Outputs for SubSystem: '<S421>/RMS ' */

  /* Switch: '<S421>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_fl) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_a.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_id.Gain;
  }

  /* End of Switch: '<S421>/Switch' */

  /* Math: '<S34>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S34>/Product2' incorporates:
   *  Constant: '<S34>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rl *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S34>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_i =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_cx *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1211>/S-Function' */

    /* Level2 S-Function Block: '<S1211>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[47];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S293>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_mu *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[48];

    /* Gain: '<S294>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_l3 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[49];

    /* Gain: '<S295>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ie *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[50];

    /* Gain: '<S25>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S290>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cx *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[87];

    /* Gain: '<S291>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_a1 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[88];

    /* Gain: '<S292>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_gz *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[89];

    /* Gain: '<S25>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g3 *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g3 *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_g3 *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S407>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[2];

    /* Sum: '<S407>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_g = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_g = MAX_int32_T;
    } else {
      qY_g = 0 + tmp;
    }

    if ((qY_g < 0) && (1 < MIN_int32_T - qY_g)) {
      qY_f = MIN_int32_T;
    } else if ((qY_g > 0) && (1 > MAX_int32_T - qY_g)) {
      qY_f = MAX_int32_T;
    } else {
      qY_f = qY_g + 1;
    }

    if ((qY_g < 0) && (2 < MIN_int32_T - qY_g)) {
      qY_e = MIN_int32_T;
    } else if ((qY_g > 0) && (2 > MAX_int32_T - qY_g)) {
      qY_e = MAX_int32_T;
    } else {
      qY_e = qY_g + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_f3 =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_g]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_f])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_e];

    /* End of Sum: '<S407>/Sum4' */

    /* Sum: '<S407>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[2];

    /* Sum: '<S407>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[0];

    /* Sum: '<S407>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[1];

    /* Product: '<S407>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[2];

    /* Sum: '<S407>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_d = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_d = MAX_int32_T;
    } else {
      qY_d = 0 + tmp;
    }

    if ((qY_d < 0) && (1 < MIN_int32_T - qY_d)) {
      qY_c = MIN_int32_T;
    } else if ((qY_d > 0) && (1 > MAX_int32_T - qY_d)) {
      qY_c = MAX_int32_T;
    } else {
      qY_c = qY_d + 1;
    }

    if ((qY_d < 0) && (2 < MIN_int32_T - qY_d)) {
      qY_b = MIN_int32_T;
    } else if ((qY_d > 0) && (2 > MAX_int32_T - qY_d)) {
      qY_b = MAX_int32_T;
    } else {
      qY_b = qY_d + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_d]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_c])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_b];

    /* End of Sum: '<S407>/Sum1' */

    /* Gain: '<S407>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_it =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_f *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S408>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[2];

    /* S-Function (OP_SEND): '<S1212>/S-Function' */

    /* Level2 S-Function Block: '<S1212>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[48];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S56>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ea =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_kt *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[68];

    /* DataTypeConversion: '<S570>/Data Type Conversion' incorporates:
     *  Constant: '<S570>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ho =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS2_TrueRMS_d != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S570>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ho,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ea,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_h);

  /* End of Outputs for SubSystem: '<S570>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S570>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_c =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ho;
  }

  /* Outputs for Enabled SubSystem: '<S570>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_c,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ea,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cc);

  /* End of Outputs for SubSystem: '<S570>/RMS ' */

  /* Switch: '<S570>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ho) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_h.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_cc.Gain;
  }

  /* End of Switch: '<S570>/Switch' */

  /* Math: '<S39>/Math Function' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S39>/Product' incorporates:
   *  Constant: '<S39>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S39>/W_to_kW' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_i =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW_Gain_b *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S63>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p3 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_gob *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[72];

    /* DataTypeConversion: '<S569>/Data Type Conversion' incorporates:
     *  Constant: '<S569>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_nm =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS1_TrueRMS_a != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S569>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_nm,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p3,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ay);

  /* End of Outputs for SubSystem: '<S569>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S569>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_ah =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_nm;
  }

  /* Outputs for Enabled SubSystem: '<S569>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_ah,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p3,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_p2);

  /* End of Outputs for SubSystem: '<S569>/RMS ' */

  /* Switch: '<S569>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_nm) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ay.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_p2.Gain;
  }

  /* End of Switch: '<S569>/Switch' */

  /* Math: '<S39>/Math Function1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S39>/Product1' incorporates:
   *  Constant: '<S39>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S39>/W_to_kW1' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_j =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW1_Gain_hq *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S8>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_of =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_nc0 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[77];

    /* DataTypeConversion: '<S571>/Data Type Conversion' incorporates:
     *  Constant: '<S571>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bt =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS3_TrueRMS_p != 0.0);
  }

  /* Outputs for Enabled SubSystem: '<S571>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_TrueRMS_p(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bt,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_of,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_gs);

  /* End of Outputs for SubSystem: '<S571>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Logic: '<S571>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_na =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bt;
  }

  /* Outputs for Enabled SubSystem: '<S571>/RMS ' */
  acdcmg_sim8_1_sm_grid_sim_RMS_i(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_na,
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_of,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cb);

  /* End of Outputs for SubSystem: '<S571>/RMS ' */

  /* Switch: '<S571>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_bt) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_gs.Sqrt;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.RMS_cb.Gain;
  }

  /* End of Switch: '<S571>/Switch' */

  /* Math: '<S39>/Math Function2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;

  /* Product: '<S39>/Product2' incorporates:
   *  Constant: '<S39>/ r1_ L13'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_P.Rls *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Gain: '<S39>/W_to_kW2' */
  acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_mn =
    acdcmg_sim8_1_sm_grid_simulation_P.W_to_kW2_Gain_j *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1213>/S-Function' */

    /* Level2 S-Function Block: '<S1213>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[49];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S368>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_b0 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[15];

    /* Gain: '<S369>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_pc *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[16];

    /* Gain: '<S370>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_oj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[17];

    /* Gain: '<S30>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_os *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_os *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_os *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S365>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cm *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[57];

    /* Gain: '<S366>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_fo *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[58];

    /* Gain: '<S367>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_n3i *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[59];

    /* Gain: '<S30>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Product: '<S653>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[2];

    /* Sum: '<S653>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_a = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_a = MAX_int32_T;
    } else {
      qY_a = 0 + tmp;
    }

    if ((qY_a < 0) && (1 < MIN_int32_T - qY_a)) {
      qY_9 = MIN_int32_T;
    } else if ((qY_a > 0) && (1 > MAX_int32_T - qY_a)) {
      qY_9 = MAX_int32_T;
    } else {
      qY_9 = qY_a + 1;
    }

    if ((qY_a < 0) && (2 < MIN_int32_T - qY_a)) {
      qY_8 = MIN_int32_T;
    } else if ((qY_a > 0) && (2 > MAX_int32_T - qY_a)) {
      qY_8 = MAX_int32_T;
    } else {
      qY_8 = qY_a + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_a =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_a]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_9])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_8];

    /* End of Sum: '<S653>/Sum4' */

    /* Sum: '<S653>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[2];

    /* Sum: '<S653>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[0];

    /* Sum: '<S653>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[1];

    /* Product: '<S653>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[2];

    /* Sum: '<S653>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_7 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_7 = MAX_int32_T;
    } else {
      qY_7 = 0 + tmp;
    }

    if ((qY_7 < 0) && (1 < MIN_int32_T - qY_7)) {
      qY_6 = MIN_int32_T;
    } else if ((qY_7 > 0) && (1 > MAX_int32_T - qY_7)) {
      qY_6 = MAX_int32_T;
    } else {
      qY_6 = qY_7 + 1;
    }

    if ((qY_7 < 0) && (2 < MIN_int32_T - qY_7)) {
      qY_5 = MIN_int32_T;
    } else if ((qY_7 > 0) && (2 > MAX_int32_T - qY_7)) {
      qY_5 = MAX_int32_T;
    } else {
      qY_5 = qY_7 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_7]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_6])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_5];

    /* End of Sum: '<S653>/Sum1' */

    /* Gain: '<S653>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_g =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_j *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Memory: '<S654>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[2];

    /* S-Function (OP_SEND): '<S1214>/S-Function' */

    /* Level2 S-Function Block: '<S1214>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[50];
      sfcnOutputs(rts,1);
    }

    /* DiscreteIntegrator: '<S717>/Integ4' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4 =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4 =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_c *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;
    }

    /* End of DiscreteIntegrator: '<S717>/Integ4' */

    /* Constant: '<S717>/K1' */
    acdcmg_sim8_1_sm_grid_simulation_B.K1 =
      acdcmg_sim8_1_sm_grid_simulation_P.K1_Value;

    /* S-Function (sfun_discreteVariableDelay): '<S718>/S-Function' */

    /* Level2 S-Function Block: '<S718>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];
      sfcnOutputs(rts,1);
    }

    /* UnitDelay: '<S717>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_a =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_kd;

    /* DigitalClock: '<S717>/Digital  Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* RelationalOperator: '<S717>/Relational Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk >=
       acdcmg_sim8_1_sm_grid_simulation_B.K1);

    /* UnitDelay: '<S717>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_c;

    /* Switch: '<S717>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      /* Gain: '<S717>/Gain' */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_g *
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_a;

      /* Gain: '<S717>/Gain1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7 =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_d *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;

      /* Sum: '<S717>/Sum1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Correction =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7 -
        acdcmg_sim8_1_sm_grid_simulation_B.Mean;

      /* Sum: '<S717>/Sum7' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7 =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4 -
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction_e;

      /* Product: '<S717>/Product' incorporates:
       *  Constant: '<S717>/K2'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7 *
        acdcmg_sim8_1_sm_grid_simulation_P.K2_Value;

      /* Sum: '<S717>/Sum5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum5_o =
        acdcmg_sim8_1_sm_grid_simulation_B.Mean +
        acdcmg_sim8_1_sm_grid_simulation_B.Correction;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_o;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    }

    /* End of Switch: '<S717>/Switch' */

    /* Product: '<S713>/Power' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_o *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l;

    /* Gain: '<S713>/to Kw' */
    acdcmg_sim8_1_sm_grid_simulation_B.toKw =
      acdcmg_sim8_1_sm_grid_simulation_P.toKw_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S713>/Power1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h1;

    /* Gain: '<S713>/to Kw1' */
    acdcmg_sim8_1_sm_grid_simulation_B.toKw1 =
      acdcmg_sim8_1_sm_grid_simulation_P.toKw1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* S-Function (OP_SEND): '<S1215>/S-Function' */

    /* Level2 S-Function Block: '<S1215>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[52];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S85>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b5 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_pf *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[9];
  }

  /* Integrator: '<S719>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_B.integrator =
    acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE;

  /* TransportDelay: '<S719>/Transport Delay' */
  {
    real_T **uBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[0];
    real_T **tBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[1];
    real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    real_T tMinusDelay = simTime -
      (acdcmg_sim8_1_sm_grid_simulation_P.TransportDelay_Delay);
    acdcmg_sim8_1_sm_grid_simulation_B.TransportDelay = rt_TDelayInterpolate(
      tMinusDelay,
      0.0,
      *tBuffer,
      *uBuffer,
      acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.CircularBufSize,
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Last,
      acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail,
      acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head,
      acdcmg_sim8_1_sm_grid_simulation_P.TransportDelay_InitOutput,
      0,
      0);
  }

  /* Clock: '<S719>/Clock' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];

  /* RelationalOperator: '<S719>/Relational Operator' incorporates:
   *  Constant: '<S719>/K1'
   */
  acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_o =
    (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g >=
     acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_k);
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Memory: '<S719>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_au =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_l;
  }

  /* Switch: '<S719>/Switch' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_o) {
    /* Sum: '<S719>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_p =
      acdcmg_sim8_1_sm_grid_simulation_B.integrator -
      acdcmg_sim8_1_sm_grid_simulation_B.TransportDelay;

    /* Gain: '<S719>/Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain_o =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_i *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_p;
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_g1 =
      acdcmg_sim8_1_sm_grid_simulation_B.Gain_o;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_g1 =
      acdcmg_sim8_1_sm_grid_simulation_B.Memory_au;
  }

  /* End of Switch: '<S719>/Switch' */

  /* Product: '<S48>/Product' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b5 *
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_g1;

  /* Gain: '<S48>/Gain' */
  acdcmg_sim8_1_sm_grid_simulation_B.PowerkW =
    acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_c *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* S-Function (OP_SEND): '<S1216>/S-Function' */

    /* Level2 S-Function Block: '<S1216>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[53];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S145>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_m =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_hb *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[14];

    /* Product: '<S720>/Product' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pv;

    /* Gain: '<S720>/W-kW' */
    acdcmg_sim8_1_sm_grid_simulation_B.Pmean_PVkW =
      acdcmg_sim8_1_sm_grid_simulation_P.WkW_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S715>/Power1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g;

    /* Gain: '<S715>/to Kw1' */
    acdcmg_sim8_1_sm_grid_simulation_B.toKw1_b =
      acdcmg_sim8_1_sm_grid_simulation_P.toKw1_Gain_m *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* S-Function (OP_SEND): '<S1217>/S-Function' */

    /* Level2 S-Function Block: '<S1217>/S-Function' (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[54];
      sfcnOutputs(rts,1);
    }
  }

  /* Derivative: '<S166>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S166>/Derivative' */

  /* Derivative: '<S170>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_h = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_j;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_k;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_k;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_h =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S170>/Derivative' */

  /* Derivative: '<S174>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_n = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_j;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_j;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S174>/Derivative' */

  /* Derivative: '<S183>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nk = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_b;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_m;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_m;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nk =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_mg - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S183>/Derivative' */

  /* Derivative: '<S187>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_i = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_e;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_o;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_o;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_i =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_e - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S187>/Derivative' */

  /* Derivative: '<S191>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_p = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_o;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_kv;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_kv;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_p =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_g - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S191>/Derivative' */

  /* Derivative: '<S200>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_n5 = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_a;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_p;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_p;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_n5 =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_he - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S200>/Derivative' */

  /* Derivative: '<S204>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_d = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_c;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_h;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_h;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_d =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_heh - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S204>/Derivative' */

  /* Derivative: '<S208>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_a = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_p;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_c;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_c;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_a =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_nz - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S208>/Derivative' */

  /* Derivative: '<S217>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nd = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_d;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_i;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_i;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nd =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_o - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S217>/Derivative' */

  /* Derivative: '<S221>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_e = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_os;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ot;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ot;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_e =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_gu - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S221>/Derivative' */

  /* Derivative: '<S225>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ht = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_f;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ig;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ig;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ht =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dd - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S225>/Derivative' */

  /* Derivative: '<S234>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_m = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_n;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_n;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_n;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_m =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i1 - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S234>/Derivative' */

  /* Derivative: '<S238>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_b = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_nc;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_b =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_b - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S238>/Derivative' */

  /* Derivative: '<S242>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nq = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_h;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ik;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ik;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_nq =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_l - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S242>/Derivative' */

  /* Derivative: '<S251>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_c = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g3;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ml;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ml;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_c =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_p - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S251>/Derivative' */

  /* Derivative: '<S255>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ia = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_dl;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_l;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_l;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ia =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_d - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S255>/Derivative' */

  /* Derivative: '<S259>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ix = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g4;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d2;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d2;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_ix =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_c - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S259>/Derivative' */

  /* Derivative: '<S264>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_l = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bj;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nw;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nw;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_l =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dn - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S264>/Derivative' */

  /* Derivative: '<S268>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_pa = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_og;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_a;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_a;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_pa =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_j - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S268>/Derivative' */

  /* Derivative: '<S272>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cp = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_l;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_am;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_am;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cp =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n5 - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S272>/Derivative' */

  /* Derivative: '<S276>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cpl = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_gf;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_b;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_b;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cpl =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_h - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S276>/Derivative' */

  /* Derivative: '<S280>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_j = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_ai;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_pk;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_pk;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_j =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_lz - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S280>/Derivative' */

  /* Derivative: '<S284>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cx = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_od;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_cf;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_cf;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_cx =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_m - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S284>/Derivative' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S409>/Data Type Conversion' incorporates:
     *  Constant: '<S409>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j5 =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS != 0.0);

    /* Logic: '<S409>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_m =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j5;
  }

  /* Outputs for Enabled SubSystem: '<S409>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_m,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_l,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS);

  /* End of Outputs for SubSystem: '<S409>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S409>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j5,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_l,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS);

  /* End of Outputs for SubSystem: '<S409>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S93>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_if *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[19];

    /* Abs: '<S99>/Abs' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk = fabs
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku);

    /* RelationalOperator: '<S103>/Compare' incorporates:
     *  Constant: '<S103>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_f = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku <
       acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_pl);

    /* DataTypeConversion: '<S99>/Data Type Conversion1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h = (real_T)
      acdcmg_sim8_1_sm_grid_simulation_B.Compare_f;

    /* Gain: '<S99>/Gain4' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain4_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S99>/Add3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e -
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator;

    /* Product: '<S99>/Divide' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_e =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Gain: '<S99>/Gain1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_gn *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_e;

    /* Gain: '<S94>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_d =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_f4 *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch7;

    /* Gain: '<S94>/R1' */
    acdcmg_sim8_1_sm_grid_simulation_B.R1 =
      acdcmg_sim8_1_sm_grid_simulation_P.R1_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku;
  }

  /* Derivative: '<S119>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_k = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_odu;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nk;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nk;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_k =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_pt - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S119>/Derivative' */

  /* Derivative: '<S123>/Derivative' */
  if ((acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) &&
      (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg >=
       acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0])) {
    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_bq = 0.0;
  } else {
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2;
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bc;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 <
        acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg) {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg <
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_hw;
      }
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 >=
          acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0]) {
        tmp_0 = acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg;
        lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_hw;
      }
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Derivative_bq =
      (acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_ls - *lastU) /
      (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] - tmp_0);
  }

  /* End of Derivative: '<S123>/Derivative' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S108>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p2 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_md *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[20];

    /* Gain: '<S132>/Ki' */
    acdcmg_sim8_1_sm_grid_simulation_B.Ki =
      acdcmg_sim8_1_sm_grid_simulation_P.Ki_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;

    /* Sum: '<S114>/Sum' incorporates:
     *  Constant: '<S11>/V_ref'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.error =
      acdcmg_sim8_1_sm_grid_simulation_P.V_ref_Value -
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_o;

    /* Gain: '<S117>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_on =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lz *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[12];
  }

  /* Integrator: '<S130>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_B.integrator_k =
    acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_p;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S11>/Unit Delay2' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay2 =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE;

    /* Gain: '<S110>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_io *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[22];
  }

  /* Integrator: '<S131>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_B.integrator_p =
    acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_b;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S11>/Unit Delay3' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay3 =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE;

    /* Delay: '<S149>/Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE_b;

    /* Sum: '<S149>/Subtract' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h -
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Delay: '<S149>/Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_DW.Delay1_DSTATE;

    /* Sum: '<S149>/Subtract1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j -
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S149>/div' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na /
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* DiscreteIntegrator: '<S152>/Integ4' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_n != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_g =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_n;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_g =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_n +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_j *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;
    }

    /* End of DiscreteIntegrator: '<S152>/Integ4' */

    /* Constant: '<S152>/K1' */
    acdcmg_sim8_1_sm_grid_simulation_B.K1_d =
      acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_o;

    /* S-Function (sfun_discreteVariableDelay): '<S153>/S-Function' */

    /* Level2 S-Function Block: '<S153>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];
      sfcnOutputs(rts,1);
    }

    /* UnitDelay: '<S152>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_g =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d;

    /* DigitalClock: '<S152>/Digital  Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* RelationalOperator: '<S152>/Relational Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na >=
       acdcmg_sim8_1_sm_grid_simulation_B.K1_d);

    /* UnitDelay: '<S152>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pa;

    /* Switch: '<S152>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      /* Gain: '<S152>/Gain' */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean_mu =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain *
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_g;

      /* Gain: '<S152>/Gain1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_i =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;

      /* Sum: '<S152>/Sum1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Correction_l =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_i -
        acdcmg_sim8_1_sm_grid_simulation_B.Mean_mu;

      /* Sum: '<S152>/Sum7' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_i =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_g -
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction_m;

      /* Product: '<S152>/Product' incorporates:
       *  Constant: '<S152>/K2'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean_mu =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_i *
        acdcmg_sim8_1_sm_grid_simulation_P.K2_Value_g;

      /* Sum: '<S152>/Sum5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum5_i =
        acdcmg_sim8_1_sm_grid_simulation_B.Mean_mu +
        acdcmg_sim8_1_sm_grid_simulation_B.Correction_l;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dc =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_i;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dc =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    }

    /* End of Switch: '<S152>/Switch' */

    /* DiscreteIntegrator: '<S154>/Integ4' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_j != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_b =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_l;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_b =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_l +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_m *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;
    }

    /* End of DiscreteIntegrator: '<S154>/Integ4' */

    /* Constant: '<S154>/K1' */
    acdcmg_sim8_1_sm_grid_simulation_B.K1_j =
      acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_c;

    /* S-Function (sfun_discreteVariableDelay): '<S155>/S-Function' */

    /* Level2 S-Function Block: '<S155>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];
      sfcnOutputs(rts,1);
    }

    /* UnitDelay: '<S154>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_d =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_o;

    /* DigitalClock: '<S154>/Digital  Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1];

    /* RelationalOperator: '<S154>/Relational Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na >=
       acdcmg_sim8_1_sm_grid_simulation_B.K1_j);

    /* UnitDelay: '<S154>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pd;

    /* Switch: '<S154>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_n) {
      /* Gain: '<S154>/Gain' */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean_m =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_f *
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_d;

      /* Gain: '<S154>/Gain1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_j =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_i *
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;

      /* Sum: '<S154>/Sum1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Correction_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_j -
        acdcmg_sim8_1_sm_grid_simulation_B.Mean_m;

      /* Sum: '<S154>/Sum7' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_j =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_b -
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction_p;

      /* Product: '<S154>/Product' incorporates:
       *  Constant: '<S154>/K2'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Mean_m =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_j *
        acdcmg_sim8_1_sm_grid_simulation_P.K2_Value_l;

      /* Sum: '<S154>/Sum5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum5_mr =
        acdcmg_sim8_1_sm_grid_simulation_B.Mean_m +
        acdcmg_sim8_1_sm_grid_simulation_B.Correction_p;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5 =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_mr;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5 =
        acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    }

    /* End of Switch: '<S154>/Switch' */

    /* Saturate: '<S149>/Saturation' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5 >
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_m) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_m;
    } else if (acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5 <
               acdcmg_sim8_1_sm_grid_simulation_P.Vmin_mppt) {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
        acdcmg_sim8_1_sm_grid_simulation_P.Vmin_mppt;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5;
    }

    /* End of Saturate: '<S149>/Saturation' */

    /* Product: '<S149>/div2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dc /
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;

    /* Gain: '<S149>/Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_k *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Sum: '<S149>/Add1' */
    acdcmg_sim8_1_sm_grid_simulation_B.error_i =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
  }

  /* Switch: '<S149>/Switch' incorporates:
   *  Constant: '<S149>/Constant'
   */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Sum_k >=
      acdcmg_sim8_1_sm_grid_simulation_P.Switch_Threshold_nv) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_B.error_i;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_b;
  }

  /* End of Switch: '<S149>/Switch' */

  /* DeadZone: '<S149>/Dead Zone' */
  if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g >
      acdcmg_sim8_1_sm_grid_simulation_P.DeadZone_End) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g -
       acdcmg_sim8_1_sm_grid_simulation_P.DeadZone_End) + -0.0;
  } else if (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g >=
             acdcmg_sim8_1_sm_grid_simulation_P.DeadZone_Start) {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f = 0.0;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
      (acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g -
       acdcmg_sim8_1_sm_grid_simulation_P.DeadZone_Start) + -0.0;
  }

  /* End of DeadZone: '<S149>/Dead Zone' */

  /* Gain: '<S149>/MPPT  Gain' */
  acdcmg_sim8_1_sm_grid_simulation_B.MPPTGain =
    acdcmg_sim8_1_sm_grid_simulation_P.MPPTGain_Gain *
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f;

  /* Integrator: '<S156>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_B.integrator_j =
    acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_c;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* UnitDelay: '<S12>/Unit Delay2' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay2_l =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE_b;

    /* UnitDelay: '<S12>/Unit Delay3' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay3_e =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE_e;

    /* DiscreteIntegrator: '<S157>/Integ4' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_l != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_k =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_c;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_k =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_c +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_cw *
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay3_e;
    }

    /* End of DiscreteIntegrator: '<S157>/Integ4' */

    /* Constant: '<S157>/K1' */
    acdcmg_sim8_1_sm_grid_simulation_B.K1_c =
      acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_p;

    /* S-Function (sfun_discreteVariableDelay): '<S158>/S-Function' */

    /* Level2 S-Function Block: '<S158>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S323>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_jv *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[3];

    /* Gain: '<S324>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_af *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[4];

    /* Gain: '<S325>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bm *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[5];

    /* Gain: '<S27>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_nq *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_nq *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_nq *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* DataTypeConversion: '<S631>/Data Type Conversion' incorporates:
     *  Constant: '<S631>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_d =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_f != 0.0);

    /* Logic: '<S631>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_i3 =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_d;
  }

  /* Outputs for Enabled SubSystem: '<S631>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_i3,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_jo,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_jo,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_jo,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_jo);

  /* End of Outputs for SubSystem: '<S631>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S631>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_d,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_mi,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_mi,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_mi);

  /* End of Outputs for SubSystem: '<S631>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S643>/Data Type Conversion' incorporates:
     *  Constant: '<S643>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j3 =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_g != 0.0);

    /* Logic: '<S643>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hq =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j3;
  }

  /* Outputs for Enabled SubSystem: '<S643>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_hq,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_pj,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_pj,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_pj,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_pj);

  /* End of Outputs for SubSystem: '<S643>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S643>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_j3,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dt,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dt,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dt);

  /* End of Outputs for SubSystem: '<S643>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S655>/Data Type Conversion' incorporates:
     *  Constant: '<S655>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_g =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_n != 0.0);

    /* Logic: '<S655>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_e =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_g;
  }

  /* Outputs for Enabled SubSystem: '<S655>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_e,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_j,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_bz,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bz,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_bz,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_bz);

  /* End of Outputs for SubSystem: '<S655>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S655>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_g,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_j,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_jr,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_jr,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_jr);

  /* End of Outputs for SubSystem: '<S655>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S667>/Data Type Conversion' incorporates:
     *  Constant: '<S667>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_dn =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_b != 0.0);

    /* Logic: '<S667>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_ai =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_dn;
  }

  /* Outputs for Enabled SubSystem: '<S667>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_ai,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_a,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_k);

  /* End of Outputs for SubSystem: '<S667>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S667>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_dn,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_a,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ik,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ik,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ik);

  /* End of Outputs for SubSystem: '<S667>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S679>/Data Type Conversion' incorporates:
     *  Constant: '<S679>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ox =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_gk != 0.0);

    /* Logic: '<S679>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gi =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ox;
  }

  /* Outputs for Enabled SubSystem: '<S679>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gi,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_n,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_hk,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_hk,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_hk,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_hk);

  /* End of Outputs for SubSystem: '<S679>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S679>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_ox,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_n,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_j2);

  /* End of Outputs for SubSystem: '<S679>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Memory: '<S690>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_c[0] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_c[1] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_c[2] =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[2];

    /* DataTypeConversion: '<S691>/Data Type Conversion' incorporates:
     *  Constant: '<S691>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_mx =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_k != 0.0);

    /* Logic: '<S691>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gl =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_mx;
  }

  /* Outputs for Enabled SubSystem: '<S691>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_gl,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_c,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_my,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_my,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_my,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_my);

  /* End of Outputs for SubSystem: '<S691>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S691>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_mx,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory_c,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ml,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ml,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ml);

  /* End of Outputs for SubSystem: '<S691>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* DataTypeConversion: '<S703>/Data Type Conversion' incorporates:
     *  Constant: '<S703>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_df =
      (acdcmg_sim8_1_sm_grid_simulation_P.RMS_TrueRMS_l != 0.0);

    /* Logic: '<S703>/Logical Operator' */
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_p5 =
      !acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_df;
  }

  /* Outputs for Enabled SubSystem: '<S703>/RMS ' */
  acdcmg_sim8_1_sm_grid_simul_RMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.LogicalOperator_p5,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory1,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_ng,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_ng,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_ng,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_ng);

  /* End of Outputs for SubSystem: '<S703>/RMS ' */

  /* Outputs for Enabled SubSystem: '<S703>/TrueRMS ' */
  acdcmg_sim8_1_sm_grid_s_TrueRMS(acdcmg_sim8_1_sm_grid_simulation_M,
    acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion_df,
    acdcmg_sim8_1_sm_grid_simulation_B.Memory1,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_f,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_f,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_f);

  /* End of Outputs for SubSystem: '<S703>/TrueRMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Memory: '<S48>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_n;

    /* Memory: '<S48>/Memory1' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput_p;

    /* Sum: '<S48>/Add' */
    acdcmg_sim8_1_sm_grid_simulation_B.Add =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk +
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;

    /* Gain: '<S999>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lc *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[3];

    /* Gain: '<S1000>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_hj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[4];

    /* Gain: '<S1001>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ms *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[5];

    /* Gain: '<S73>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Gain: '<S1014>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_c4 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[6];

    /* Gain: '<S1015>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lfw *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[7];

    /* Gain: '<S1016>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_co *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[8];

    /* Gain: '<S74>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_hd *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_hd *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_hd *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Gain: '<S764>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pl =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bc *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[15];
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S761>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ac *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[45];

    /* Gain: '<S762>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_k2 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[46];

    /* Gain: '<S763>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_fpg *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[47];

    /* Gain: '<S941>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_m5 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[42];

    /* Gain: '<S942>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_hx *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[43];

    /* Gain: '<S943>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ji *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[44];

    /* Gain: '<S760>/Kv1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_fy *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_fy *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv1_Gain_fy *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;

    /* Gain: '<S938>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_i1 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[84];

    /* Gain: '<S939>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_hi *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[85];

    /* Gain: '<S940>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bjb *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[86];

    /* Gain: '<S760>/Kv' */
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_ga *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_ga *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;
    acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Kv_Gain_ga *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S765>/Product1' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2] *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[2];

    /* Sum: '<S765>/Sum4' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_4 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_4 = MAX_int32_T;
    } else {
      qY_4 = 0 + tmp;
    }

    if ((qY_4 < 0) && (1 < MIN_int32_T - qY_4)) {
      qY_3 = MIN_int32_T;
    } else if ((qY_4 > 0) && (1 > MAX_int32_T - qY_4)) {
      qY_3 = MAX_int32_T;
    } else {
      qY_3 = qY_4 + 1;
    }

    if ((qY_4 < 0) && (2 < MIN_int32_T - qY_4)) {
      qY_2 = MIN_int32_T;
    } else if ((qY_4 > 0) && (2 > MAX_int32_T - qY_4)) {
      qY_2 = MAX_int32_T;
    } else {
      qY_2 = qY_4 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.Sum4_l =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_4]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_3])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_2];

    /* End of Sum: '<S765>/Sum4' */

    /* Sum: '<S765>/Sum5' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2];

    /* Sum: '<S765>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0];

    /* Sum: '<S765>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0] -
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1];

    /* Product: '<S765>/Product3' */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum_h *
      acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[2];

    /* Sum: '<S765>/Sum1' */
    tmp = (int32_T)0L;
    if (0 && (tmp < MIN_int32_T)) {
      qY_1 = MIN_int32_T;
    } else if (0 && (tmp > MAX_int32_T)) {
      qY_1 = MAX_int32_T;
    } else {
      qY_1 = 0 + tmp;
    }

    if ((qY_1 < 0) && (1 < MIN_int32_T - qY_1)) {
      qY_0 = MIN_int32_T;
    } else if ((qY_1 > 0) && (1 > MAX_int32_T - qY_1)) {
      qY_0 = MAX_int32_T;
    } else {
      qY_0 = qY_1 + 1;
    }

    if ((qY_1 < 0) && (2 < MIN_int32_T - qY_1)) {
      qY = MIN_int32_T;
    } else if ((qY_1 > 0) && (2 > MAX_int32_T - qY_1)) {
      qY = MAX_int32_T;
    } else {
      qY = qY_1 + 2;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      (acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_1]
       + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY_0])
      + acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[qY];

    /* End of Sum: '<S765>/Sum1' */

    /* Gain: '<S765>/pu->V' */
    acdcmg_sim8_1_sm_grid_simulation_B.puV_ix =
      acdcmg_sim8_1_sm_grid_simulation_P.puV_Gain_fk *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S906>/Gain3' */
    for (i = 0; i < 3; i = i + 1) {
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] =
        0.0;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f[i + 0] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0];
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f[i + 3] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1];
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f[i + 6] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2];
    }

    /* End of Gain: '<S906>/Gain3' */

    /* Gain: '<S906>/Gain1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_k[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_k[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_k[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_c *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2];
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* RelationalOperator: '<S864>/Relational Operator' incorporates:
     *  Constant: '<S864>/Constant4'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator =
      (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h >
       acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value_i);

    /* Sum: '<S864>/Subtract' incorporates:
     *  Constant: '<S864>/Constant4'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.A12 =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h -
      acdcmg_sim8_1_sm_grid_simulation_P.Constant4_Value_i;

    /* InitialCondition: '<S864>/Initial' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Initial_FirstOutputTime) {
      acdcmg_sim8_1_sm_grid_simulation_DW.Initial_FirstOutputTime = false;
      acdcmg_sim8_1_sm_grid_simulation_B.Initial =
        acdcmg_sim8_1_sm_grid_simulation_P.Initial_Value;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Initial =
        acdcmg_sim8_1_sm_grid_simulation_B.A12;
    }

    /* End of InitialCondition: '<S864>/Initial' */

    /* DiscreteIntegrator: '<S864>/Discrete-Time Integrator' */
    if (((int32_T)acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator > 0) &&
        (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_PrevRese <=
         0)) {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h =
        acdcmg_sim8_1_sm_grid_simulation_B.Initial;
    }

    acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h;

    /* End of DiscreteIntegrator: '<S864>/Discrete-Time Integrator' */
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* RelationalOperator: '<S907>/Compare' incorporates:
     *  Constant: '<S905>/Constant'
     *  Constant: '<S907>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_o ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant_const_k);

    /* Outputs for Enabled SubSystem: '<S905>/Subsystem1' */
    acdcmg_sim8_1_sm_gri_Subsystem1(acdcmg_sim8_1_sm_grid_simulation_B.Compare,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_k[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_k);

    /* End of Outputs for SubSystem: '<S905>/Subsystem1' */

    /* RelationalOperator: '<S908>/Compare' incorporates:
     *  Constant: '<S905>/Constant'
     *  Constant: '<S908>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_j = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_o ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant1_const_c);

    /* Outputs for Enabled SubSystem: '<S905>/Subsystem - pi//2 delay' */
    acdcmg_sim8_1_Subsystempi2delay(acdcmg_sim8_1_sm_grid_simulation_B.Compare_j,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_k[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_l);

    /* End of Outputs for SubSystem: '<S905>/Subsystem - pi//2 delay' */

    /* Switch: '<S905>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_k.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_k.Fcn1;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_l.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_l.Fcn1;
    }

    /* End of Switch: '<S905>/Switch' */
  }

  /* Step: '<S750>/Step1' */
  if (acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] <
      acdcmg_sim8_1_sm_grid_simulation_P.Step1_Time) {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Step1_Y0;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
      acdcmg_sim8_1_sm_grid_simulation_P.Step1_YFinal;
  }

  /* End of Step: '<S750>/Step1' */

  /* Product: '<S770>/Product2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S770>/Product3' incorporates:
     *  Constant: '<S750>/Q_ref'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Product3 =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1] *
      acdcmg_sim8_1_sm_grid_simulation_P.Q_ref_Value;
  }

  /* Sum: '<S770>/Sum' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum_k =
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f +
    acdcmg_sim8_1_sm_grid_simulation_B.Product3;

  /* Product: '<S770>/Product4' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product4_f =
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g *
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1];
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S770>/Product5' incorporates:
     *  Constant: '<S750>/Q_ref'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Product5 =
      acdcmg_sim8_1_sm_grid_simulation_P.Q_ref_Value *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0];
  }

  /* Sum: '<S770>/Sum1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g =
    acdcmg_sim8_1_sm_grid_simulation_B.Product4_f -
    acdcmg_sim8_1_sm_grid_simulation_B.Product5;

  /* Gain: '<S770>/Gain' */
  acdcmg_sim8_1_sm_grid_simulation_B.Gain_e[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_in *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_k;
  acdcmg_sim8_1_sm_grid_simulation_B.Gain_e[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_in *
    acdcmg_sim8_1_sm_grid_simulation_B.Sum1_g;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Fcn: '<S770>/Fcn3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Fcn3 =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] +
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1];
  }

  /* Product: '<S770>/Product6' */
  acdcmg_sim8_1_sm_grid_simulation_B.Product6[0] =
    acdcmg_sim8_1_sm_grid_simulation_B.Gain_e[0] /
    acdcmg_sim8_1_sm_grid_simulation_B.Fcn3;
  acdcmg_sim8_1_sm_grid_simulation_B.Product6[1] =
    acdcmg_sim8_1_sm_grid_simulation_B.Gain_e[1] /
    acdcmg_sim8_1_sm_grid_simulation_B.Fcn3;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Gain: '<S900>/Gain3' */
    for (i_0 = 0; i_0 < 3; i_0 = i_0 + 1) {
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0] =
        0.0;
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0]
        + acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f2[i_0 + 0] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[0];
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0]
        + acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f2[i_0 + 3] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[1];
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0] =
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[i_0]
        + acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_f2[i_0 + 6] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv_n[2];
    }

    /* End of Gain: '<S900>/Gain3' */

    /* Gain: '<S900>/Gain1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_l[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_kx *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_l[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_kx *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_l[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_kx *
      acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2];

    /* RelationalOperator: '<S901>/Compare' incorporates:
     *  Constant: '<S899>/Constant'
     *  Constant: '<S901>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_o = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_p ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant_const_n);

    /* Outputs for Enabled SubSystem: '<S899>/Subsystem1' */
    acdcmg_sim8_1_sm_gri_Subsystem1(acdcmg_sim8_1_sm_grid_simulation_B.Compare_o,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_l[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_m);

    /* End of Outputs for SubSystem: '<S899>/Subsystem1' */

    /* RelationalOperator: '<S902>/Compare' incorporates:
     *  Constant: '<S899>/Constant'
     *  Constant: '<S902>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_e = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_p ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant1_const_o);

    /* Outputs for Enabled SubSystem: '<S899>/Subsystem - pi//2 delay' */
    acdcmg_sim8_1_Subsystempi2delay(acdcmg_sim8_1_sm_grid_simulation_B.Compare_e,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_l[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_j);

    /* End of Outputs for SubSystem: '<S899>/Subsystem - pi//2 delay' */

    /* Switch: '<S899>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_o != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_m.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_m.Fcn1;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_j.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_j.Fcn1;
    }

    /* End of Switch: '<S899>/Switch' */
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
  }

  /* Sum: '<S766>/Sum1' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum1_i =
    acdcmg_sim8_1_sm_grid_simulation_B.Product6[0] -
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[0];
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Gain: '<S810>/Proportional Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.A12 =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Kp *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum1_i;

    /* DiscreteIntegrator: '<S805>/Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_B.x2k =
      acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE;

    /* Gain: '<S799>/Derivative Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum3 =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Kd *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum1_i;

    /* DiscreteIntegrator: '<S800>/Filter' */
    acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
      acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE;

    /* Sum: '<S800>/SumD' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_B.sum3 -
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b;

    /* Gain: '<S808>/Filter Coefficient' */
    acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient =
      acdcmg_sim8_1_sm_grid_simulation_P.PIDController1_N *
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;

    /* Sum: '<S814>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_l =
      (acdcmg_sim8_1_sm_grid_simulation_B.A12 +
       acdcmg_sim8_1_sm_grid_simulation_B.x2k) +
      acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient;

    /* UnitDelay: '<S864>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_oz;

    /* Product: '<S771>/Product' incorporates:
     *  Constant: '<S771>/2pai'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Product_g =
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j *
      acdcmg_sim8_1_sm_grid_simulation_P.upai_Value;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S771>/Product1' incorporates:
     *  Constant: '<S750>/L1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[1] *
      acdcmg_sim8_1_sm_grid_simulation_B.Product_g *
      acdcmg_sim8_1_sm_grid_simulation_P.L1_Value;

    /* Sum: '<S766>/Add' */
    acdcmg_sim8_1_sm_grid_simulation_B.Add_e =
      (acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[0] +
       acdcmg_sim8_1_sm_grid_simulation_B.Sum_l) -
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
  }

  /* Sum: '<S766>/Sum2' */
  acdcmg_sim8_1_sm_grid_simulation_B.Sum2 =
    acdcmg_sim8_1_sm_grid_simulation_B.Product6[1] -
    acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[1];
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Gain: '<S854>/Proportional Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Kp *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum2;

    /* DiscreteIntegrator: '<S849>/Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
      acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE_m;

    /* Gain: '<S843>/Derivative Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum3 =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Kd *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum2;

    /* DiscreteIntegrator: '<S844>/Filter' */
    acdcmg_sim8_1_sm_grid_simulation_B.x2k =
      acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE_p;

    /* Sum: '<S844>/SumD' */
    acdcmg_sim8_1_sm_grid_simulation_B.A12 =
      acdcmg_sim8_1_sm_grid_simulation_B.sum3 -
      acdcmg_sim8_1_sm_grid_simulation_B.x2k;

    /* Gain: '<S852>/Filter Coefficient' */
    acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient_j =
      acdcmg_sim8_1_sm_grid_simulation_P.PIDController2_N *
      acdcmg_sim8_1_sm_grid_simulation_B.A12;

    /* Sum: '<S858>/Sum' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum_i =
      (acdcmg_sim8_1_sm_grid_simulation_B.sum2 +
       acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b) +
      acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient_j;

    /* Product: '<S772>/Product' incorporates:
     *  Constant: '<S772>/2pai'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Product_n =
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j *
      acdcmg_sim8_1_sm_grid_simulation_P.upai_Value_h;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S772>/Product1' incorporates:
     *  Constant: '<S750>/L1'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_gd[0] *
      acdcmg_sim8_1_sm_grid_simulation_B.Product_n *
      acdcmg_sim8_1_sm_grid_simulation_P.L1_Value;

    /* Sum: '<S766>/Add1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Add1 =
      (acdcmg_sim8_1_sm_grid_simulation_B.Switch_li[1] +
       acdcmg_sim8_1_sm_grid_simulation_B.Sum_i) +
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* RelationalOperator: '<S913>/Compare' incorporates:
     *  Constant: '<S912>/Constant'
     *  Constant: '<S913>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_eg = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.dq0toAlphaBetaZero_Alignment ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant_const_kp);

    /* Outputs for Enabled SubSystem: '<S912>/Subsystem1' incorporates:
     *  EnablePort: '<S916>/Enable'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_eg > 0) {
      /* Fcn: '<S916>/Fcn' */
      acdcmg_sim8_1_sm_grid_simulation_B.Fcn =
        acdcmg_sim8_1_sm_grid_simulation_B.Add_e * cos
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i) -
        acdcmg_sim8_1_sm_grid_simulation_B.Add1 * sin
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i);

      /* Fcn: '<S916>/Fcn1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Fcn1 =
        acdcmg_sim8_1_sm_grid_simulation_B.Add_e * sin
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i) +
        acdcmg_sim8_1_sm_grid_simulation_B.Add1 * cos
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i);
    }

    /* End of Outputs for SubSystem: '<S912>/Subsystem1' */

    /* RelationalOperator: '<S914>/Compare' incorporates:
     *  Constant: '<S912>/Constant'
     *  Constant: '<S914>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_p = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.dq0toAlphaBetaZero_Alignment ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant1_const_j);

    /* Outputs for Enabled SubSystem: '<S912>/Subsystem - pi//2 delay' incorporates:
     *  EnablePort: '<S915>/Enable'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_p > 0) {
      /* Fcn: '<S915>/Fcn' */
      acdcmg_sim8_1_sm_grid_simulation_B.Fcn_g =
        acdcmg_sim8_1_sm_grid_simulation_B.Add_e * sin
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i) +
        acdcmg_sim8_1_sm_grid_simulation_B.Add1 * cos
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i);

      /* Fcn: '<S915>/Fcn1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Fcn1_n =
        -acdcmg_sim8_1_sm_grid_simulation_B.Add_e * cos
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i) +
        acdcmg_sim8_1_sm_grid_simulation_B.Add1 * sin
        (acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i);
    }

    /* End of Outputs for SubSystem: '<S912>/Subsystem - pi//2 delay' */

    /* Switch: '<S912>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_eg != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Fcn1;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Fcn_g;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Fcn1_n;
    }

    /* End of Switch: '<S912>/Switch' */

    /* SignalConversion generated from: '<S911>/Gain3' incorporates:
     *  Constant: '<S766>/constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[0];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_a[1];
    acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.constant_Value;

    /* Gain: '<S911>/Gain3' */
    for (i_3 = 0; i_3 < 3; i_3 = i_3 + 1) {
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] = 0.0;
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_a[i_3 + 0] *
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[0];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_a[i_3 + 3] *
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[1];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[i_3] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_a[i_3 + 6] *
        acdcmg_sim8_1_sm_grid_simulation_B.TmpSignalConversionAtGain3Inpor[2];
    }

    /* End of Gain: '<S911>/Gain3' */

    /* Gain: '<S766>/Gain' incorporates:
     *  Constant: '<S766>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain_Gain_b *
      acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_pc;

    /* Product: '<S766>/Divide2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide2_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[0] /
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S766>/Divide3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide3_l =
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[1] /
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;

    /* Product: '<S766>/Divide4' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide4 =
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3_h[2] /
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Gain: '<S802>/Integral Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.IntegralGain =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Ki *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum1_i;

    /* Gain: '<S846>/Integral Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.IntegralGain_l =
      acdcmg_sim8_1_sm_grid_simulation_P.Subsystem2_Ki *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum2;

    /* Outputs for Enabled SubSystem: '<S864>/Automatic Gain Control' incorporates:
     *  EnablePort: '<S865>/Enable'
     */
    if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
      /* Constant: '<S864>/Constant1' */
      if (acdcmg_sim8_1_sm_grid_simulation_P.Constant1_Value_p > 0.0) {
        if (!acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE) {
          /* Enable for DiscreteIntegrator: '<S874>/Integ4' */
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_h = 1;

          /* Enable for DiscreteIntegrator: '<S877>/Integ4' */
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_f = 1;
          acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE = true;
        }
      } else {
        if (acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE) {
          acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE = false;
        }
      }

      /* End of Constant: '<S864>/Constant1' */
    }

    if (acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE) {
      /* Gain: '<S881>/Gain3' */
      for (i_1 = 0; i_1 < 3; i_1 = i_1 + 1) {
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] = 0.0;
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] =
          acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] +
          acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain[i_1 + 0] *
          acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0];
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] =
          acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] +
          acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain[i_1 + 3] *
          acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1];
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] =
          acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[i_1] +
          acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain[i_1 + 6] *
          acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2];
      }

      /* End of Gain: '<S881>/Gain3' */

      /* Gain: '<S881>/Gain1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Gain1_n[0] =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_g *
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[0];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain1_n[1] =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_g *
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[1];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain1_n[2] =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_g *
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3_p[2];

      /* RelationalOperator: '<S882>/Compare' incorporates:
       *  Constant: '<S880>/Constant'
       *  Constant: '<S882>/Constant'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Compare_k = (uint8_T)
        (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment ==
         acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant_const);

      /* Outputs for Enabled SubSystem: '<S880>/Subsystem1' */
      acdcmg_sim8_1_sm_gri_Subsystem1
        (acdcmg_sim8_1_sm_grid_simulation_B.Compare_k,
         &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_n[0],
         acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
         &acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_d);

      /* End of Outputs for SubSystem: '<S880>/Subsystem1' */

      /* RelationalOperator: '<S883>/Compare' incorporates:
       *  Constant: '<S880>/Constant'
       *  Constant: '<S883>/Constant'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.Compare_mp = (uint8_T)
        (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment ==
         acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant1_const);

      /* Outputs for Enabled SubSystem: '<S880>/Subsystem - pi//2 delay' */
      acdcmg_sim8_1_Subsystempi2delay
        (acdcmg_sim8_1_sm_grid_simulation_B.Compare_mp,
         &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_n[0],
         acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
         &acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_lj);

      /* End of Outputs for SubSystem: '<S880>/Subsystem - pi//2 delay' */

      /* Switch: '<S880>/Switch' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_k != 0) {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0] =
          acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_d.Fcn;
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1] =
          acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_d.Fcn1;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0] =
          acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_lj.Fcn;
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1] =
          acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_lj.Fcn1;
      }

      /* End of Switch: '<S880>/Switch' */

      /* DiscreteIntegrator: '<S874>/Integ4' */
      if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_h != 0) {
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_j =
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_d;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_j =
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_d +
          acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval *
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0];
      }

      /* End of DiscreteIntegrator: '<S874>/Integ4' */

      /* Saturate: '<S874>/To avoid division  by zero' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j >
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperSat) {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperSat;
      } else if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j <
                 acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSat)
      {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSat;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;
      }

      /* End of Saturate: '<S874>/To avoid division  by zero' */

      /* Fcn: '<S874>/Number of samples per cycle' */
      acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_e = 1.0 /
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 /
        0.00024000000000000003;

      /* Rounding: '<S874>/Rounding Function' */
      acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_n = ceil
        (acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_e);

      /* Gain: '<S874>/Gain' */
      acdcmg_sim8_1_sm_grid_simulation_B.Delay_d =
        acdcmg_sim8_1_sm_grid_simulation_P.Ts_Control *
        acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_n;

      /* S-Function (sfun_discreteVariableDelay): '<S876>/S-Function' */

      /* Level2 S-Function Block: '<S876>/S-Function' (sfun_discreteVariableDelay) */
      {
        SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];
        sfcnOutputs(rts,2);
      }

      /* UnitDelay: '<S875>/Unit Delay' */
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_k =
        acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_g;

      /* DigitalClock: '<S874>/Digital  Clock' */
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[2];

      /* RelationalOperator: '<S874>/Relational Operator' incorporates:
       *  Constant: '<S874>/Constant'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_b =
        (acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 >=
         acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value);

      /* UnitDelay: '<S874>/Unit Delay1' */
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
        acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_j;

      /* Switch: '<S874>/Switch' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_b) {
        /* Sum: '<S875>/Sum1' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l =
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0] -
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_k;

        /* Sum: '<S875>/Sum5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Product4_b =
          acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_e -
          acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_n;

        /* Product: '<S875>/Product5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n =
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_b *
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l;

        /* Gain: '<S875>/Gain1' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l =
          acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_m *
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n;

        /* Sum: '<S875>/Sum4' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l +
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0];

        /* Product: '<S875>/Product2' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l =
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_b /
          acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_e;

        /* Product: '<S875>/Product4' */
        acdcmg_sim8_1_sm_grid_simulation_B.Product4_b =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l *
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n;

        /* Sum: '<S874>/Sum7' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n =
          acdcmg_sim8_1_sm_grid_simulation_B.Integ4_j -
          acdcmg_sim8_1_sm_grid_simulation_B.SFunction_h;

        /* Product: '<S874>/Product' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l =
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_n *
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;

        /* Sum: '<S874>/Sum5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_fp =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_l +
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_b;
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_j =
          acdcmg_sim8_1_sm_grid_simulation_B.Sum5_fp;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_j =
          acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1;
      }

      /* End of Switch: '<S874>/Switch' */

      /* DiscreteIntegrator: '<S877>/Integ4' */
      if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_f != 0) {
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_p =
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_p;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_p =
          acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_p +
          acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_n *
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1];
      }

      /* End of DiscreteIntegrator: '<S877>/Integ4' */

      /* Saturate: '<S877>/To avoid division  by zero' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j >
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperSa_a) {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperSa_a;
      } else if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j <
                 acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSa_f)
      {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSa_f;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;
      }

      /* End of Saturate: '<S877>/To avoid division  by zero' */

      /* Fcn: '<S877>/Number of samples per cycle' */
      acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_a = 1.0 /
        acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 /
        0.00024000000000000003;

      /* Rounding: '<S877>/Rounding Function' */
      acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_e = ceil
        (acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_a);

      /* Gain: '<S877>/Gain' */
      acdcmg_sim8_1_sm_grid_simulation_B.Delay_c =
        acdcmg_sim8_1_sm_grid_simulation_P.Ts_Control *
        acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_e;

      /* S-Function (sfun_discreteVariableDelay): '<S879>/S-Function' */

      /* Level2 S-Function Block: '<S879>/S-Function' (sfun_discreteVariableDelay) */
      {
        SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];
        sfcnOutputs(rts,2);
      }

      /* UnitDelay: '<S878>/Unit Delay' */
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_c =
        acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_p;

      /* DigitalClock: '<S877>/Digital  Clock' */
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
        acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[2];

      /* RelationalOperator: '<S877>/Relational Operator' incorporates:
       *  Constant: '<S877>/Constant'
       */
      acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_b =
        (acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 >=
         acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_p);

      /* UnitDelay: '<S877>/Unit Delay1' */
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
        acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_l;

      /* Switch: '<S877>/Switch' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_b) {
        /* Sum: '<S878>/Sum1' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a =
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1] -
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_c;

        /* Sum: '<S878>/Sum5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Product4_h =
          acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_a -
          acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction_e;

        /* Product: '<S878>/Product5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f =
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_h *
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a;

        /* Gain: '<S878>/Gain1' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a =
          acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_p *
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f;

        /* Sum: '<S878>/Sum4' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a +
          acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1];

        /* Product: '<S878>/Product2' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a =
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_h /
          acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle_a;

        /* Product: '<S878>/Product4' */
        acdcmg_sim8_1_sm_grid_simulation_B.Product4_h =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a *
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f;

        /* Sum: '<S877>/Sum7' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f =
          acdcmg_sim8_1_sm_grid_simulation_B.Integ4_p -
          acdcmg_sim8_1_sm_grid_simulation_B.SFunction_k;

        /* Product: '<S877>/Product' */
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a =
          acdcmg_sim8_1_sm_grid_simulation_B.Sum7_f *
          acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;

        /* Sum: '<S877>/Sum5' */
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_f =
          acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue_a +
          acdcmg_sim8_1_sm_grid_simulation_B.Product4_h;
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_my =
          acdcmg_sim8_1_sm_grid_simulation_B.Sum5_f;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_my =
          acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1;
      }

      /* End of Switch: '<S877>/Switch' */

      /* RealImagToComplex: '<S870>/Real-Imag to Complex' */
      acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.re =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_j;
      acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.im =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_my;

      /* ComplexToMagnitudeAngle: '<S870>/Complex to Magnitude-Angle' */
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 =
        rt_hypotd_snf(acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.re,
                      acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.im);
      acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o2 =
        rt_atan2d_snf(acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.im,
                      acdcmg_sim8_1_sm_grid_simulation_B.RealImagtoComplex.re);

      /* Saturate: '<S865>/Saturation' */
      if (acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 >
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_h) {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_m =
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_h;
      } else if (acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1 <
                 acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_h) {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_m =
          acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat_h;
      } else {
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_m =
          acdcmg_sim8_1_sm_grid_simulation_B.ComplextoMagnitudeAngle_o1;
      }

      /* End of Saturate: '<S865>/Saturation' */

      /* Math: '<S865>/Math Function'
       *
       * About '<S865>/Math Function':
       *  Operator: reciprocal
       */
      acdcmg_sim8_1_sm_grid_simulation_B.MathFunction = 1.0 /
        acdcmg_sim8_1_sm_grid_simulation_B.Saturation_m;
    }

    /* End of Outputs for SubSystem: '<S864>/Automatic Gain Control' */

    /* Gain: '<S894>/Gain3' */
    for (i_2 = 0; i_2 < 3; i_2 = i_2 + 1) {
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] = 0.0;
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_c[i_2 + 0] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[0];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_c[i_2 + 3] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[1];
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] =
        acdcmg_sim8_1_sm_grid_simulation_B.Gain3[i_2] +
        acdcmg_sim8_1_sm_grid_simulation_P.Gain3_Gain_c[i_2 + 6] *
        acdcmg_sim8_1_sm_grid_simulation_B.Kv1_a[2];
    }

    /* End of Gain: '<S894>/Gain3' */

    /* Gain: '<S894>/Gain1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_c[0] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[0];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_c[1] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[1];
    acdcmg_sim8_1_sm_grid_simulation_B.Gain1_c[2] =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain3[2];

    /* RelationalOperator: '<S895>/Compare' incorporates:
     *  Constant: '<S893>/Constant'
     *  Constant: '<S895>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_m = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_n ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant_const_l);

    /* Outputs for Enabled SubSystem: '<S893>/Subsystem1' */
    acdcmg_sim8_1_sm_gri_Subsystem1(acdcmg_sim8_1_sm_grid_simulation_B.Compare_m,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_c[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1);

    /* End of Outputs for SubSystem: '<S893>/Subsystem1' */

    /* RelationalOperator: '<S896>/Compare' incorporates:
     *  Constant: '<S893>/Constant'
     *  Constant: '<S896>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.Compare_h = (uint8_T)
      (acdcmg_sim8_1_sm_grid_simulation_P.AlphaBetaZerotodq0_Alignment_n ==
       acdcmg_sim8_1_sm_grid_simulation_P.CompareToConstant1_const_ox);

    /* Outputs for Enabled SubSystem: '<S893>/Subsystem - pi//2 delay' */
    acdcmg_sim8_1_Subsystempi2delay(acdcmg_sim8_1_sm_grid_simulation_B.Compare_h,
      &acdcmg_sim8_1_sm_grid_simulation_B.Gain1_c[0],
      acdcmg_sim8_1_sm_grid_simulation_B.DiscreteTimeIntegrator_i,
      &acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay);

    /* End of Outputs for SubSystem: '<S893>/Subsystem - pi//2 delay' */

    /* Switch: '<S893>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.Compare_m != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1.Fcn1;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[0] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay.Fcn;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1] =
        acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay.Fcn1;
    }

    /* End of Switch: '<S893>/Switch' */

    /* DiscreteIntegrator: '<S890>/Integ4' */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_m != 0) {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_m =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_i;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_m =
        acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_i +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_p *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1];
    }

    /* End of DiscreteIntegrator: '<S890>/Integ4' */

    /* Saturate: '<S890>/To avoid division  by zero' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j >
        acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperS_at) {
      acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
        acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_UpperS_at;
    } else if (acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j <
               acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSa_m)
    {
      acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
        acdcmg_sim8_1_sm_grid_simulation_P.Toavoiddivisionbyzero_LowerSa_m;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;
    }

    /* End of Saturate: '<S890>/To avoid division  by zero' */

    /* Fcn: '<S890>/Number of samples per cycle' */
    acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle = 1.0 /
      acdcmg_sim8_1_sm_grid_simulation_B.sum2 / 0.00024000000000000003;

    /* Rounding: '<S890>/Rounding Function' */
    acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction = ceil
      (acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle);

    /* Gain: '<S890>/Gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.Delay =
      acdcmg_sim8_1_sm_grid_simulation_P.Ts_Control *
      acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction;

    /* S-Function (sfun_discreteVariableDelay): '<S892>/S-Function' */

    /* Level2 S-Function Block: '<S892>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];
      sfcnOutputs(rts,2);
    }

    /* UnitDelay: '<S891>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_f =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d1;

    /* DigitalClock: '<S890>/Digital  Clock' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[2];

    /* RelationalOperator: '<S890>/Relational Operator' incorporates:
     *  Constant: '<S890>/Constant'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_c =
      (acdcmg_sim8_1_sm_grid_simulation_B.sum2 >=
       acdcmg_sim8_1_sm_grid_simulation_P.Constant_Value_md);

    /* UnitDelay: '<S890>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_o;

    /* Switch: '<S890>/Switch' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator_c) {
      /* Sum: '<S891>/Sum1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1] -
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_f;

      /* Sum: '<S891>/Sum5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Product4 =
        acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle -
        acdcmg_sim8_1_sm_grid_simulation_B.RoundingFunction;

      /* Product: '<S891>/Product5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Product4 *
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue;

      /* Gain: '<S891>/Gain1' */
      acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue =
        acdcmg_sim8_1_sm_grid_simulation_P.Gain1_Gain_k *
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p;

      /* Sum: '<S891>/Sum4' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue +
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1];

      /* Product: '<S891>/Product2' */
      acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue =
        acdcmg_sim8_1_sm_grid_simulation_B.Product4 /
        acdcmg_sim8_1_sm_grid_simulation_B.Numberofsamplespercycle;

      /* Product: '<S891>/Product4' */
      acdcmg_sim8_1_sm_grid_simulation_B.Product4 =
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue *
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p;

      /* Sum: '<S890>/Sum7' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_m -
        acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o;

      /* Product: '<S890>/Product' */
      acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum7_p *
        acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_j;

      /* Sum: '<S890>/Sum5' */
      acdcmg_sim8_1_sm_grid_simulation_B.Sum5_m =
        acdcmg_sim8_1_sm_grid_simulation_B.Meanvalue +
        acdcmg_sim8_1_sm_grid_simulation_B.Product4;
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dcz =
        acdcmg_sim8_1_sm_grid_simulation_B.Sum5_m;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dcz =
        acdcmg_sim8_1_sm_grid_simulation_B.sum2;
    }

    /* End of Switch: '<S890>/Switch' */

    /* Product: '<S864>/Divide' */
    acdcmg_sim8_1_sm_grid_simulation_B.Divide_g =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dcz *
      acdcmg_sim8_1_sm_grid_simulation_B.MathFunction;

    /* DiscreteTransferFcn: '<S866>/Discrete Derivative ' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_tmp =
      (acdcmg_sim8_1_sm_grid_simulation_B.Divide_g -
       acdcmg_sim8_1_sm_grid_simulation_P.DiscreteDerivative_DenCoef[1] *
       acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_states) /
      acdcmg_sim8_1_sm_grid_simulation_P.DiscreteDerivative_DenCoef[0];
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 = 1.0 *
      acdcmg_sim8_1_sm_grid_simulation_P.Discrete_Kd *
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_tmp +
      acdcmg_sim8_1_sm_grid_simulation_ConstP.DiscreteDerivative_rtw_collapse[1]
      * acdcmg_sim8_1_sm_grid_simulation_P.Discrete_Kd *
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_states;

    /* DiscreteIntegrator: '<S866>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b;

    /* Gain: '<S866>/Kp4' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum3 =
      acdcmg_sim8_1_sm_grid_simulation_P.Discrete_Kp *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_g;

    /* Sum: '<S866>/Sum6' */
    acdcmg_sim8_1_sm_grid_simulation_B.x2k =
      (acdcmg_sim8_1_sm_grid_simulation_B.sum3 +
       acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b) +
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;

    /* Saturate: '<S866>/Saturation1' */
    if (acdcmg_sim8_1_sm_grid_simulation_B.x2k >
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation1_UpperSat) {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation1 =
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation1_UpperSat;
    } else if (acdcmg_sim8_1_sm_grid_simulation_B.x2k <
               acdcmg_sim8_1_sm_grid_simulation_P.Saturation1_LowerSat) {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation1 =
        acdcmg_sim8_1_sm_grid_simulation_P.Saturation1_LowerSat;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation1 =
        acdcmg_sim8_1_sm_grid_simulation_B.x2k;
    }

    /* End of Saturate: '<S866>/Saturation1' */

    /* Gain: '<S864>/Gain10' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain10_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation1;

    /* RateLimiter: '<S864>/Rate Limiter' */
    tmp_0 = acdcmg_sim8_1_sm_grid_simulation_B.sum2 -
      acdcmg_sim8_1_sm_grid_simulation_DW.PrevY_e;
    if (tmp_0 > acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_RisingLim_j) {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
        acdcmg_sim8_1_sm_grid_simulation_DW.PrevY_e +
        acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_RisingLim_j;
    } else if (tmp_0 <
               acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_FallingLim_i) {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
        acdcmg_sim8_1_sm_grid_simulation_DW.PrevY_e +
        acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_FallingLim_i;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b =
        acdcmg_sim8_1_sm_grid_simulation_B.sum2;
    }

    acdcmg_sim8_1_sm_grid_simulation_DW.PrevY_e =
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b;

    /* End of RateLimiter: '<S864>/Rate Limiter' */

    /* UnitDelay: '<S886>/Delay_x1' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x1_DSTATE;

    /* Gain: '<S887>/A11' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum3 =
      acdcmg_sim8_1_sm_grid_simulation_P.A11_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;

    /* UnitDelay: '<S886>/Delay_x2' */
    acdcmg_sim8_1_sm_grid_simulation_B.x2k =
      acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x2_DSTATE;

    /* Gain: '<S887>/A12' */
    acdcmg_sim8_1_sm_grid_simulation_B.A12 =
      acdcmg_sim8_1_sm_grid_simulation_P.A12_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.x2k;

    /* Gain: '<S887>/A21' */
    acdcmg_sim8_1_sm_grid_simulation_B.C12 =
      acdcmg_sim8_1_sm_grid_simulation_P.A21_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;

    /* Gain: '<S887>/A22' */
    acdcmg_sim8_1_sm_grid_simulation_B.C11 =
      acdcmg_sim8_1_sm_grid_simulation_P.A22_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.x2k;

    /* Sum: '<S887>/sum2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Duk =
      acdcmg_sim8_1_sm_grid_simulation_B.sum3 +
      acdcmg_sim8_1_sm_grid_simulation_B.A12;

    /* Sum: '<S887>/sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum3 =
      acdcmg_sim8_1_sm_grid_simulation_B.C12 +
      acdcmg_sim8_1_sm_grid_simulation_B.C11;

    /* Gain: '<S888>/B11' */
    acdcmg_sim8_1_sm_grid_simulation_B.C11 =
      acdcmg_sim8_1_sm_grid_simulation_P.B11_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b;

    /* Sum: '<S886>/A*x1(k) + B*u1(k) ' */
    acdcmg_sim8_1_sm_grid_simulation_B.x1k1 =
      acdcmg_sim8_1_sm_grid_simulation_B.Duk +
      acdcmg_sim8_1_sm_grid_simulation_B.C11;

    /* Gain: '<S888>/B21' */
    acdcmg_sim8_1_sm_grid_simulation_B.Duk =
      acdcmg_sim8_1_sm_grid_simulation_P.B21_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b;

    /* Sum: '<S886>/A*x2(k) + B*u2(k)' */
    acdcmg_sim8_1_sm_grid_simulation_B.x2k1 =
      acdcmg_sim8_1_sm_grid_simulation_B.sum3 +
      acdcmg_sim8_1_sm_grid_simulation_B.Duk;

    /* Gain: '<S886>/D*u(k)' */
    acdcmg_sim8_1_sm_grid_simulation_B.Duk =
      acdcmg_sim8_1_sm_grid_simulation_P.Duk_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter_b;

    /* Gain: '<S889>/C11' */
    acdcmg_sim8_1_sm_grid_simulation_B.C11 =
      acdcmg_sim8_1_sm_grid_simulation_P.C11_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;

    /* Gain: '<S889>/C12' */
    acdcmg_sim8_1_sm_grid_simulation_B.C12 =
      acdcmg_sim8_1_sm_grid_simulation_P.C12_Gain *
      acdcmg_sim8_1_sm_grid_simulation_B.x2k;

    /* Sum: '<S889>/sum2' */
    acdcmg_sim8_1_sm_grid_simulation_B.sum2 =
      acdcmg_sim8_1_sm_grid_simulation_B.C11 +
      acdcmg_sim8_1_sm_grid_simulation_B.C12;

    /* Sum: '<S886>/C*X(k)+D*u(k)' */
    acdcmg_sim8_1_sm_grid_simulation_B.yk =
      acdcmg_sim8_1_sm_grid_simulation_B.Duk +
      acdcmg_sim8_1_sm_grid_simulation_B.sum2;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Product: '<S980>/Product2' incorporates:
     *  Constant: '<S980>/Rsh_array'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_B.Vd / (313.3991 *
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Nser /
      acdcmg_sim8_1_sm_grid_simulation_P.PVArray_Npar) *
      acdcmg_sim8_1_sm_grid_simulation_B.SSref;

    /* Product: '<S980>/Product5' incorporates:
     *  Constant: '<S980>/Rsh_array_5%Sref'
     */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_B.Vd /
      acdcmg_sim8_1_sm_grid_simulation_P.Rsh_array_5Sref_Value;

    /* Sum: '<S980>/Add1' */
    acdcmg_sim8_1_sm_grid_simulation_B.Add1_n =
      (acdcmg_sim8_1_sm_grid_simulation_B.Idiode +
       acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk) -
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na;

    /* Gain: '<S974>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_dk =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ij *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[27];

    /* Gain: '<S976>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_na =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ln *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o[16];

    /* Gain: '<S1029>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_l =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lcn *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[25];

    /* Gain: '<S1032>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_c =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_em *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[26];

    /* Gain: '<S1035>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_f =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_pe *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[24];

    /* Gain: '<S1041>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fv =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_is *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[10];

    /* Gain: '<S1044>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_kx =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_kj *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[11];

    /* Gain: '<S1047>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_da =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ap *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k[9];

    /* S-Function (fts5stub): '<S1051>/S-Function' */

    /* Level2 S-Function Block: '<S1051>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[59];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1063>/S-Function' */

    /* Level2 S-Function Block: '<S1063>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[60];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1051>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_fq =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_hr +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_fr;

    /* Gain: '<S1051>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_am =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_nl *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_fq;

    /* S-Function (ssn_sfun_v1): '<S1218>/State-Space' */

    /* Level2 S-Function Block: '<S1218>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[61];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1055>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fb =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_be *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace;

    /* S-Function (fts5stub): '<S1052>/S-Function' */

    /* Level2 S-Function Block: '<S1052>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[62];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1064>/S-Function' */

    /* Level2 S-Function Block: '<S1064>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[63];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1052>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_or =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_p +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_mr;

    /* Gain: '<S1052>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_np =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_b *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_or;

    /* S-Function (ssn_sfun_v1): '<S1221>/State-Space' */

    /* Level2 S-Function Block: '<S1221>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[64];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1058>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p2s =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_br *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_i;

    /* S-Function (fts5stub): '<S1053>/S-Function' */

    /* Level2 S-Function Block: '<S1053>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[65];
      sfcnOutputs(rts,1);
    }

    /* S-Function (fts5stub): '<S1065>/S-Function' */

    /* Level2 S-Function Block: '<S1065>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[66];
      sfcnOutputs(rts,1);
    }

    /* Sum: '<S1053>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_a =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_dv +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_jf;

    /* Gain: '<S1053>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_d4 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_ij *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_a;

    /* S-Function (ssn_sfun_v1): '<S1222>/State-Space' */

    /* Level2 S-Function Block: '<S1222>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[67];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1061>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_nf =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_gy *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o;

    /* Sum: '<S1063>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_k =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_kt +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_k4;

    /* Gain: '<S1063>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_jt =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_jz *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_k;

    /* S-Function (ssn_sfun_v1): '<S1223>/State-Space' */

    /* Level2 S-Function Block: '<S1223>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[68];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1067>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_f4 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ky *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o0;

    /* Sum: '<S1064>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_gy =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_gg +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_a;

    /* Gain: '<S1064>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ck =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_j4qf *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_gy;

    /* S-Function (ssn_sfun_v1): '<S1224>/State-Space' */

    /* Level2 S-Function Block: '<S1224>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[69];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1070>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ox =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ek *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_b;

    /* Sum: '<S1065>/Sum3' */
    acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ou =
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_hv +
      acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m4o;

    /* Gain: '<S1065>/Gain2' */
    acdcmg_sim8_1_sm_grid_simulation_B.Gain2_f4 =
      acdcmg_sim8_1_sm_grid_simulation_P.Gain2_Gain_in *
      acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ou;

    /* S-Function (ssn_sfun_v1): '<S1225>/State-Space' */

    /* Level2 S-Function Block: '<S1225>/State-Space' (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[70];
      sfcnOutputs(rts,1);
    }

    /* Gain: '<S1073>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fj =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_fi *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_n;

    /* Gain: '<S1081>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pp =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cb *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[4];

    /* Gain: '<S1084>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jz =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_p3 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[5];

    /* Gain: '<S1087>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jt =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bi *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok[3];

    /* Gain: '<S1093>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b4 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_kk1 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[28];

    /* Gain: '<S1096>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_mt =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bjp *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[29];

    /* Gain: '<S1099>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_hx =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_m4 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[27];

    /* Gain: '<S1107>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_i2 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lv *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[32];

    /* Gain: '<S1110>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_c5 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_c4d *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[34];

    /* Gain: '<S1113>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p1 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ns *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[30];

    /* Gain: '<S1119>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fx =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cz *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[33];

    /* Gain: '<S1122>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bt =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_lm *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[35];

    /* Gain: '<S1125>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_gw =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_ef *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[31];

    /* Gain: '<S1133>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_nr =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_cr0 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[37];

    /* Gain: '<S1136>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j2 =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_d4 *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[38];

    /* Gain: '<S1139>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ei =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_bb *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1[36];

    /* Gain: '<S1145>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_el =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_je *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[7];

    /* Gain: '<S1148>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bj =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_kr *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[8];

    /* Gain: '<S1151>/do not delete this gain' */
    acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_hi =
      acdcmg_sim8_1_sm_grid_simulation_P.donotdeletethisgain_Gain_no *
      acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od[6];
  }
}

/* Model update function */
void acdcmg_sim8_1_sm_grid_simulation_update(void)
{
  real_T *lastU;
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S2>/S-Function' */
    acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PreviousInput =
      acdcmg_sim8_1_sm_grid_simulation_B.Sum;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Update for DiscreteIntegrator: '<S149>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE +
      acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_gainval *
      acdcmg_sim8_1_sm_grid_simulation_B.MPPTGain;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE >=
        acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_UpperSat) {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE =
        acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_UpperSat;
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE <=
          acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_LowerSat) {
        acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE =
          acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_LowerSat;
      }
    }

    /* End of Update for DiscreteIntegrator: '<S149>/Discrete-Time Integrator' */
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S94>/it init1' incorporates:
     *  Constant: '<S94>/Constant12'
     */
    acdcmg_sim8_1_sm_grid_simulation_DW.itinit1_PreviousInput =
      acdcmg_sim8_1_sm_grid_simulation_P.Constant12_Value;

    /* Update for DiscreteTransferFcn: '<S94>/Current filter' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Currentfilter_states =
      (acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku -
       acdcmg_sim8_1_sm_grid_simulation_P.Currentfilter_DenCoef[1] *
       acdcmg_sim8_1_sm_grid_simulation_DW.Currentfilter_states) /
      acdcmg_sim8_1_sm_grid_simulation_P.Currentfilter_DenCoef[0];

    /* Update for Memory: '<S94>/it init' */
    acdcmg_sim8_1_sm_grid_simulation_DW.itinit_PreviousInput =
      acdcmg_sim8_1_sm_grid_simulation_B.Gain2_d;

    /* Update for DiscreteIntegrator: '<S94>/int(i)' */
    acdcmg_sim8_1_sm_grid_simulation_DW.inti_IC_LOADING = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE +
      acdcmg_sim8_1_sm_grid_simulation_P.inti_gainval *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ku;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE >=
        acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
        acdcmg_sim8_1_sm_grid_simulation_P.inti_UpperSat;
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE <=
          acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat) {
        acdcmg_sim8_1_sm_grid_simulation_DW.inti_DSTATE =
          acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat;
      }
    }

    if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 > 0.0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState = 1;
    } else if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 < 0.0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState = -1;
    } else if (acdcmg_sim8_1_sm_grid_simulation_B.DataTypeConversion2 == 0.0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState = 0;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState = 2;
    }

    /* End of Update for DiscreteIntegrator: '<S94>/int(i)' */

    /* Update for DiscreteIntegrator: '<S99>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_n =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_n +
      acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_gainva_g *
      acdcmg_sim8_1_sm_grid_simulation_B.Gain1;

    /* Update for Memory: '<S94>/Memory2' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory2_PreviousInput =
      acdcmg_sim8_1_sm_grid_simulation_B.R1;

    /* Update for Delay: '<S132>/Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.error;

    /* Update for UnitDelay: '<S11>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_on;

    /* Update for UnitDelay: '<S12>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_p =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain;

    /* Update for UnitDelay: '<S11>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p2;

    /* Update for UnitDelay: '<S12>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_k =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g5;

    /* Update for UnitDelay: '<S766>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide2_h;
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide3_l;
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Divide4;

    /* Update for S-Function (fts5stub): '<S1027>/S-Function' */
    /* Level2 S-Function Block: '<S1027>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[2];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1039>/S-Function' */
    /* Level2 S-Function Block: '<S1039>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[3];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1025>/S-Function' */
    /* Level2 S-Function Block: '<S1025>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[4];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1037>/S-Function' */
    /* Level2 S-Function Block: '<S1037>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[5];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1026>/S-Function' */
    /* Level2 S-Function Block: '<S1026>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[6];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1038>/S-Function' */
    /* Level2 S-Function Block: '<S1038>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[7];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1091>/S-Function' */
    /* Level2 S-Function Block: '<S1091>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[8];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1079>/S-Function' */
    /* Level2 S-Function Block: '<S1079>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[9];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1089>/S-Function' */
    /* Level2 S-Function Block: '<S1089>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[10];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1077>/S-Function' */
    /* Level2 S-Function Block: '<S1077>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[11];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1090>/S-Function' */
    /* Level2 S-Function Block: '<S1090>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[12];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1078>/S-Function' */
    /* Level2 S-Function Block: '<S1078>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[13];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1105>/S-Function' */
    /* Level2 S-Function Block: '<S1105>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[14];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1117>/S-Function' */
    /* Level2 S-Function Block: '<S1117>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[15];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1103>/S-Function' */
    /* Level2 S-Function Block: '<S1103>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[16];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1115>/S-Function' */
    /* Level2 S-Function Block: '<S1115>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[17];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1104>/S-Function' */
    /* Level2 S-Function Block: '<S1104>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[18];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1116>/S-Function' */
    /* Level2 S-Function Block: '<S1116>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[19];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1131>/S-Function' */
    /* Level2 S-Function Block: '<S1131>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[20];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1143>/S-Function' */
    /* Level2 S-Function Block: '<S1143>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[21];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1129>/S-Function' */
    /* Level2 S-Function Block: '<S1129>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[22];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1141>/S-Function' */
    /* Level2 S-Function Block: '<S1141>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[23];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1130>/S-Function' */
    /* Level2 S-Function Block: '<S1130>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[24];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1142>/S-Function' */
    /* Level2 S-Function Block: '<S1142>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[25];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for Enabled SubSystem: '<S725>/Signal generator' */
    acdcmg_s_Signalgenerator_Update
      (&acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator,
       &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator,
       &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator);

    /* End of Update for SubSystem: '<S725>/Signal generator' */
  }

  /* Update for VariableTransportDelay: '<S69>/Variable Time Delay' incorporates:
   *  Constant: '<S69>/Constant'
   */
  {
    real_T **uBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs
      [0];
    real_T **tBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs
      [1];
    real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head =
      ((acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head <
        (acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.CircularBufSize
         -1)) ?
       (acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head+1) : 0);
    if (acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head ==
        acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail) {
      acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail =
        ((acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail <
          (acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.CircularBufSize
           -1)) ?
         (acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail+1) :
         0);
    }

    (*tBuffer)[acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head]
      = simTime;
    (*uBuffer)[acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head]
      = acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pl;

    /* when use fixed buffer, reset solver at when buffer is updated
     * to avoid output consistency fail.
     */
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for UnitDelay: '<S987>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_h =
      acdcmg_sim8_1_sm_grid_simulation_B.Add1_n;

    /* Update for Memory: '<S642>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1[2];
  }

  /* Update for Enabled SubSystem: '<S600>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_kx);

  /* End of Update for SubSystem: '<S600>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S600>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b4);

  /* End of Update for SubSystem: '<S600>/RMS ' */

  /* Update for Enabled SubSystem: '<S599>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_k);

  /* End of Update for SubSystem: '<S599>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S599>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bh);

  /* End of Update for SubSystem: '<S599>/RMS ' */

  /* Update for Enabled SubSystem: '<S601>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c0);

  /* End of Update for SubSystem: '<S601>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S601>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_a);

  /* End of Update for SubSystem: '<S601>/RMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S666>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_d[2];
  }

  /* Update for Enabled SubSystem: '<S450>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_i);

  /* End of Update for SubSystem: '<S450>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S450>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_c);

  /* End of Update for SubSystem: '<S450>/RMS ' */

  /* Update for Enabled SubSystem: '<S449>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_d);

  /* End of Update for SubSystem: '<S449>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S449>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_m);

  /* End of Update for SubSystem: '<S449>/RMS ' */

  /* Update for Enabled SubSystem: '<S451>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_e);

  /* End of Update for SubSystem: '<S451>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S451>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cw);

  /* End of Update for SubSystem: '<S451>/RMS ' */

  /* Update for Enabled SubSystem: '<S510>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ae);

  /* End of Update for SubSystem: '<S510>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S510>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j);

  /* End of Update for SubSystem: '<S510>/RMS ' */

  /* Update for Enabled SubSystem: '<S509>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_m);

  /* End of Update for SubSystem: '<S509>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S509>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_l);

  /* End of Update for SubSystem: '<S509>/RMS ' */

  /* Update for Enabled SubSystem: '<S511>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_b);

  /* End of Update for SubSystem: '<S511>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S511>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_o);

  /* End of Update for SubSystem: '<S511>/RMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Enabled SubSystem: '<S955>/Signal generator' */
    acdcmg_s_Signalgenerator_Update
      (&acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j,
       &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator_j,
       &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator_j);

    /* End of Update for SubSystem: '<S955>/Signal generator' */
  }

  /* Update for Enabled SubSystem: '<S480>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ad);

  /* End of Update for SubSystem: '<S480>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S480>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b);

  /* End of Update for SubSystem: '<S480>/RMS ' */

  /* Update for Enabled SubSystem: '<S479>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_an);

  /* End of Update for SubSystem: '<S479>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S479>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p);

  /* End of Update for SubSystem: '<S479>/RMS ' */

  /* Update for Enabled SubSystem: '<S481>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c);

  /* End of Update for SubSystem: '<S481>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S481>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_n);

  /* End of Update for SubSystem: '<S481>/RMS ' */

  /* Update for Enabled SubSystem: '<S540>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dq);

  /* End of Update for SubSystem: '<S540>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S540>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_mf);

  /* End of Update for SubSystem: '<S540>/RMS ' */

  /* Update for Enabled SubSystem: '<S539>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dw);

  /* End of Update for SubSystem: '<S539>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S539>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j2);

  /* End of Update for SubSystem: '<S539>/RMS ' */

  /* Update for Enabled SubSystem: '<S541>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_g);

  /* End of Update for SubSystem: '<S541>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S541>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_h);

  /* End of Update for SubSystem: '<S541>/RMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S702>/Memory1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_j[2];

    /* Update for Memory: '<S630>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_f[2];

    /* Update for Memory: '<S678>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_n[2];
  }

  /* Update for Enabled SubSystem: '<S420>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j);

  /* End of Update for SubSystem: '<S420>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S420>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_il);

  /* End of Update for SubSystem: '<S420>/RMS ' */

  /* Update for Enabled SubSystem: '<S419>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_p);

  /* End of Update for SubSystem: '<S419>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S419>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_i);

  /* End of Update for SubSystem: '<S419>/RMS ' */

  /* Update for Enabled SubSystem: '<S421>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_a);

  /* End of Update for SubSystem: '<S421>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S421>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_id);

  /* End of Update for SubSystem: '<S421>/RMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S408>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_i[2];
  }

  /* Update for Enabled SubSystem: '<S570>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_h);

  /* End of Update for SubSystem: '<S570>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S570>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cc);

  /* End of Update for SubSystem: '<S570>/RMS ' */

  /* Update for Enabled SubSystem: '<S569>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ay);

  /* End of Update for SubSystem: '<S569>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S569>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p2);

  /* End of Update for SubSystem: '<S569>/RMS ' */

  /* Update for Enabled SubSystem: '<S571>/TrueRMS ' */
  acdcmg_sim8_1__TrueRMS_a_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_gs);

  /* End of Update for SubSystem: '<S571>/TrueRMS ' */

  /* Update for Enabled SubSystem: '<S571>/RMS ' */
  acdcmg_sim8_1_sm_g_RMS_n_Update(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_B.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cb);

  /* End of Update for SubSystem: '<S571>/RMS ' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S654>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_g[2];

    /* Update for DiscreteIntegrator: '<S717>/Integ4' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4 +
      acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_c *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;

    /* Update for S-Function (sfun_discreteVariableDelay): '<S718>/S-Function' */
    /* Level2 S-Function Block: '<S718>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for UnitDelay: '<S717>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_kd =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;

    /* Update for UnitDelay: '<S717>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_c =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l;
  }

  /* Update for TransportDelay: '<S719>/Transport Delay' */
  {
    real_T **uBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[0];
    real_T **tBuffer = (real_T**)
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[1];
    real_T simTime = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head =
      ((acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head <
        (acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.CircularBufSize
         -1)) ? (acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head+1)
       : 0);
    if (acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head ==
        acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail) {
      acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail =
        ((acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail <
          (acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.CircularBufSize
           -1)) ? (acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail
                   +1) : 0);
    }

    (*tBuffer)[acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head] =
      simTime;
    (*uBuffer)[acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head] =
      acdcmg_sim8_1_sm_grid_simulation_B.integrator;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S719>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_l =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_g1;
  }

  /* Update for Derivative: '<S166>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable;

  /* End of Update for Derivative: '<S166>/Derivative' */

  /* Update for Derivative: '<S170>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_j;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_k;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_j;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_k;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i;

  /* End of Update for Derivative: '<S170>/Derivative' */

  /* Update for Derivative: '<S174>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_j;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_j;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n;

  /* End of Update for Derivative: '<S174>/Derivative' */

  /* Update for Derivative: '<S183>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_b;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_m;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_b;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_m;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_mg;

  /* End of Update for Derivative: '<S183>/Derivative' */

  /* Update for Derivative: '<S187>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_e;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_o;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_e;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_o;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_e;

  /* End of Update for Derivative: '<S187>/Derivative' */

  /* Update for Derivative: '<S191>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_o;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_kv;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_o;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_kv;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_g;

  /* End of Update for Derivative: '<S191>/Derivative' */

  /* Update for Derivative: '<S200>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_a;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_p;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_a;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_p;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_he;

  /* End of Update for Derivative: '<S200>/Derivative' */

  /* Update for Derivative: '<S204>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_c;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_h;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_c;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_h;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_heh;

  /* End of Update for Derivative: '<S204>/Derivative' */

  /* Update for Derivative: '<S208>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_p;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_c;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_p;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_c;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_nz;

  /* End of Update for Derivative: '<S208>/Derivative' */

  /* Update for Derivative: '<S217>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_d;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_i;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_d;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_i;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_o;

  /* End of Update for Derivative: '<S217>/Derivative' */

  /* Update for Derivative: '<S221>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_os;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ot;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_os;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ot;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_gu;

  /* End of Update for Derivative: '<S221>/Derivative' */

  /* Update for Derivative: '<S225>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_f;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ig;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_f;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ig;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dd;

  /* End of Update for Derivative: '<S225>/Derivative' */

  /* Update for Derivative: '<S234>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_n;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_n;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_n;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_n;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_i1;

  /* End of Update for Derivative: '<S234>/Derivative' */

  /* Update for Derivative: '<S238>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_nc;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_nc;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_b;

  /* End of Update for Derivative: '<S238>/Derivative' */

  /* Update for Derivative: '<S242>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_h;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ik;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_h;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ik;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_l;

  /* End of Update for Derivative: '<S242>/Derivative' */

  /* Update for Derivative: '<S251>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g3;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ml;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g3;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_ml;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_p;

  /* End of Update for Derivative: '<S251>/Derivative' */

  /* Update for Derivative: '<S255>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_dl;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_l;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_dl;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_l;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_d;

  /* End of Update for Derivative: '<S255>/Derivative' */

  /* Update for Derivative: '<S259>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g4;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d2;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_g4;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_d2;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_c;

  /* End of Update for Derivative: '<S259>/Derivative' */

  /* Update for Derivative: '<S264>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bj;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nw;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bj;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nw;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_dn;

  /* End of Update for Derivative: '<S264>/Derivative' */

  /* Update for Derivative: '<S268>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_og;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_a;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_og;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_a;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_j;

  /* End of Update for Derivative: '<S268>/Derivative' */

  /* Update for Derivative: '<S272>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_l;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_am;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_l;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_am;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_n5;

  /* End of Update for Derivative: '<S272>/Derivative' */

  /* Update for Derivative: '<S276>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_gf;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_b;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_gf;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_b;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_h;

  /* End of Update for Derivative: '<S276>/Derivative' */

  /* Update for Derivative: '<S280>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_ai;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_pk;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_ai;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_pk;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_lz;

  /* End of Update for Derivative: '<S280>/Derivative' */

  /* Update for Derivative: '<S284>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_od;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_cf;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_od;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_cf;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_m;

  /* End of Update for Derivative: '<S284>/Derivative' */

  /* Update for Derivative: '<S119>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_odu;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nk;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_odu;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_nk;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_pt;

  /* End of Update for Derivative: '<S119>/Derivative' */

  /* Update for Derivative: '<S123>/Derivative' */
  if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bc;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg == (rtInf)) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_hw;
  } else if (acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 <
             acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg) {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeA_bc;
  } else {
    acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    lastU = &acdcmg_sim8_1_sm_grid_simulation_DW.LastUAtTimeB_hw;
  }

  *lastU = acdcmg_sim8_1_sm_grid_simulation_B.LookUpTable_ls;

  /* End of Update for Derivative: '<S123>/Derivative' */
  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for UnitDelay: '<S11>/Unit Delay2' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;

    /* Update for UnitDelay: '<S11>/Unit Delay3' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h1;

    /* Update for Delay: '<S149>/Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE_b =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;

    /* Update for Delay: '<S149>/Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Delay1_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;

    /* Update for DiscreteIntegrator: '<S152>/Integ4' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_n = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_n =
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_g +
      acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_j *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;

    /* Update for S-Function (sfun_discreteVariableDelay): '<S153>/S-Function' */
    /* Level2 S-Function Block: '<S153>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for UnitDelay: '<S152>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;

    /* Update for UnitDelay: '<S152>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pa =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dc;

    /* Update for DiscreteIntegrator: '<S154>/Integ4' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_j = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_l =
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_b +
      acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_m *
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;

    /* Update for S-Function (sfun_discreteVariableDelay): '<S155>/S-Function' */
    /* Level2 S-Function Block: '<S155>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for UnitDelay: '<S154>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_o =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;

    /* Update for UnitDelay: '<S154>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pd =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_l5;

    /* Update for UnitDelay: '<S12>/Unit Delay2' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE_b =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g;

    /* Update for UnitDelay: '<S12>/Unit Delay3' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE_e =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pv;

    /* Update for DiscreteIntegrator: '<S157>/Integ4' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_l = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_c =
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_k +
      acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_cw *
      acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay3_e;

    /* Update for S-Function (sfun_discreteVariableDelay): '<S158>/S-Function' */
    /* Level2 S-Function Block: '<S158>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S690>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[0] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[1] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[1];
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[2] =
      acdcmg_sim8_1_sm_grid_simulation_B.Kv1_c[2];
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for Memory: '<S48>/Memory' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_n =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;

    /* Update for Memory: '<S48>/Memory1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput_p =
      acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Update for DiscreteIntegrator: '<S864>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h +
      acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_gainva_n *
      acdcmg_sim8_1_sm_grid_simulation_B.Saturation1;
    if ((int32_T)acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator > 0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_PrevRese = 1;
    } else if ((int32_T)acdcmg_sim8_1_sm_grid_simulation_B.RelationalOperator <
               0) {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_PrevRese = -1;
    } else {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_PrevRese = 0;
    }

    /* End of Update for DiscreteIntegrator: '<S864>/Discrete-Time Integrator' */

    /* Update for DiscreteIntegrator: '<S805>/Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE +
      acdcmg_sim8_1_sm_grid_simulation_P.Integrator_gainval *
      acdcmg_sim8_1_sm_grid_simulation_B.IntegralGain;

    /* Update for DiscreteIntegrator: '<S800>/Filter' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE +
      acdcmg_sim8_1_sm_grid_simulation_P.Filter_gainval *
      acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient;

    /* Update for UnitDelay: '<S864>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_oz =
      acdcmg_sim8_1_sm_grid_simulation_B.yk;

    /* Update for DiscreteIntegrator: '<S849>/Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE_m =
      acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE_m +
      acdcmg_sim8_1_sm_grid_simulation_P.Integrator_gainval_d *
      acdcmg_sim8_1_sm_grid_simulation_B.IntegralGain_l;

    /* Update for DiscreteIntegrator: '<S844>/Filter' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE_p =
      acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE_p +
      acdcmg_sim8_1_sm_grid_simulation_P.Filter_gainval_o *
      acdcmg_sim8_1_sm_grid_simulation_B.FilterCoefficient_j;

    /* Update for Enabled SubSystem: '<S864>/Automatic Gain Control' incorporates:
     *  EnablePort: '<S865>/Enable'
     */
    if (acdcmg_sim8_1_sm_grid_simulation_DW.AutomaticGainControl_MODE) {
      /* Update for DiscreteIntegrator: '<S874>/Integ4' */
      acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_h = 0;
      acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_d =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_j +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0];

      /* Update for S-Function (sfun_discreteVariableDelay): '<S876>/S-Function' */
      /* Level2 S-Function Block: '<S876>/S-Function' (sfun_discreteVariableDelay) */
      {
        SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];
        sfcnUpdate(rts,2);
        if (ssGetErrorStatus(rts) != (NULL))
          return;
      }

      /* Update for UnitDelay: '<S875>/Unit Delay' */
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_g =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[0];

      /* Update for UnitDelay: '<S874>/Unit Delay1' */
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_j =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_j;

      /* Update for DiscreteIntegrator: '<S877>/Integ4' */
      acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_f = 0;
      acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Integ4_p +
        acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_n *
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1];

      /* Update for S-Function (sfun_discreteVariableDelay): '<S879>/S-Function' */
      /* Level2 S-Function Block: '<S879>/S-Function' (sfun_discreteVariableDelay) */
      {
        SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];
        sfcnUpdate(rts,2);
        if (ssGetErrorStatus(rts) != (NULL))
          return;
      }

      /* Update for UnitDelay: '<S878>/Unit Delay' */
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_p =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_p[1];

      /* Update for UnitDelay: '<S877>/Unit Delay1' */
      acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_l =
        acdcmg_sim8_1_sm_grid_simulation_B.Switch_my;
    }

    /* End of Update for SubSystem: '<S864>/Automatic Gain Control' */

    /* Update for DiscreteIntegrator: '<S890>/Integ4' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_m = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_i =
      acdcmg_sim8_1_sm_grid_simulation_B.Integ4_m +
      acdcmg_sim8_1_sm_grid_simulation_P.Integ4_gainval_p *
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1];

    /* Update for S-Function (sfun_discreteVariableDelay): '<S892>/S-Function' */
    /* Level2 S-Function Block: '<S892>/S-Function' (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];
      sfcnUpdate(rts,2);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for UnitDelay: '<S891>/Unit Delay' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d1 =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_f3[1];

    /* Update for UnitDelay: '<S890>/Unit Delay1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_o =
      acdcmg_sim8_1_sm_grid_simulation_B.Switch_dcz;

    /* Update for DiscreteTransferFcn: '<S866>/Discrete Derivative ' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_states =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_tmp;

    /* Update for DiscreteIntegrator: '<S866>/Discrete-Time Integrator' */
    acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b =
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b +
      acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_gainva_f *
      acdcmg_sim8_1_sm_grid_simulation_B.Divide_g;
    if (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b >=
        acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_UpperS_i) {
      acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b =
        acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_UpperS_i;
    } else {
      if (acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b <=
          acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_LowerS_g) {
        acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b =
          acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_LowerS_g;
      }
    }

    /* End of Update for DiscreteIntegrator: '<S866>/Discrete-Time Integrator' */

    /* Update for UnitDelay: '<S886>/Delay_x1' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x1_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.x1k1;

    /* Update for UnitDelay: '<S886>/Delay_x2' */
    acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x2_DSTATE =
      acdcmg_sim8_1_sm_grid_simulation_B.x2k1;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[1] == 0) {
    /* Update for S-Function (fts5stub): '<S1051>/S-Function' */
    /* Level2 S-Function Block: '<S1051>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[59];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1063>/S-Function' */
    /* Level2 S-Function Block: '<S1063>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[60];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1052>/S-Function' */
    /* Level2 S-Function Block: '<S1052>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[62];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1064>/S-Function' */
    /* Level2 S-Function Block: '<S1064>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[63];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1053>/S-Function' */
    /* Level2 S-Function Block: '<S1053>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[65];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }

    /* Update for S-Function (fts5stub): '<S1065>/S-Function' */
    /* Level2 S-Function Block: '<S1065>/S-Function' (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[66];
      sfcnUpdate(rts,1);
      if (ssGetErrorStatus(rts) != (NULL))
        return;
    }
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M)) {
    rt_ertODEUpdateContinuousStates
      (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo);
  }

  /* Update absolute time for base rate */
  /* The "clockTick0" counts the number of times the code of this task has
   * been executed. The absolute time is the multiplication of "clockTick0"
   * and "Timing.stepSize0". Size of "clockTick0" ensures timer will not
   * overflow during the application lifespan selected.
   * Timer of this task consists of two 32 bit unsigned integers.
   * The two integers represent the low bits Timing.clockTick0 and the high bits
   * Timing.clockTickH0. When the low bit overflows to 0, the high bits increment.
   */
  if (!(++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick0)) {
    ++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH0;
  }

  acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0] = rtsiGetSolverStopTime
    (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo);

  {
    /* Update absolute timer for sample time: [4.0E-5s, 0.0s] */
    /* The "clockTick1" counts the number of times the code of this task has
     * been executed. The absolute time is the multiplication of "clockTick1"
     * and "Timing.stepSize1". Size of "clockTick1" ensures timer will not
     * overflow during the application lifespan selected.
     * Timer of this task consists of two 32 bit unsigned integers.
     * The two integers represent the low bits Timing.clockTick1 and the high bits
     * Timing.clockTickH1. When the low bit overflows to 0, the high bits increment.
     */
    if (!(++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick1)) {
      ++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH1;
    }

    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[1] =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick1 *
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize1 +
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH1 *
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize1 * 4294967296.0;
  }

  if (rtmIsMajorTimeStep(acdcmg_sim8_1_sm_grid_simulation_M) &&
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.TaskCounters.TID[2] == 0) {
    /* Update absolute timer for sample time: [0.00024000000000000003s, 0.0s] */
    /* The "clockTick2" counts the number of times the code of this task has
     * been executed. The absolute time is the multiplication of "clockTick2"
     * and "Timing.stepSize2". Size of "clockTick2" ensures timer will not
     * overflow during the application lifespan selected.
     * Timer of this task consists of two 32 bit unsigned integers.
     * The two integers represent the low bits Timing.clockTick2 and the high bits
     * Timing.clockTickH2. When the low bit overflows to 0, the high bits increment.
     */
    if (!(++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick2)) {
      ++acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH2;
    }

    acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[2] =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTick2 *
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize2 +
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.clockTickH2 *
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize2 * 4294967296.0;
  }

  rate_scheduler();
}

/* Derivatives for root system: '<Root>' */
void acdcmg_sim8_1_sm_grid_simulation_derivatives(void)
{
  boolean_T lsat;
  boolean_T usat;
  XDot_acdcmg_sim8_1_sm_grid_simulation_T *_rtXdot;
  _rtXdot = ((XDot_acdcmg_sim8_1_sm_grid_simulation_T *)
             acdcmg_sim8_1_sm_grid_simulation_M->ModelData.derivs);

  /* Derivatives for Integrator: '<S132>/Integrator' */
  lsat = (acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE <=
          acdcmg_sim8_1_sm_grid_simulation_P.Integrator_LowerSat);
  usat = (acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE >=
          acdcmg_sim8_1_sm_grid_simulation_P.Integrator_UpperSat);
  if (((!lsat) && (!usat)) || (lsat && (acdcmg_sim8_1_sm_grid_simulation_B.Ki >
        0.0)) || (usat && (acdcmg_sim8_1_sm_grid_simulation_B.Ki < 0.0))) {
    _rtXdot->Integrator_CSTATE = acdcmg_sim8_1_sm_grid_simulation_B.Ki;
  } else {
    /* in saturation */
    _rtXdot->Integrator_CSTATE = 0.0;
  }

  /* End of Derivatives for Integrator: '<S132>/Integrator' */

  /* Derivatives for VariableTransportDelay: '<S69>/Variable Time Delay' incorporates:
   *  Constant: '<S69>/Constant'
   */
  {
  }

  /* Derivatives for Enabled SubSystem: '<S600>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_kx, &_rtXdot->TrueRMS_kx);

  /* End of Derivatives for SubSystem: '<S600>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S600>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b4, &_rtXdot->RMS_b4);

  /* End of Derivatives for SubSystem: '<S600>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S599>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_k, &_rtXdot->TrueRMS_k);

  /* End of Derivatives for SubSystem: '<S599>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S599>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bh, &_rtXdot->RMS_bh);

  /* End of Derivatives for SubSystem: '<S599>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S601>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c0, &_rtXdot->TrueRMS_c0);

  /* End of Derivatives for SubSystem: '<S601>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S601>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_a, &_rtXdot->RMS_a);

  /* End of Derivatives for SubSystem: '<S601>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S450>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_i, &_rtXdot->TrueRMS_i);

  /* End of Derivatives for SubSystem: '<S450>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S450>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_c, &_rtXdot->RMS_c);

  /* End of Derivatives for SubSystem: '<S450>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S449>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_d, &_rtXdot->TrueRMS_d);

  /* End of Derivatives for SubSystem: '<S449>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S449>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_m, &_rtXdot->RMS_m);

  /* End of Derivatives for SubSystem: '<S449>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S451>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_e, &_rtXdot->TrueRMS_e);

  /* End of Derivatives for SubSystem: '<S451>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S451>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cw, &_rtXdot->RMS_cw);

  /* End of Derivatives for SubSystem: '<S451>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S510>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ae, &_rtXdot->TrueRMS_ae);

  /* End of Derivatives for SubSystem: '<S510>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S510>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j, &_rtXdot->RMS_j);

  /* End of Derivatives for SubSystem: '<S510>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S509>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_m, &_rtXdot->TrueRMS_m);

  /* End of Derivatives for SubSystem: '<S509>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S509>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_l, &_rtXdot->RMS_l);

  /* End of Derivatives for SubSystem: '<S509>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S511>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_b, &_rtXdot->TrueRMS_b);

  /* End of Derivatives for SubSystem: '<S511>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S511>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_o, &_rtXdot->RMS_o);

  /* End of Derivatives for SubSystem: '<S511>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S480>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ad, &_rtXdot->TrueRMS_ad);

  /* End of Derivatives for SubSystem: '<S480>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S480>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b, &_rtXdot->RMS_b);

  /* End of Derivatives for SubSystem: '<S480>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S479>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_an, &_rtXdot->TrueRMS_an);

  /* End of Derivatives for SubSystem: '<S479>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S479>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p, &_rtXdot->RMS_p);

  /* End of Derivatives for SubSystem: '<S479>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S481>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c, &_rtXdot->TrueRMS_c);

  /* End of Derivatives for SubSystem: '<S481>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S481>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_n, &_rtXdot->RMS_n);

  /* End of Derivatives for SubSystem: '<S481>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S540>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dq, &_rtXdot->TrueRMS_dq);

  /* End of Derivatives for SubSystem: '<S540>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S540>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_mf, &_rtXdot->RMS_mf);

  /* End of Derivatives for SubSystem: '<S540>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S539>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dw, &_rtXdot->TrueRMS_dw);

  /* End of Derivatives for SubSystem: '<S539>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S539>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j2, &_rtXdot->RMS_j2);

  /* End of Derivatives for SubSystem: '<S539>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S541>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_g, &_rtXdot->TrueRMS_g);

  /* End of Derivatives for SubSystem: '<S541>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S541>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_h, &_rtXdot->RMS_h);

  /* End of Derivatives for SubSystem: '<S541>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S420>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j, &_rtXdot->TrueRMS_j);

  /* End of Derivatives for SubSystem: '<S420>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S420>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_il, &_rtXdot->RMS_il);

  /* End of Derivatives for SubSystem: '<S420>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S419>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_p, &_rtXdot->TrueRMS_p);

  /* End of Derivatives for SubSystem: '<S419>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S419>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_i, &_rtXdot->RMS_i);

  /* End of Derivatives for SubSystem: '<S419>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S421>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_a, &_rtXdot->TrueRMS_a);

  /* End of Derivatives for SubSystem: '<S421>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S421>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_id, &_rtXdot->RMS_id);

  /* End of Derivatives for SubSystem: '<S421>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S570>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_h, &_rtXdot->TrueRMS_h);

  /* End of Derivatives for SubSystem: '<S570>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S570>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cc, &_rtXdot->RMS_cc);

  /* End of Derivatives for SubSystem: '<S570>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S569>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ay, &_rtXdot->TrueRMS_ay);

  /* End of Derivatives for SubSystem: '<S569>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S569>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p2, &_rtXdot->RMS_p2);

  /* End of Derivatives for SubSystem: '<S569>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S571>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_p_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_gs, &_rtXdot->TrueRMS_gs);

  /* End of Derivatives for SubSystem: '<S571>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S571>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_n_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cb, &_rtXdot->RMS_cb);

  /* End of Derivatives for SubSystem: '<S571>/RMS ' */

  /* Derivatives for Integrator: '<S719>/integrator' */
  _rtXdot->integrator_CSTATE = acdcmg_sim8_1_sm_grid_simulation_B.Add;

  /* Derivatives for Enabled SubSystem: '<S409>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS, &_rtXdot->RMS);

  /* End of Derivatives for SubSystem: '<S409>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S409>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS, &_rtXdot->TrueRMS);

  /* End of Derivatives for SubSystem: '<S409>/TrueRMS ' */

  /* Derivatives for Integrator: '<S130>/integrator' */
  _rtXdot->integrator_CSTATE_p = acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay2;

  /* Derivatives for Integrator: '<S131>/integrator' */
  _rtXdot->integrator_CSTATE_b = acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay3;

  /* Derivatives for Integrator: '<S156>/integrator' */
  _rtXdot->integrator_CSTATE_c = acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay2_l;

  /* Derivatives for Enabled SubSystem: '<S631>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_jo,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_jo, &_rtXdot->RMS_jo);

  /* End of Derivatives for SubSystem: '<S631>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S631>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_mi,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_mi, &_rtXdot->TrueRMS_mi);

  /* End of Derivatives for SubSystem: '<S631>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S643>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_pj,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_pj, &_rtXdot->RMS_pj);

  /* End of Derivatives for SubSystem: '<S643>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S643>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_dt,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dt, &_rtXdot->TrueRMS_dt);

  /* End of Derivatives for SubSystem: '<S643>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S655>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_bz,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bz, &_rtXdot->RMS_bz);

  /* End of Derivatives for SubSystem: '<S655>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S655>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_jr,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_jr, &_rtXdot->TrueRMS_jr);

  /* End of Derivatives for SubSystem: '<S655>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S667>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_k, &_rtXdot->RMS_k);

  /* End of Derivatives for SubSystem: '<S667>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S667>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ik,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ik, &_rtXdot->TrueRMS_ik);

  /* End of Derivatives for SubSystem: '<S667>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S679>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_hk,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_hk, &_rtXdot->RMS_hk);

  /* End of Derivatives for SubSystem: '<S679>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S679>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j2, &_rtXdot->TrueRMS_j2);

  /* End of Derivatives for SubSystem: '<S679>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S691>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_my,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_my, &_rtXdot->RMS_my);

  /* End of Derivatives for SubSystem: '<S691>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S691>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_ml,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ml, &_rtXdot->TrueRMS_ml);

  /* End of Derivatives for SubSystem: '<S691>/TrueRMS ' */

  /* Derivatives for Enabled SubSystem: '<S703>/RMS ' */
  acdcmg_sim8_1_sm_grid_RMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.RMS_ng,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_ng, &_rtXdot->RMS_ng);

  /* End of Derivatives for SubSystem: '<S703>/RMS ' */

  /* Derivatives for Enabled SubSystem: '<S703>/TrueRMS ' */
  acdcmg_sim8_1_sm__TrueRMS_Deriv(&acdcmg_sim8_1_sm_grid_simulation_B.TrueRMS_f,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_f, &_rtXdot->TrueRMS_f);

  /* End of Derivatives for SubSystem: '<S703>/TrueRMS ' */
}

/* Model initialize function */
void acdcmg_sim8_1_sm_grid_simulation_initialize(void)
{
  /* Start for S-Function (ssn_sfun_v1): '<S1227>/State-Space' */
  /* Level2 S-Function Block: '<S1227>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[27];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for VariableTransportDelay: '<S69>/Variable Time Delay' incorporates:
   *  Constant: '<S69>/Constant'
   */
  {
    real_T *pBuffer =
      &acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_RWORK.TUbufferArea
      [0];
    int_T j;
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Tail = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Head = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.Last = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_IWORK.CircularBufSize =
      1024;
    for (j=0; j < 1024; j++) {
      pBuffer[j] = acdcmg_sim8_1_sm_grid_simulation_P.Ts;
      pBuffer[1024 + j] = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    }

    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs[0] =
      (void *) &pBuffer[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.VariableTimeDelay_PWORK.TUbufferPtrs[1] =
      (void *) &pBuffer[1024];
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1220>/State-Space' */
  /* Level2 S-Function Block: '<S1220>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[28];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1219>/State-Space' */
  /* Level2 S-Function Block: '<S1219>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[35];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for Enabled SubSystem: '<S600>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_kx,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_kx);

  /* End of Start for SubSystem: '<S600>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S600>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b4);

  /* End of Start for SubSystem: '<S600>/RMS ' */

  /* Start for Enabled SubSystem: '<S599>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_k);

  /* End of Start for SubSystem: '<S599>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S599>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_bh);

  /* End of Start for SubSystem: '<S599>/RMS ' */

  /* Start for Enabled SubSystem: '<S601>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c0,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c0);

  /* End of Start for SubSystem: '<S601>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S601>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_a);

  /* End of Start for SubSystem: '<S601>/RMS ' */

  /* Start for S-Function (ssn_sfun_v1): '<S1226>/State-Space' */
  /* Level2 S-Function Block: '<S1226>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[38];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for Enabled SubSystem: '<S450>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_i);

  /* End of Start for SubSystem: '<S450>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S450>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_c);

  /* End of Start for SubSystem: '<S450>/RMS ' */

  /* Start for Enabled SubSystem: '<S449>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_d);

  /* End of Start for SubSystem: '<S449>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S449>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_m);

  /* End of Start for SubSystem: '<S449>/RMS ' */

  /* Start for Enabled SubSystem: '<S451>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_e);

  /* End of Start for SubSystem: '<S451>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S451>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cw);

  /* End of Start for SubSystem: '<S451>/RMS ' */

  /* Start for Enabled SubSystem: '<S510>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ae,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ae);

  /* End of Start for SubSystem: '<S510>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S510>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j);

  /* End of Start for SubSystem: '<S510>/RMS ' */

  /* Start for Enabled SubSystem: '<S509>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_m);

  /* End of Start for SubSystem: '<S509>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S509>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_l);

  /* End of Start for SubSystem: '<S509>/RMS ' */

  /* Start for Enabled SubSystem: '<S511>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_b);

  /* End of Start for SubSystem: '<S511>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S511>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_o);

  /* End of Start for SubSystem: '<S511>/RMS ' */

  /* Start for S-Function (ssn_sfun_v1): '<S1228>/State-Space' */
  /* Level2 S-Function Block: '<S1228>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[41];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for Enabled SubSystem: '<S480>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ad,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ad);

  /* End of Start for SubSystem: '<S480>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S480>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b);

  /* End of Start for SubSystem: '<S480>/RMS ' */

  /* Start for Enabled SubSystem: '<S479>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_an,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_an);

  /* End of Start for SubSystem: '<S479>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S479>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p);

  /* End of Start for SubSystem: '<S479>/RMS ' */

  /* Start for Enabled SubSystem: '<S481>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c);

  /* End of Start for SubSystem: '<S481>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S481>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_n);

  /* End of Start for SubSystem: '<S481>/RMS ' */

  /* Start for Enabled SubSystem: '<S540>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dq,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dq);

  /* End of Start for SubSystem: '<S540>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S540>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_mf);

  /* End of Start for SubSystem: '<S540>/RMS ' */

  /* Start for Enabled SubSystem: '<S539>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dw,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dw);

  /* End of Start for SubSystem: '<S539>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S539>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j2);

  /* End of Start for SubSystem: '<S539>/RMS ' */

  /* Start for Enabled SubSystem: '<S541>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_g);

  /* End of Start for SubSystem: '<S541>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S541>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_h);

  /* End of Start for SubSystem: '<S541>/RMS ' */

  /* Start for Enabled SubSystem: '<S420>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_j);

  /* End of Start for SubSystem: '<S420>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S420>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_il);

  /* End of Start for SubSystem: '<S420>/RMS ' */

  /* Start for Enabled SubSystem: '<S419>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_p);

  /* End of Start for SubSystem: '<S419>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S419>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_i);

  /* End of Start for SubSystem: '<S419>/RMS ' */

  /* Start for Enabled SubSystem: '<S421>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_a);

  /* End of Start for SubSystem: '<S421>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S421>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_id);

  /* End of Start for SubSystem: '<S421>/RMS ' */

  /* Start for Enabled SubSystem: '<S570>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_h);

  /* End of Start for SubSystem: '<S570>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S570>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cc);

  /* End of Start for SubSystem: '<S570>/RMS ' */

  /* Start for Enabled SubSystem: '<S569>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ay,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ay);

  /* End of Start for SubSystem: '<S569>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S569>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p2);

  /* End of Start for SubSystem: '<S569>/RMS ' */

  /* Start for Enabled SubSystem: '<S571>/TrueRMS ' */
  acdcmg_sim8_1_s_TrueRMS_c_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_gs,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_gs);

  /* End of Start for SubSystem: '<S571>/TrueRMS ' */

  /* Start for Enabled SubSystem: '<S571>/RMS ' */
  acdcmg_sim8_1_sm_gr_RMS_a_Start(acdcmg_sim8_1_sm_grid_simulation_M,
    &acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cb);

  /* End of Start for SubSystem: '<S571>/RMS ' */

  /* Start for Constant: '<S717>/K1' */
  acdcmg_sim8_1_sm_grid_simulation_B.K1 =
    acdcmg_sim8_1_sm_grid_simulation_P.K1_Value;

  /* Start for S-Function (sfun_discreteVariableDelay): '<S718>/S-Function' */
  /* Level2 S-Function Block: '<S718>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for TransportDelay: '<S719>/Transport Delay' */
  {
    real_T *pBuffer =
      &acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_RWORK.TUbufferArea[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Tail = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Head = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.Last = 0;
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_IWORK.CircularBufSize =
      8192;
    pBuffer[0] = acdcmg_sim8_1_sm_grid_simulation_P.TransportDelay_InitOutput;
    pBuffer[8192] = acdcmg_sim8_1_sm_grid_simulation_M->Timing.t[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[0] =
      (void *) &pBuffer[0];
    acdcmg_sim8_1_sm_grid_simulation_DW.TransportDelay_PWORK.TUbufferPtrs[1] =
      (void *) &pBuffer[8192];
  }

  /* Start for Constant: '<S152>/K1' */
  acdcmg_sim8_1_sm_grid_simulation_B.K1_d =
    acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_o;

  /* Start for S-Function (sfun_discreteVariableDelay): '<S153>/S-Function' */
  /* Level2 S-Function Block: '<S153>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for Constant: '<S154>/K1' */
  acdcmg_sim8_1_sm_grid_simulation_B.K1_j =
    acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_c;

  /* Start for S-Function (sfun_discreteVariableDelay): '<S155>/S-Function' */
  /* Level2 S-Function Block: '<S155>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for Constant: '<S157>/K1' */
  acdcmg_sim8_1_sm_grid_simulation_B.K1_c =
    acdcmg_sim8_1_sm_grid_simulation_P.K1_Value_p;

  /* Start for S-Function (sfun_discreteVariableDelay): '<S158>/S-Function' */
  /* Level2 S-Function Block: '<S158>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for InitialCondition: '<S864>/Initial' */
  acdcmg_sim8_1_sm_grid_simulation_B.Initial =
    acdcmg_sim8_1_sm_grid_simulation_P.Initial_Value;
  acdcmg_sim8_1_sm_grid_simulation_DW.Initial_FirstOutputTime = true;

  /* Start for Enabled SubSystem: '<S864>/Automatic Gain Control' */

  /* Start for S-Function (sfun_discreteVariableDelay): '<S876>/S-Function' */
  /* Level2 S-Function Block: '<S876>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (sfun_discreteVariableDelay): '<S879>/S-Function' */
  /* Level2 S-Function Block: '<S879>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* End of Start for SubSystem: '<S864>/Automatic Gain Control' */

  /* Start for S-Function (sfun_discreteVariableDelay): '<S892>/S-Function' */
  /* Level2 S-Function Block: '<S892>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1218>/State-Space' */
  /* Level2 S-Function Block: '<S1218>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[61];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1221>/State-Space' */
  /* Level2 S-Function Block: '<S1221>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[64];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1222>/State-Space' */
  /* Level2 S-Function Block: '<S1222>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[67];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1223>/State-Space' */
  /* Level2 S-Function Block: '<S1223>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[68];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1224>/State-Space' */
  /* Level2 S-Function Block: '<S1224>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[69];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* Start for S-Function (ssn_sfun_v1): '<S1225>/State-Space' */
  /* Level2 S-Function Block: '<S1225>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[70];
    sfcnStart(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* user code (Initialize function Body) */

  /* System '<Root>' */

  /* Opal-RT Technologies */
  opalSizeDwork = sizeof(rtDWork);
  if (Opal_rtmGetNumBlockIO(pRtModel) != 0)
    opalSizeBlockIO = sizeof(rtB);
  else
    opalSizeBlockIO = 0;
  if (Opal_rtmGetNumBlockParams(pRtModel) != 0)
    opalSizeRTP = sizeof(rtP);
  else
    opalSizeRTP = 0;

  /* InitializeConditions for Memory: '<S2>/S-Function' */
  acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PreviousInput =
    acdcmg_sim8_1_sm_grid_simulation_P.SFunction_InitialCondition;

  /* InitializeConditions for DiscreteIntegrator: '<S149>/Discrete-Time Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_IC;

  /* InitializeConditions for Memory: '<S94>/it init1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.itinit1_PreviousInput =
    acdcmg_sim8_1_sm_grid_simulation_P.itinit1_InitialCondition;

  /* InitializeConditions for DiscreteTransferFcn: '<S94>/Current filter' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Currentfilter_states =
    acdcmg_sim8_1_sm_grid_simulation_P.Currentfilter_InitialStates;

  /* InitializeConditions for Memory: '<S94>/it init' */
  acdcmg_sim8_1_sm_grid_simulation_DW.itinit_PreviousInput = (1.0 -
    acdcmg_sim8_1_sm_grid_simulation_P.Battery1_SOC / 100.0) *
    827.19999999999789 * 0.96711798839458663 * 3600.0;

  /* InitializeConditions for DiscreteIntegrator: '<S94>/int(i)' */
  acdcmg_sim8_1_sm_grid_simulation_DW.inti_IC_LOADING = 1;
  acdcmg_sim8_1_sm_grid_simulation_DW.inti_PrevResetState = 2;

  /* InitializeConditions for DiscreteIntegrator: '<S99>/Discrete-Time Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_n =
    10.077115567411333 * exp(-0.076327433628318578 * (1.0 -
    acdcmg_sim8_1_sm_grid_simulation_P.Battery1_SOC / 100.0) *
    827.19999999999789);

  /* InitializeConditions for Memory: '<S94>/Memory2' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory2_PreviousInput =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory2_InitialCondition;

  /* InitializeConditions for Delay: '<S132>/Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Delay_InitialCondition;

  /* InitializeConditions for Integrator: '<S132>/Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_X.Integrator_CSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Integrator_IC;

  /* InitializeConditions for UnitDelay: '<S11>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_i;

  /* InitializeConditions for UnitDelay: '<S12>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_p =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_l;

  /* InitializeConditions for UnitDelay: '<S11>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_o;

  /* InitializeConditions for UnitDelay: '<S12>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_k =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_i;

  /* InitializeConditions for UnitDelay: '<S766>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_m;
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_m;
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_a[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_m;

  /* InitializeConditions for S-Function (fts5stub): '<S1027>/S-Function' */
  /* Level2 S-Function Block: '<S1027>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[2];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1039>/S-Function' */
  /* Level2 S-Function Block: '<S1039>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[3];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1025>/S-Function' */
  /* Level2 S-Function Block: '<S1025>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[4];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1037>/S-Function' */
  /* Level2 S-Function Block: '<S1037>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[5];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1026>/S-Function' */
  /* Level2 S-Function Block: '<S1026>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[6];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1038>/S-Function' */
  /* Level2 S-Function Block: '<S1038>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[7];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1091>/S-Function' */
  /* Level2 S-Function Block: '<S1091>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[8];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1079>/S-Function' */
  /* Level2 S-Function Block: '<S1079>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[9];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1089>/S-Function' */
  /* Level2 S-Function Block: '<S1089>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[10];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1077>/S-Function' */
  /* Level2 S-Function Block: '<S1077>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[11];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1090>/S-Function' */
  /* Level2 S-Function Block: '<S1090>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[12];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1078>/S-Function' */
  /* Level2 S-Function Block: '<S1078>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[13];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1105>/S-Function' */
  /* Level2 S-Function Block: '<S1105>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[14];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1117>/S-Function' */
  /* Level2 S-Function Block: '<S1117>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[15];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1103>/S-Function' */
  /* Level2 S-Function Block: '<S1103>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[16];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1115>/S-Function' */
  /* Level2 S-Function Block: '<S1115>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[17];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1104>/S-Function' */
  /* Level2 S-Function Block: '<S1104>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[18];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1116>/S-Function' */
  /* Level2 S-Function Block: '<S1116>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[19];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1131>/S-Function' */
  /* Level2 S-Function Block: '<S1131>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[20];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1143>/S-Function' */
  /* Level2 S-Function Block: '<S1143>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[21];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1129>/S-Function' */
  /* Level2 S-Function Block: '<S1129>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[22];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1141>/S-Function' */
  /* Level2 S-Function Block: '<S1141>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[23];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1130>/S-Function' */
  /* Level2 S-Function Block: '<S1130>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[24];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1142>/S-Function' */
  /* Level2 S-Function Block: '<S1142>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[25];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (RECV_Param): '<S963>/S-Function' */
  /* Level2 S-Function Block: '<S963>/S-Function' (RECV_Param) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[26];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1227>/State-Space' */
  /* Level2 S-Function Block: '<S1227>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[27];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for RateLimiter: '<S72>/Rate Limiter' */
  acdcmg_sim8_1_sm_grid_simulation_DW.PrevY =
    acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_IC;

  /* InitializeConditions for UnitDelay: '<S987>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_h =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_d;

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1220>/State-Space' */
  /* Level2 S-Function Block: '<S1220>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[28];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1197>/S-Function' */
  /* Level2 S-Function Block: '<S1197>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[29];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1198>/S-Function' */
  /* Level2 S-Function Block: '<S1198>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[30];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1199>/S-Function' */
  /* Level2 S-Function Block: '<S1199>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[31];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S642>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition;

  /* InitializeConditions for S-Function (OP_SEND): '<S1200>/S-Function' */
  /* Level2 S-Function Block: '<S1200>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[32];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1201>/S-Function' */
  /* Level2 S-Function Block: '<S1201>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[33];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1202>/S-Function' */
  /* Level2 S-Function Block: '<S1202>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[34];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1219>/State-Space' */
  /* Level2 S-Function Block: '<S1219>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[35];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1203>/S-Function' */
  /* Level2 S-Function Block: '<S1203>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[36];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S666>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_k;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_k;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_g[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_k;

  /* InitializeConditions for S-Function (OP_SEND): '<S1204>/S-Function' */
  /* Level2 S-Function Block: '<S1204>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[37];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1226>/State-Space' */
  /* Level2 S-Function Block: '<S1226>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[38];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1205>/S-Function' */
  /* Level2 S-Function Block: '<S1205>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[39];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1206>/S-Function' */
  /* Level2 S-Function Block: '<S1206>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[40];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1228>/State-Space' */
  /* Level2 S-Function Block: '<S1228>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[41];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1196>/S-Function' */
  /* Level2 S-Function Block: '<S1196>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[42];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1208>/S-Function' */
  /* Level2 S-Function Block: '<S1208>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[43];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S702>/Memory1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory1_InitialCondition;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory1_InitialCondition;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory1_InitialCondition;

  /* InitializeConditions for S-Function (OP_SEND): '<S1209>/S-Function' */
  /* Level2 S-Function Block: '<S1209>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[44];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S630>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_g;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_g;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_gb[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_g;

  /* InitializeConditions for S-Function (OP_SEND): '<S1210>/S-Function' */
  /* Level2 S-Function Block: '<S1210>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[45];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S678>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_p;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_p;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_p;

  /* InitializeConditions for S-Function (OP_SEND): '<S1207>/S-Function' */
  /* Level2 S-Function Block: '<S1207>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[46];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1211>/S-Function' */
  /* Level2 S-Function Block: '<S1211>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[47];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S408>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_f;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_f;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_o5[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_f;

  /* InitializeConditions for S-Function (OP_SEND): '<S1212>/S-Function' */
  /* Level2 S-Function Block: '<S1212>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[48];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1213>/S-Function' */
  /* Level2 S-Function Block: '<S1213>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[49];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S654>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_l;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_l;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_h[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_l;

  /* InitializeConditions for S-Function (OP_SEND): '<S1214>/S-Function' */
  /* Level2 S-Function Block: '<S1214>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[50];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for DiscreteIntegrator: '<S717>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_m;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S718>/S-Function' */
  /* Level2 S-Function Block: '<S718>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S717>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_kd =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_iq;

  /* InitializeConditions for UnitDelay: '<S717>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_c =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_e;

  /* InitializeConditions for S-Function (OP_SEND): '<S1215>/S-Function' */
  /* Level2 S-Function Block: '<S1215>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[52];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Integrator: '<S719>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.integrator_IC;

  /* InitializeConditions for Memory: '<S719>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_l =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_c;

  /* InitializeConditions for S-Function (OP_SEND): '<S1216>/S-Function' */
  /* Level2 S-Function Block: '<S1216>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[53];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (OP_SEND): '<S1217>/S-Function' */
  /* Level2 S-Function Block: '<S1217>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[54];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Derivative: '<S166>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB = (rtInf);

  /* InitializeConditions for Derivative: '<S170>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_l = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_n = (rtInf);

  /* InitializeConditions for Derivative: '<S174>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_o = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_h = (rtInf);

  /* InitializeConditions for Derivative: '<S183>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_e = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_e = (rtInf);

  /* InitializeConditions for Derivative: '<S187>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_f = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_m = (rtInf);

  /* InitializeConditions for Derivative: '<S191>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_li = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g = (rtInf);

  /* InitializeConditions for Derivative: '<S200>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_d = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_mc = (rtInf);

  /* InitializeConditions for Derivative: '<S204>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_c = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_p = (rtInf);

  /* InitializeConditions for Derivative: '<S208>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fi = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_gn = (rtInf);

  /* InitializeConditions for Derivative: '<S217>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_b = (rtInf);

  /* InitializeConditions for Derivative: '<S221>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_lh = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_k = (rtInf);

  /* InitializeConditions for Derivative: '<S225>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_d = (rtInf);

  /* InitializeConditions for Derivative: '<S234>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_dx = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pv = (rtInf);

  /* InitializeConditions for Derivative: '<S238>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_k = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_dg = (rtInf);

  /* InitializeConditions for Derivative: '<S242>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_j = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_a = (rtInf);

  /* InitializeConditions for Derivative: '<S251>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_au = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5 = (rtInf);

  /* InitializeConditions for Derivative: '<S255>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fh = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_kd = (rtInf);

  /* InitializeConditions for Derivative: '<S259>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_fo = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_aa = (rtInf);

  /* InitializeConditions for Derivative: '<S264>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_g = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_g5h = (rtInf);

  /* InitializeConditions for Derivative: '<S268>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_ho = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_eu = (rtInf);

  /* InitializeConditions for Derivative: '<S272>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_gy = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_de = (rtInf);

  /* InitializeConditions for Derivative: '<S276>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_b = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_f = (rtInf);

  /* InitializeConditions for Derivative: '<S280>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_h2 = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_o = (rtInf);

  /* InitializeConditions for Derivative: '<S284>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a0 = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_pz = (rtInf);

  /* InitializeConditions for Derivative: '<S119>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_bs = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_l = (rtInf);

  /* InitializeConditions for Derivative: '<S123>/Derivative' */
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampA_a2 = (rtInf);
  acdcmg_sim8_1_sm_grid_simulation_DW.TimeStampB_bg = (rtInf);

  /* InitializeConditions for Integrator: '<S130>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_p =
    acdcmg_sim8_1_sm_grid_simulation_P.integrator_IC_o;

  /* InitializeConditions for UnitDelay: '<S11>/Unit Delay2' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay2_InitialCondition;

  /* InitializeConditions for Integrator: '<S131>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_b =
    acdcmg_sim8_1_sm_grid_simulation_P.integrator_IC_g;

  /* InitializeConditions for UnitDelay: '<S11>/Unit Delay3' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay3_InitialCondition;

  /* InitializeConditions for Delay: '<S149>/Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Delay_DSTATE_b =
    acdcmg_sim8_1_sm_grid_simulation_P.Delay_InitialCondition_f;

  /* InitializeConditions for Delay: '<S149>/Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Delay1_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Delay1_InitialCondition;

  /* InitializeConditions for DiscreteIntegrator: '<S152>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_n =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_n;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S153>/S-Function' */
  /* Level2 S-Function Block: '<S153>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S152>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_n;

  /* InitializeConditions for UnitDelay: '<S152>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pa =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_e0;

  /* InitializeConditions for DiscreteIntegrator: '<S154>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_l =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_i;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S155>/S-Function' */
  /* Level2 S-Function Block: '<S155>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S154>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_o =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_ba;

  /* InitializeConditions for UnitDelay: '<S154>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_pd =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_o;

  /* InitializeConditions for Integrator: '<S156>/integrator' */
  acdcmg_sim8_1_sm_grid_simulation_X.integrator_CSTATE_c =
    acdcmg_sim8_1_sm_grid_simulation_P.integrator_IC_e;

  /* InitializeConditions for UnitDelay: '<S12>/Unit Delay2' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay2_DSTATE_b =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay2_InitialCondition_m;

  /* InitializeConditions for UnitDelay: '<S12>/Unit Delay3' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay3_DSTATE_e =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay3_InitialCondition_b;

  /* InitializeConditions for DiscreteIntegrator: '<S157>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_c =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_l;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S158>/S-Function' */
  /* Level2 S-Function Block: '<S158>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for Memory: '<S690>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[0] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_pj;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[1] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_pj;
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_go[2] =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_pj;

  /* InitializeConditions for Memory: '<S48>/Memory' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory_PreviousInput_n =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory_InitialCondition_f0;

  /* InitializeConditions for Memory: '<S48>/Memory1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Memory1_PreviousInput_p =
    acdcmg_sim8_1_sm_grid_simulation_P.Memory1_InitialCondition_i;

  /* InitializeConditions for DiscreteIntegrator: '<S864>/Discrete-Time Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_h =
    acdcmg_sim8_1_sm_grid_simulation_B.Initial;
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_PrevRese = 2;

  /* InitializeConditions for DiscreteIntegrator: '<S805>/Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.PIDController1_InitialConditi_m;

  /* InitializeConditions for DiscreteIntegrator: '<S800>/Filter' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.PIDController1_InitialCondition;

  /* InitializeConditions for UnitDelay: '<S864>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_oz =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_dj;

  /* InitializeConditions for DiscreteIntegrator: '<S849>/Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integrator_DSTATE_m =
    acdcmg_sim8_1_sm_grid_simulation_P.PIDController2_InitialConditi_f;

  /* InitializeConditions for DiscreteIntegrator: '<S844>/Filter' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Filter_DSTATE_p =
    acdcmg_sim8_1_sm_grid_simulation_P.PIDController2_InitialCondition;

  /* InitializeConditions for DiscreteIntegrator: '<S890>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_i =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_e;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S892>/S-Function' */
  /* Level2 S-Function Block: '<S892>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S891>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_d1 =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_e;

  /* InitializeConditions for UnitDelay: '<S890>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_o =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_g;

  /* InitializeConditions for DiscreteTransferFcn: '<S866>/Discrete Derivative ' */
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteDerivative_states =
    acdcmg_sim8_1_sm_grid_simulation_P.DiscreteDerivative_InitialState;

  /* InitializeConditions for DiscreteIntegrator: '<S866>/Discrete-Time Integrator' */
  acdcmg_sim8_1_sm_grid_simulation_DW.DiscreteTimeIntegrator_DSTATE_b =
    acdcmg_sim8_1_sm_grid_simulation_P.Discrete_Init;

  /* InitializeConditions for RateLimiter: '<S864>/Rate Limiter' */
  acdcmg_sim8_1_sm_grid_simulation_DW.PrevY_e =
    acdcmg_sim8_1_sm_grid_simulation_P.RateLimiter_IC_h;

  /* InitializeConditions for UnitDelay: '<S886>/Delay_x1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x1_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Delay_x1_InitialCondition;

  /* InitializeConditions for UnitDelay: '<S886>/Delay_x2' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Delay_x2_DSTATE =
    acdcmg_sim8_1_sm_grid_simulation_P.Delay_x2_InitialCondition;

  /* InitializeConditions for S-Function (fts5stub): '<S1051>/S-Function' */
  /* Level2 S-Function Block: '<S1051>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[59];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1063>/S-Function' */
  /* Level2 S-Function Block: '<S1063>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[60];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1218>/State-Space' */
  /* Level2 S-Function Block: '<S1218>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[61];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1052>/S-Function' */
  /* Level2 S-Function Block: '<S1052>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[62];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1064>/S-Function' */
  /* Level2 S-Function Block: '<S1064>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[63];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1221>/State-Space' */
  /* Level2 S-Function Block: '<S1221>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[64];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1053>/S-Function' */
  /* Level2 S-Function Block: '<S1053>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[65];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (fts5stub): '<S1065>/S-Function' */
  /* Level2 S-Function Block: '<S1065>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[66];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1222>/State-Space' */
  /* Level2 S-Function Block: '<S1222>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[67];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1223>/State-Space' */
  /* Level2 S-Function Block: '<S1223>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[68];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1224>/State-Space' */
  /* Level2 S-Function Block: '<S1224>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[69];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for S-Function (ssn_sfun_v1): '<S1225>/State-Space' */
  /* Level2 S-Function Block: '<S1225>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[70];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* SystemInitialize for Enabled SubSystem: '<S725>/Signal generator' */
  acdcmg_sim_Signalgenerator_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator,
     &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator,
     &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator);

  /* End of SystemInitialize for SubSystem: '<S725>/Signal generator' */

  /* SystemInitialize for Enabled SubSystem: '<S725>/Harmonic Generator' */
  acdcmg_s_HarmonicGenerator_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator,
     &acdcmg_sim8_1_sm_grid_simulation_P.HarmonicGenerator);

  /* End of SystemInitialize for SubSystem: '<S725>/Harmonic Generator' */

  /* SystemInitialize for Enabled SubSystem: '<S600>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_kx,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_kx,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_kx);

  /* End of SystemInitialize for SubSystem: '<S600>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S600>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b4,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_b4);

  /* End of SystemInitialize for SubSystem: '<S600>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S599>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_k);

  /* End of SystemInitialize for SubSystem: '<S599>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S599>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_bh,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_bh);

  /* End of SystemInitialize for SubSystem: '<S599>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S601>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c0,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c0,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_c0);

  /* End of SystemInitialize for SubSystem: '<S601>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S601>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_a);

  /* End of SystemInitialize for SubSystem: '<S601>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S450>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_i);

  /* End of SystemInitialize for SubSystem: '<S450>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S450>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_c);

  /* End of SystemInitialize for SubSystem: '<S450>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S449>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_d,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_d);

  /* End of SystemInitialize for SubSystem: '<S449>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S449>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_m);

  /* End of SystemInitialize for SubSystem: '<S449>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S451>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_e,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_e);

  /* End of SystemInitialize for SubSystem: '<S451>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S451>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cw,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cw);

  /* End of SystemInitialize for SubSystem: '<S451>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S510>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ae,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ae,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ae);

  /* End of SystemInitialize for SubSystem: '<S510>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S510>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_j);

  /* End of SystemInitialize for SubSystem: '<S510>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S509>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_m,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_m);

  /* End of SystemInitialize for SubSystem: '<S509>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S509>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_l,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_l);

  /* End of SystemInitialize for SubSystem: '<S509>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S511>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_b);

  /* End of SystemInitialize for SubSystem: '<S511>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S511>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_o,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_o);

  /* End of SystemInitialize for SubSystem: '<S511>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S955>/Signal generator' */
  acdcmg_sim_Signalgenerator_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Signalgenerator_j,
     &acdcmg_sim8_1_sm_grid_simulation_DW.Signalgenerator_j,
     &acdcmg_sim8_1_sm_grid_simulation_P.Signalgenerator_j);

  /* End of SystemInitialize for SubSystem: '<S955>/Signal generator' */

  /* SystemInitialize for Enabled SubSystem: '<S955>/Harmonic Generator' */
  acdcmg_s_HarmonicGenerator_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.HarmonicGenerator_g,
     &acdcmg_sim8_1_sm_grid_simulation_P.HarmonicGenerator_g);

  /* End of SystemInitialize for SubSystem: '<S955>/Harmonic Generator' */

  /* SystemInitialize for Enabled SubSystem: '<S480>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ad,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ad,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ad);

  /* End of SystemInitialize for SubSystem: '<S480>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S480>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_b,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_b);

  /* End of SystemInitialize for SubSystem: '<S480>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S479>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_an,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_an,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_an);

  /* End of SystemInitialize for SubSystem: '<S479>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S479>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_p);

  /* End of SystemInitialize for SubSystem: '<S479>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S481>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_c);

  /* End of SystemInitialize for SubSystem: '<S481>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S481>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_n,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_n);

  /* End of SystemInitialize for SubSystem: '<S481>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S540>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dq,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dq,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dq);

  /* End of SystemInitialize for SubSystem: '<S540>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S540>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_mf,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_mf);

  /* End of SystemInitialize for SubSystem: '<S540>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S539>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_dw,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dw,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dw);

  /* End of SystemInitialize for SubSystem: '<S539>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S539>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_j2);

  /* End of SystemInitialize for SubSystem: '<S539>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S541>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_g,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_g);

  /* End of SystemInitialize for SubSystem: '<S541>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S541>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_h);

  /* End of SystemInitialize for SubSystem: '<S541>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S420>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_j,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_j);

  /* End of SystemInitialize for SubSystem: '<S420>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S420>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_il,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_il);

  /* End of SystemInitialize for SubSystem: '<S420>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S419>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_p,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_p);

  /* End of SystemInitialize for SubSystem: '<S419>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S419>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_i,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_i);

  /* End of SystemInitialize for SubSystem: '<S419>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S421>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_a,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_a);

  /* End of SystemInitialize for SubSystem: '<S421>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S421>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_id,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_id);

  /* End of SystemInitialize for SubSystem: '<S421>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S570>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_h,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_h);

  /* End of SystemInitialize for SubSystem: '<S570>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S570>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cc,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cc);

  /* End of SystemInitialize for SubSystem: '<S570>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S569>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_ay,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ay,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ay);

  /* End of SystemInitialize for SubSystem: '<S569>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S569>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_p2,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_p2);

  /* End of SystemInitialize for SubSystem: '<S569>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S571>/TrueRMS ' */
  acdcmg_sim8_1_sm_TrueRMS_n_Init
    (&acdcmg_sim8_1_sm_grid_simulation_DW.TrueRMS_gs,
     &acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_gs,
     &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_gs);

  /* End of SystemInitialize for SubSystem: '<S571>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S571>/RMS ' */
  acdcmg_sim8_1_sm_gri_RMS_h_Init(&acdcmg_sim8_1_sm_grid_simulation_DW.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_P.RMS_cb,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_cb);

  /* End of SystemInitialize for SubSystem: '<S571>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S409>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS);

  /* End of SystemInitialize for SubSystem: '<S409>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S409>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS);

  /* End of SystemInitialize for SubSystem: '<S409>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S631>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_jo,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_jo);

  /* End of SystemInitialize for SubSystem: '<S631>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S631>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_mi,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_mi);

  /* End of SystemInitialize for SubSystem: '<S631>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S643>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_pj,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_pj);

  /* End of SystemInitialize for SubSystem: '<S643>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S643>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dt,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_dt);

  /* End of SystemInitialize for SubSystem: '<S643>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S655>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_bz,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_bz);

  /* End of SystemInitialize for SubSystem: '<S655>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S655>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_jr,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_jr);

  /* End of SystemInitialize for SubSystem: '<S655>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S667>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_k,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_k);

  /* End of SystemInitialize for SubSystem: '<S667>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S667>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ik,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ik);

  /* End of SystemInitialize for SubSystem: '<S667>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S679>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_hk,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_hk);

  /* End of SystemInitialize for SubSystem: '<S679>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S679>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_j2,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_j2);

  /* End of SystemInitialize for SubSystem: '<S679>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S691>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_my,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_my);

  /* End of SystemInitialize for SubSystem: '<S691>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S691>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ml,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_ml);

  /* End of SystemInitialize for SubSystem: '<S691>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S703>/RMS ' */
  acdcmg_sim8_1_sm_grid__RMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.RMS_ng,
    &acdcmg_sim8_1_sm_grid_simulation_X.RMS_ng);

  /* End of SystemInitialize for SubSystem: '<S703>/RMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S703>/TrueRMS ' */
  acdcmg_sim8_1_sm_g_TrueRMS_Init(&acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_f,
    &acdcmg_sim8_1_sm_grid_simulation_X.TrueRMS_f);

  /* End of SystemInitialize for SubSystem: '<S703>/TrueRMS ' */

  /* SystemInitialize for Enabled SubSystem: '<S905>/Subsystem1' */
  acdcmg_sim8_1_s_Subsystem1_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_k,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystem1_k);

  /* End of SystemInitialize for SubSystem: '<S905>/Subsystem1' */

  /* SystemInitialize for Enabled SubSystem: '<S905>/Subsystem - pi//2 delay' */
  acdcmg_s_Subsystempi2delay_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_l,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystempi2delay_l);

  /* End of SystemInitialize for SubSystem: '<S905>/Subsystem - pi//2 delay' */

  /* SystemInitialize for Enabled SubSystem: '<S899>/Subsystem1' */
  acdcmg_sim8_1_s_Subsystem1_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_m,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystem1_m);

  /* End of SystemInitialize for SubSystem: '<S899>/Subsystem1' */

  /* SystemInitialize for Enabled SubSystem: '<S899>/Subsystem - pi//2 delay' */
  acdcmg_s_Subsystempi2delay_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_j,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystempi2delay_j);

  /* End of SystemInitialize for SubSystem: '<S899>/Subsystem - pi//2 delay' */

  /* SystemInitialize for Enabled SubSystem: '<S912>/Subsystem1' */
  /* SystemInitialize for Outport: '<S916>/alpha_beta' */
  acdcmg_sim8_1_sm_grid_simulation_B.Fcn =
    acdcmg_sim8_1_sm_grid_simulation_P.alpha_beta_Y0_m[0];
  acdcmg_sim8_1_sm_grid_simulation_B.Fcn1 =
    acdcmg_sim8_1_sm_grid_simulation_P.alpha_beta_Y0_m[1];

  /* End of SystemInitialize for SubSystem: '<S912>/Subsystem1' */

  /* SystemInitialize for Enabled SubSystem: '<S912>/Subsystem - pi//2 delay' */
  /* SystemInitialize for Outport: '<S915>/alpha_beta' */
  acdcmg_sim8_1_sm_grid_simulation_B.Fcn_g =
    acdcmg_sim8_1_sm_grid_simulation_P.alpha_beta_Y0[0];
  acdcmg_sim8_1_sm_grid_simulation_B.Fcn1_n =
    acdcmg_sim8_1_sm_grid_simulation_P.alpha_beta_Y0[1];

  /* End of SystemInitialize for SubSystem: '<S912>/Subsystem - pi//2 delay' */

  /* SystemInitialize for Enabled SubSystem: '<S864>/Automatic Gain Control' */
  /* InitializeConditions for DiscreteIntegrator: '<S874>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_d =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S876>/S-Function' */
  /* Level2 S-Function Block: '<S876>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S875>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_g =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition;

  /* InitializeConditions for UnitDelay: '<S874>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_j =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition;

  /* InitializeConditions for DiscreteIntegrator: '<S877>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_DSTATE_p =
    acdcmg_sim8_1_sm_grid_simulation_P.Integ4_IC_h;

  /* InitializeConditions for S-Function (sfun_discreteVariableDelay): '<S879>/S-Function' */
  /* Level2 S-Function Block: '<S879>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];
    sfcnInitializeConditions(rts);
    if (ssGetErrorStatus(rts) != (NULL))
      return;
  }

  /* InitializeConditions for UnitDelay: '<S878>/Unit Delay' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay_DSTATE_p =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay_InitialCondition_b;

  /* InitializeConditions for UnitDelay: '<S877>/Unit Delay1' */
  acdcmg_sim8_1_sm_grid_simulation_DW.UnitDelay1_DSTATE_l =
    acdcmg_sim8_1_sm_grid_simulation_P.UnitDelay1_InitialCondition_a;

  /* SystemInitialize for Enabled SubSystem: '<S880>/Subsystem1' */
  acdcmg_sim8_1_s_Subsystem1_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1_d,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystem1_d);

  /* End of SystemInitialize for SubSystem: '<S880>/Subsystem1' */

  /* SystemInitialize for Enabled SubSystem: '<S880>/Subsystem - pi//2 delay' */
  acdcmg_s_Subsystempi2delay_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay_lj,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystempi2delay_lj);

  /* End of SystemInitialize for SubSystem: '<S880>/Subsystem - pi//2 delay' */

  /* SystemInitialize for Outport: '<S865>/Gain' */
  acdcmg_sim8_1_sm_grid_simulation_B.MathFunction =
    acdcmg_sim8_1_sm_grid_simulation_P.Gain_Y0;

  /* End of SystemInitialize for SubSystem: '<S864>/Automatic Gain Control' */

  /* SystemInitialize for Enabled SubSystem: '<S893>/Subsystem1' */
  acdcmg_sim8_1_s_Subsystem1_Init(&acdcmg_sim8_1_sm_grid_simulation_B.Subsystem1,
    &acdcmg_sim8_1_sm_grid_simulation_P.Subsystem1);

  /* End of SystemInitialize for SubSystem: '<S893>/Subsystem1' */

  /* SystemInitialize for Enabled SubSystem: '<S893>/Subsystem - pi//2 delay' */
  acdcmg_s_Subsystempi2delay_Init
    (&acdcmg_sim8_1_sm_grid_simulation_B.Subsystempi2delay,
     &acdcmg_sim8_1_sm_grid_simulation_P.Subsystempi2delay);

  /* End of SystemInitialize for SubSystem: '<S893>/Subsystem - pi//2 delay' */

  /* Enable for DiscreteIntegrator: '<S717>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE = 1;

  /* Enable for DiscreteIntegrator: '<S152>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_n = 1;

  /* Enable for DiscreteIntegrator: '<S154>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_j = 1;

  /* Enable for DiscreteIntegrator: '<S157>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_l = 1;

  /* Enable for DiscreteIntegrator: '<S890>/Integ4' */
  acdcmg_sim8_1_sm_grid_simulation_DW.Integ4_SYSTEM_ENABLE_m = 1;
}

/* Model terminate function */
void acdcmg_sim8_1_sm_grid_simulation_terminate(void)
{
  /* Terminate for S-Function (fts5stub): '<S1027>/S-Function' */
  /* Level2 S-Function Block: '<S1027>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[2];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1039>/S-Function' */
  /* Level2 S-Function Block: '<S1039>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[3];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1025>/S-Function' */
  /* Level2 S-Function Block: '<S1025>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[4];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1037>/S-Function' */
  /* Level2 S-Function Block: '<S1037>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[5];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1026>/S-Function' */
  /* Level2 S-Function Block: '<S1026>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[6];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1038>/S-Function' */
  /* Level2 S-Function Block: '<S1038>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[7];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1091>/S-Function' */
  /* Level2 S-Function Block: '<S1091>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[8];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1079>/S-Function' */
  /* Level2 S-Function Block: '<S1079>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[9];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1089>/S-Function' */
  /* Level2 S-Function Block: '<S1089>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[10];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1077>/S-Function' */
  /* Level2 S-Function Block: '<S1077>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[11];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1090>/S-Function' */
  /* Level2 S-Function Block: '<S1090>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[12];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1078>/S-Function' */
  /* Level2 S-Function Block: '<S1078>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[13];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1105>/S-Function' */
  /* Level2 S-Function Block: '<S1105>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[14];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1117>/S-Function' */
  /* Level2 S-Function Block: '<S1117>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[15];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1103>/S-Function' */
  /* Level2 S-Function Block: '<S1103>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[16];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1115>/S-Function' */
  /* Level2 S-Function Block: '<S1115>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[17];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1104>/S-Function' */
  /* Level2 S-Function Block: '<S1104>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[18];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1116>/S-Function' */
  /* Level2 S-Function Block: '<S1116>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[19];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1131>/S-Function' */
  /* Level2 S-Function Block: '<S1131>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[20];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1143>/S-Function' */
  /* Level2 S-Function Block: '<S1143>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[21];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1129>/S-Function' */
  /* Level2 S-Function Block: '<S1129>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[22];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1141>/S-Function' */
  /* Level2 S-Function Block: '<S1141>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[23];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1130>/S-Function' */
  /* Level2 S-Function Block: '<S1130>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[24];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1142>/S-Function' */
  /* Level2 S-Function Block: '<S1142>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[25];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (RECV_Param): '<S963>/S-Function' */
  /* Level2 S-Function Block: '<S963>/S-Function' (RECV_Param) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[26];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1227>/State-Space' */
  /* Level2 S-Function Block: '<S1227>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[27];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1220>/State-Space' */
  /* Level2 S-Function Block: '<S1220>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[28];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1197>/S-Function' */
  /* Level2 S-Function Block: '<S1197>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[29];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1198>/S-Function' */
  /* Level2 S-Function Block: '<S1198>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[30];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1199>/S-Function' */
  /* Level2 S-Function Block: '<S1199>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[31];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1200>/S-Function' */
  /* Level2 S-Function Block: '<S1200>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[32];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1201>/S-Function' */
  /* Level2 S-Function Block: '<S1201>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[33];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1202>/S-Function' */
  /* Level2 S-Function Block: '<S1202>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[34];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1219>/State-Space' */
  /* Level2 S-Function Block: '<S1219>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[35];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1203>/S-Function' */
  /* Level2 S-Function Block: '<S1203>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[36];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1204>/S-Function' */
  /* Level2 S-Function Block: '<S1204>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[37];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1226>/State-Space' */
  /* Level2 S-Function Block: '<S1226>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[38];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1205>/S-Function' */
  /* Level2 S-Function Block: '<S1205>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[39];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1206>/S-Function' */
  /* Level2 S-Function Block: '<S1206>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[40];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1228>/State-Space' */
  /* Level2 S-Function Block: '<S1228>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[41];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1196>/S-Function' */
  /* Level2 S-Function Block: '<S1196>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[42];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1208>/S-Function' */
  /* Level2 S-Function Block: '<S1208>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[43];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1209>/S-Function' */
  /* Level2 S-Function Block: '<S1209>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[44];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1210>/S-Function' */
  /* Level2 S-Function Block: '<S1210>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[45];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1207>/S-Function' */
  /* Level2 S-Function Block: '<S1207>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[46];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1211>/S-Function' */
  /* Level2 S-Function Block: '<S1211>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[47];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1212>/S-Function' */
  /* Level2 S-Function Block: '<S1212>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[48];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1213>/S-Function' */
  /* Level2 S-Function Block: '<S1213>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[49];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1214>/S-Function' */
  /* Level2 S-Function Block: '<S1214>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[50];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S718>/S-Function' */
  /* Level2 S-Function Block: '<S718>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1215>/S-Function' */
  /* Level2 S-Function Block: '<S1215>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[52];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1216>/S-Function' */
  /* Level2 S-Function Block: '<S1216>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[53];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (OP_SEND): '<S1217>/S-Function' */
  /* Level2 S-Function Block: '<S1217>/S-Function' (OP_SEND) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[54];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S153>/S-Function' */
  /* Level2 S-Function Block: '<S153>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S155>/S-Function' */
  /* Level2 S-Function Block: '<S155>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S158>/S-Function' */
  /* Level2 S-Function Block: '<S158>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];
    sfcnTerminate(rts);
  }

  /* Terminate for Enabled SubSystem: '<S864>/Automatic Gain Control' */

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S876>/S-Function' */
  /* Level2 S-Function Block: '<S876>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S879>/S-Function' */
  /* Level2 S-Function Block: '<S879>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];
    sfcnTerminate(rts);
  }

  /* End of Terminate for SubSystem: '<S864>/Automatic Gain Control' */

  /* Terminate for S-Function (sfun_discreteVariableDelay): '<S892>/S-Function' */
  /* Level2 S-Function Block: '<S892>/S-Function' (sfun_discreteVariableDelay) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1051>/S-Function' */
  /* Level2 S-Function Block: '<S1051>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[59];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1063>/S-Function' */
  /* Level2 S-Function Block: '<S1063>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[60];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1218>/State-Space' */
  /* Level2 S-Function Block: '<S1218>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[61];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1052>/S-Function' */
  /* Level2 S-Function Block: '<S1052>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[62];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1064>/S-Function' */
  /* Level2 S-Function Block: '<S1064>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[63];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1221>/State-Space' */
  /* Level2 S-Function Block: '<S1221>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[64];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1053>/S-Function' */
  /* Level2 S-Function Block: '<S1053>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[65];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (fts5stub): '<S1065>/S-Function' */
  /* Level2 S-Function Block: '<S1065>/S-Function' (fts5stub) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[66];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1222>/State-Space' */
  /* Level2 S-Function Block: '<S1222>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[67];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1223>/State-Space' */
  /* Level2 S-Function Block: '<S1223>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[68];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1224>/State-Space' */
  /* Level2 S-Function Block: '<S1224>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[69];
    sfcnTerminate(rts);
  }

  /* Terminate for S-Function (ssn_sfun_v1): '<S1225>/State-Space' */
  /* Level2 S-Function Block: '<S1225>/State-Space' (ssn_sfun_v1) */
  {
    SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[70];
    sfcnTerminate(rts);
  }
}

/*========================================================================*
 * Start of Classic call interface                                        *
 *========================================================================*/

/* Solver interface called by GRT_Main */
#ifndef USE_GENERATED_SOLVER

void rt_ODECreateIntegrationData(RTWSolverInfo *si)
{
  UNUSED_PARAMETER(si);
  return;
}                                      /* do nothing */

void rt_ODEDestroyIntegrationData(RTWSolverInfo *si)
{
  UNUSED_PARAMETER(si);
  return;
}                                      /* do nothing */

void rt_ODEUpdateContinuousStates(RTWSolverInfo *si)
{
  UNUSED_PARAMETER(si);
  return;
}                                      /* do nothing */

#endif

void MdlOutputs(int_T tid)
{
  acdcmg_sim8_1_sm_grid_simulation_output();
  UNUSED_PARAMETER(tid);
}

void MdlUpdate(int_T tid)
{
  acdcmg_sim8_1_sm_grid_simulation_update();
  UNUSED_PARAMETER(tid);
}

void MdlInitializeSizes(void)
{
}

void MdlInitializeSampleTimes(void)
{
}

void MdlInitialize(void)
{
}

void MdlStart(void)
{
  acdcmg_sim8_1_sm_grid_simulation_initialize();
}

void MdlTerminate(void)
{
  acdcmg_sim8_1_sm_grid_simulation_terminate();
}

/* Registration function */
RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T *acdcmg_sim8_1_sm_grid_simulation
  (void)
{
  /* Registration code */

  /* initialize non-finites */
  rt_InitInfAndNaN(sizeof(real_T));

  /* non-finite (run-time) assignments */
  acdcmg_sim8_1_sm_grid_simulation_P.Saturation_LowerSat = rtMinusInf;
  acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_h = rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.inti_LowerSat = rtMinusInf;
  acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_k = rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.Saturation_UpperSat_m = rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.DiscreteTimeIntegrator_UpperS_i = rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.Saturation1_UpperSat = rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c0.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_kx.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_k.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_gs.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_h.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ay.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_g.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dq.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_dw.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_b.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ae.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_m.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_c.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_ad.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_an.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_e.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_i.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_d.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_a.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_j.Saturationtoavoidnegativesqrt_U =
    rtInf;
  acdcmg_sim8_1_sm_grid_simulation_P.TrueRMS_p.Saturationtoavoidnegativesqrt_U =
    rtInf;

  /* initialize real-time model */
  (void) memset((void *)acdcmg_sim8_1_sm_grid_simulation_M, 0,
                sizeof(RT_MODEL_acdcmg_sim8_1_sm_grid_simulation_T));

  {
    /* Setup solver object */
    rtsiSetSimTimeStepPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                          &acdcmg_sim8_1_sm_grid_simulation_M->Timing.simTimeStep);
    rtsiSetTPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo, &rtmGetTPtr
                (acdcmg_sim8_1_sm_grid_simulation_M));
    rtsiSetStepSizePtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                       &acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize0);
    rtsiSetdXPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                 &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.derivs);
    rtsiSetContStatesPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                         (real_T **)
                         &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.contStates);
    rtsiSetNumContStatesPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numContStates);
    rtsiSetNumPeriodicContStatesPtr
      (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
       &acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numPeriodicContStates);
    rtsiSetPeriodicContStateIndicesPtr
      (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
       &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.periodicContStateIndices);
    rtsiSetPeriodicContStateRangesPtr
      (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
       &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.periodicContStateRanges);
    rtsiSetErrorStatusPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                          (&rtmGetErrorStatus(acdcmg_sim8_1_sm_grid_simulation_M)));
    rtsiSetRTModelPtr(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                      acdcmg_sim8_1_sm_grid_simulation_M);
  }

  rtsiSetSimTimeStep(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                     MAJOR_TIME_STEP);
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.deltaY=
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.OdeDeltaY;
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[0] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[0];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[1] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[1];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[2] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[2];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[3] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[3];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[4] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[4];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[5] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[5];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[6] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[6];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[7] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[7];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[8] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[8];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[9] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[9];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[10] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[10];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[11] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[11];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.f[12] =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeF[12];
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData.x0 =
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.odeX0;
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.contStates = ((real_T *)
    &acdcmg_sim8_1_sm_grid_simulation_X);
  rtsiSetSolverData(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo, (void *)
                    &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.intgData);
  rtsiSetSolverName(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,"ode8");
  acdcmg_sim8_1_sm_grid_simulation_M->solverInfoPtr =
    (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo);

  /* Initialize timing info */
  {
    int_T *mdlTsMap =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimeTaskIDArray;
    mdlTsMap[0] = 0;
    mdlTsMap[1] = 1;
    mdlTsMap[2] = 2;
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimeTaskIDPtr = (&mdlTsMap
      [0]);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimes =
      (&acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimesArray[0]);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.offsetTimes =
      (&acdcmg_sim8_1_sm_grid_simulation_M->Timing.offsetTimesArray[0]);

    /* task periods */
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimes[0] = (0.0);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimes[1] = (4.0E-5);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleTimes[2] =
      (0.00024000000000000003);

    /* task offsets */
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.offsetTimes[0] = (0.0);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.offsetTimes[1] = (0.0);
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.offsetTimes[2] = (0.0);
  }

  rtmSetTPtr(acdcmg_sim8_1_sm_grid_simulation_M,
             &acdcmg_sim8_1_sm_grid_simulation_M->Timing.tArray[0]);

  {
    int_T *mdlSampleHits =
      acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleHitArray;
    mdlSampleHits[0] = 1;
    mdlSampleHits[1] = 1;
    mdlSampleHits[2] = 1;
    acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleHits = (&mdlSampleHits[0]);
  }

  rtmSetTFinal(acdcmg_sim8_1_sm_grid_simulation_M, 0.5);
  acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize0 = 4.0E-5;
  acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize1 = 4.0E-5;
  acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize2 = 0.00024000000000000003;

  /* Setup for data logging */
  {
    static RTWLogInfo rt_DataLoggingInfo;
    rt_DataLoggingInfo.loggingInterval = NULL;
    acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo = &rt_DataLoggingInfo;
  }

  /* Setup for data logging */
  {
    rtliSetLogXSignalInfo(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, (NULL));
    rtliSetLogXSignalPtrs(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, (NULL));
    rtliSetLogT(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, "tout");
    rtliSetLogX(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, "");
    rtliSetLogXFinal(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, "");
    rtliSetLogVarNameModifier(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo,
      "rt_");
    rtliSetLogFormat(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, 0);
    rtliSetLogMaxRows(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, 1000);
    rtliSetLogDecimation(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, 1);
    rtliSetLogY(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, "");
    rtliSetLogYSignalInfo(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, (NULL));
    rtliSetLogYSignalPtrs(acdcmg_sim8_1_sm_grid_simulation_M->rtwLogInfo, (NULL));
  }

  acdcmg_sim8_1_sm_grid_simulation_M->solverInfoPtr =
    (&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo);
  acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize = (4.0E-5);
  rtsiSetFixedStepSize(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo, 4.0E-5);
  rtsiSetSolverMode(&acdcmg_sim8_1_sm_grid_simulation_M->solverInfo,
                    SOLVER_MODE_SINGLETASKING);

  /* block I/O */
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.blockIO = ((void *)
    &acdcmg_sim8_1_sm_grid_simulation_B);
  (void) memset(((void *) &acdcmg_sim8_1_sm_grid_simulation_B), 0,
                sizeof(B_acdcmg_sim8_1_sm_grid_simulation_T));

  /* parameters */
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.defaultParam = ((real_T *)
    &acdcmg_sim8_1_sm_grid_simulation_P);

  /* states (continuous) */
  {
    real_T *x = (real_T *) &acdcmg_sim8_1_sm_grid_simulation_X;
    acdcmg_sim8_1_sm_grid_simulation_M->ModelData.contStates = (x);
    (void) memset((void *)&acdcmg_sim8_1_sm_grid_simulation_X, 0,
                  sizeof(X_acdcmg_sim8_1_sm_grid_simulation_T));
  }

  /* states (dwork) */
  acdcmg_sim8_1_sm_grid_simulation_M->ModelData.dwork = ((void *)
    &acdcmg_sim8_1_sm_grid_simulation_DW);
  (void) memset((void *)&acdcmg_sim8_1_sm_grid_simulation_DW, 0,
                sizeof(DW_acdcmg_sim8_1_sm_grid_simulation_T));

  /* child S-Function registration */
  {
    RTWSfcnInfo *sfcnInfo =
      &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.sfcnInfo;
    acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo = (sfcnInfo);
    rtssSetErrorStatusPtr(sfcnInfo, (&rtmGetErrorStatus
      (acdcmg_sim8_1_sm_grid_simulation_M)));
    rtssSetNumRootSampTimesPtr(sfcnInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numSampTimes);
    acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.taskTimePtrs[0] =
      &(rtmGetTPtr(acdcmg_sim8_1_sm_grid_simulation_M)[0]);
    acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.taskTimePtrs[1] =
      &(rtmGetTPtr(acdcmg_sim8_1_sm_grid_simulation_M)[1]);
    acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.taskTimePtrs[2] =
      &(rtmGetTPtr(acdcmg_sim8_1_sm_grid_simulation_M)[2]);
    rtssSetTPtrPtr(sfcnInfo,
                   acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.taskTimePtrs);
    rtssSetTStartPtr(sfcnInfo, &rtmGetTStart(acdcmg_sim8_1_sm_grid_simulation_M));
    rtssSetTFinalPtr(sfcnInfo, &rtmGetTFinal(acdcmg_sim8_1_sm_grid_simulation_M));
    rtssSetTimeOfLastOutputPtr(sfcnInfo, &rtmGetTimeOfLastOutput
      (acdcmg_sim8_1_sm_grid_simulation_M));
    rtssSetStepSizePtr(sfcnInfo,
                       &acdcmg_sim8_1_sm_grid_simulation_M->Timing.stepSize);
    rtssSetStopRequestedPtr(sfcnInfo, &rtmGetStopRequested
      (acdcmg_sim8_1_sm_grid_simulation_M));
    rtssSetDerivCacheNeedsResetPtr(sfcnInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.derivCacheNeedsReset);
    rtssSetZCCacheNeedsResetPtr(sfcnInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.zCCacheNeedsReset);
    rtssSetContTimeOutputInconsistentWithStateAtMajorStepPtr(sfcnInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->ModelData.CTOutputIncnstWithState);
    rtssSetSampleHitsPtr(sfcnInfo,
                         &acdcmg_sim8_1_sm_grid_simulation_M->Timing.sampleHits);
    rtssSetPerTaskSampleHitsPtr(sfcnInfo,
      &acdcmg_sim8_1_sm_grid_simulation_M->Timing.perTaskSampleHits);
    rtssSetSimModePtr(sfcnInfo, &acdcmg_sim8_1_sm_grid_simulation_M->simMode);
    rtssSetSolverInfoPtr(sfcnInfo,
                         &acdcmg_sim8_1_sm_grid_simulation_M->solverInfoPtr);
  }

  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numSFcns = (71);

  /* register each child */
  {
    (void) memset((void *)
                  &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.childSFunctions
                  [0], 0,
                  71*sizeof(SimStruct));
    acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions =
      (&acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.childSFunctionPtrs[0]);

    {
      int_T i;
      for (i = 0; i < 71; i++) {
        acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[i] =
          (&acdcmg_sim8_1_sm_grid_simulation_M->
           NonInlinedSFcns.childSFunctions[i]);
      }
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S876>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[0];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [0]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [0]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [0]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [0]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [0]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [0]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [0]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_j;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Delay_d;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_h));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Inverter   300 (DC) // 150 V (AC) P_nom 10 kW4/Control of  Inverter/Subsystem2/PLL (3ph)/Model/Automatic Gain Control/Positive-Sequence (PLL-Driven)/Mean (Variable Frequency)1/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_e);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ml);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_a);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn0.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_e);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ml);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_a);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 0.00024000000000000003);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 2;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S879>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[1];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [1]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [1]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [1]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [1]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [1]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [1]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [1]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_p;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Delay_c;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_k));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Inverter   300 (DC) // 150 V (AC) P_nom 10 kW4/Control of  Inverter/Subsystem2/PLL (3ph)/Model/Automatic Gain Control/Positive-Sequence (PLL-Driven)/Mean (Variable Frequency)2/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_m);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_o);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_o);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_h);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_jd);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_il);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_j);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn1.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_jd);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_il);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_j);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 0.00024000000000000003);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 2;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1027>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[2];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [2]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [2]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [2]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [2]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [2]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [2]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [2]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_f;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL1/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_l);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_oc);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_d);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_c);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn2.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1039>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[3];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [3]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [3]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [3]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [3]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [3]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [3]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [3]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_j;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_da;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_g));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_c));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_o[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL2/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_n);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_e);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_b);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_f);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn3.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_o[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1025>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[4];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [4]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [4]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [4]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [4]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [4]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [4]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [4]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_m;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_l;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_g));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_g[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL1/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_h);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_d);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_bf);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_g);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn4.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_g[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1037>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[5];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [5]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [5]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [5]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [5]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [5]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [5]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [5]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mms;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fv;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_j));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_h));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_b[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL2/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_m4);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_l);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_d1);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_p);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn5.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_b[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1026>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[6];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [6]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [6]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [6]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [6]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [6]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [6]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [6]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_b;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_c;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_h));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_f));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_l[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL1/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_c);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_p);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_p);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_i);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn6.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_l[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1038>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[7];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [7]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [7]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [7]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [7]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [7]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [7]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [7]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_oc;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_kx;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m4));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_a));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_c[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine/SL2/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_d);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_do);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_c);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_o);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn7.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_c[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1091>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[8];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [8]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [8]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [8]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [8]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [8]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [8]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [8]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_c;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_hx;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_i));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_at));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_os[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL2/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_o);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_g);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_e);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_a);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn8.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_os[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1079>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[9];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [9]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [9]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [9]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [9]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [9]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [9]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [9]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o2;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jt;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_k));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_n));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_h[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL1/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ls);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_n);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_pk);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_cr);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn9.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_h[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1089>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[10];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [10]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [10]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [10]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [10]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [10]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [10]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [10]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_d;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_b4;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_id));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_n4));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_p[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL2/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_h0);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_lo);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_eq);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_fo);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn10.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_p[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1077>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[11];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [11]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [11]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [11]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [11]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [11]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [11]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [11]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_l;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pp;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_d));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_l));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_m[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL1/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_lz);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_gz);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_bv);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_gy);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn11.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_m[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1090>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[12];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [12]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [12]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [12]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [12]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [12]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [12]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [12]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_p;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_mt;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_hw));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_k));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_lk[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL2/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_g);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_b);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_j);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_aa);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn12.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_lk[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1078>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[13];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [13]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [13]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [13]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [13]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [13]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [13]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [13]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_mm;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_jz;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_hx));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_m));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_i[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine2/SL1/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_e);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_j);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_dx);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_hc);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn13.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_i[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1105>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[14];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [14]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [14]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [14]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [14]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [14]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [14]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [14]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_bq;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p1;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_p));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_i));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_ij[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL1/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_eb);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_gd);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_be);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_k);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn14.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_ij[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1117>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[15];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [15]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [15]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [15]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [15]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [15]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [15]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [15]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_i;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_gw;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_dv));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_mh));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_d[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL2/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ei);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_m);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_c5);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_kr);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn15.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_d[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1103>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[16];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [16]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [16]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [16]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [16]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [16]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [16]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [16]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_e;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_i2;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_f));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_e));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_ow[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL1/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_gb);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_i);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_f);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_j);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn16.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_ow[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1115>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[17];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [17]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [17]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [17]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [17]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [17]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [17]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [17]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_f;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fx;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_b));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_d));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_it[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL2/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_a);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_c);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_fg);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_b);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn17.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_it[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1104>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[18];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [18]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [18]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [18]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [18]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [18]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [18]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [18]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ci;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_c5;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_c));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_gb));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_pj[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL1/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ou);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_b0);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_jq);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_aa1);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn18.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_pj[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1116>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[19];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [19]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [19]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [19]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [19]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [19]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [19]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [19]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_g;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bt;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_g1));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_dp));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_gx[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine5/SL2/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_h01);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_cn);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_n);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_c1);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn19.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_gx[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1131>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[20];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [20]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [20]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [20]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [20]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [20]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [20]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [20]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ga;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ei;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_mu));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_mq));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_k[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL1/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_b);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_i5);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_dc);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_oa);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn20.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_k[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1143>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[21];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [21]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [21]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [21]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [21]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [21]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [21]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [21]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_n;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_hi;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cs));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_kk));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_a[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL2/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_f);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_a);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_fh);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_po);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn21.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_a[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1129>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[22];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [22]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [22]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [22]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [22]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [22]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [22]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [22]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cq;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_nr;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_n));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_an));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_li[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL1/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_k);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_b3);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_p3);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_d);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn22.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_li[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1141>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[23];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [23]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [23]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [23]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [23]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [23]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [23]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [23]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ix;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_el;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cn));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_da));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_pt[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL2/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ni);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_h);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_k);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_m);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn23.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_pt[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1130>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[24];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [24]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [24]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [24]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [24]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [24]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [24]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [24]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_cz;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j2;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_cd));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_lv));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_bl[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL1/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_cz);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_ey);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_k4);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_iw);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn24.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_bl[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1142>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[25];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [25]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [25]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [25]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [25]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [25]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [25]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [25]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_o;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_bj;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_fg));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_nr));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_bf[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine6/SL2/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ln);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_pc);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_ba);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_he);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn25.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_bf[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S963>/S-Function (RECV_Param) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[26];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [26]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [26]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [26]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [26]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [26]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [26]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [26]);
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 8);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.SFunction));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/OpComm1/Receive/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn26.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_fx);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_dv);
      }

      /* registration */
      RECV_Param(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1227>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[27];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [27]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [27]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [27]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [27]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [27]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [27]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [27]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.UPtrs0;

          {
            int_T i1;
            const real_T *u0 =
              &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_j[0];
            for (i1=0; i1 < 9; i1++) {
              sfcnUPtrs[i1] = &u0[i1];
            }

            sfcnUPtrs[9] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2;
            sfcnUPtrs[10] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_i;
            sfcnUPtrs[11] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_iz;
            sfcnUPtrs[12] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_m;
            sfcnUPtrs[13] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_o;
            sfcnUPtrs[14] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_p;
            sfcnUPtrs[15] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_pp;
            sfcnUPtrs[16] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a;
            sfcnUPtrs[17] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_oz;
            sfcnUPtrs[18] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_c;
            sfcnUPtrs[19] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_f;
            sfcnUPtrs[20] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a3;
            sfcnUPtrs[21] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_p1;
            sfcnUPtrs[22] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_pe;
            sfcnUPtrs[23] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_cf;
            sfcnUPtrs[24] = &acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[0];
            sfcnUPtrs[25] = &acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[1];
            sfcnUPtrs[26] = &acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_oz[2];
            sfcnUPtrs[27] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5[0];
            sfcnUPtrs[28] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5[1];
            sfcnUPtrs[29] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5[2];
          }

          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 30);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_e;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_n;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_a;
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_c;
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nm;
          sfcnUPtrs[8] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_f;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 9);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 90);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 9);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o2));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel8/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn27.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 38);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9[0]);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 30);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_c[0]);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 9);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_e[0]);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 9);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_b[0]);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 9);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_f[0]);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 9);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_m[0]);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_a[0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 90);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_n[0]);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 90);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_a2
                   [0]);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_i);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1220>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[28];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [28]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [28]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [28]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [28]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [28]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [28]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [28]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.UPtrs0;

          {
            int_T i1;
            const real_T *u0 =
              &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents[0];
            for (i1=0; i1 < 9; i1++) {
              sfcnUPtrs[i1] = &u0[i1];
            }

            sfcnUPtrs[9] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch2_h;
            sfcnUPtrs[10] = &acdcmg_sim8_1_sm_grid_simulation_B.Divide;
            sfcnUPtrs[11] = &acdcmg_sim8_1_sm_grid_simulation_B.Divide2;
            sfcnUPtrs[12] = &acdcmg_sim8_1_sm_grid_simulation_B.Divide1;
            sfcnUPtrs[13] = &acdcmg_sim8_1_sm_grid_simulation_B.Divide3;
            sfcnUPtrs[14] = &acdcmg_sim8_1_sm_grid_simulation_B.Divide_d;
            sfcnUPtrs[15] = &acdcmg_sim8_1_sm_grid_simulation_B.IL;
            sfcnUPtrs[16] = &acdcmg_sim8_1_sm_grid_simulation_B.UnitDelay_m;
            sfcnUPtrs[17] = &acdcmg_sim8_1_sm_grid_simulation_B.eee;
          }

          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 18);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_ga;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_er;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_cy;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_m;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_i;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_j;
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_g2;
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_l3;
          sfcnUPtrs[8] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 9);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 29);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_o));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 9);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o2_d));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel11/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_a);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_j);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_a);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn28.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 10);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_g[0]);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 18);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_h[0]);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 9);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_k[0]);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 9);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_nm
                   [0]);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 9);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kg
                   [0]);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 9);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bm
                   [0]);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_md
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 29);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cm
                   [0]);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 29);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_p[0]);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_d);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_a);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1197>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[29];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [29]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [29]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [29]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [29]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [29]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [29]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [29]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Saturation;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Product;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain;
          sfcnUPtrs[3] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 4);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem10/Send10/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_hw);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn29.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK
                   [0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 4);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1198>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[30];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [30]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [30]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [30]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [30]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [30]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [30]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [30]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.UPtrs0;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_j;
          sfcnUPtrs[1] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Idiode;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 3);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem11/Send11/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_hx);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_b[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn30.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_b[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 3);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1199>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[31];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [31]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [31]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [31]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [31]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [31]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [31]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [31]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.UPtrs0;
          sfcnUPtrs[0] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          sfcnUPtrs[1] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          sfcnUPtrs[2] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          sfcnUPtrs[3] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_k;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 4);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem12/Send12/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ox);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_m[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn31.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_m[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 4);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1200>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[32];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [32]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [32]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [32]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [32]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [32]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [32]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [32]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_k;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem13/Send13/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_nu);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_e[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn32.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_e[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1201>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[33];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [33]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [33]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [33]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [33]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [33]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [33]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [33]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.UPtrs0;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_o;
          sfcnUPtrs[1] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p;
          sfcnUPtrs[2] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h1;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum1;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 4);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem14/Send14/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_p);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_c[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn33.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_c[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 4);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1202>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[34];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [34]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [34]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [34]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [34]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [34]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [34]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [34]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.UPtrs0;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_g5;
          sfcnUPtrs[1] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_pv;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 2);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem15/Send15/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_be);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_n[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn34.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_n[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 2);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1219>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[35];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [35]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [35]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [35]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [35]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [35]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [35]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [35]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[0];
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[1];
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_ju[2];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_j;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_g;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_io;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_b;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_bt;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_h;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 3);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 15);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_od));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 3);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o2_p));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel10/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_k);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_j5);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_g);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn35.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 3);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cd
                   [0]);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 6);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ez
                   [0]);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 3);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_f0
                   [0]);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 3);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cf
                   [0]);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 3);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ne
                   [0]);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 3);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_hs
                   [0]);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kh
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 15);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_af
                   [0]);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 15);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_j[0]);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_gz);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_g);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1203>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[36];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [36]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [36]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [36]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [36]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [36]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [36]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [36]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem16/Send16/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_h4);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_f[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn36.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_f[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1204>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[37];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [37]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [37]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [37]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [37]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [37]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [37]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [37]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_c;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_k;
          sfcnUPtrs[2] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[0];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[1];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_a[2];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[0];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[1];
          sfcnUPtrs[8] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_f[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 9);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem17/Send17/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ds);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ev[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn37.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ev[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 9);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1226>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[38];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [38]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [38]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [38]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [38]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [38]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [38]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [38]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[0];
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[1];
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_e[2];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_k;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_n;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_jj;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_no;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nl;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_af;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 3);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 15);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_ok));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 3);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o2_m));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel7/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_b);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_e);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_m);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn38.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 3);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dt
                   [0]);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 6);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_gw
                   [0]);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 3);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_l[0]);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 3);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_co
                   [0]);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 3);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_pr
                   [0]);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 3);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cy
                   [0]);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_fc
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 15);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_hz
                   [0]);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 15);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_pv
                   [0]);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_no);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_m);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1205>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[39];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [39]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [39]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [39]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [39]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [39]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [39]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [39]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_d;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_a;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_k;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_d;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_a;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_k;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem18/Send18/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_hl);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ce[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn39.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ce[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1206>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[40];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [40]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [40]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [40]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [40]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [40]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [40]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [40]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_e;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_p;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_a;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_e;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_p;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_a;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem19/Send19/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_pc);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_i[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn40.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_i[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1228>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[41];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [41]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [41]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [41]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [41]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [41]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [41]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [41]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[0];
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[1];
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.SwitchCurrents_k[2];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ca;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ij;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_a4;
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[0];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[1];
          sfcnUPtrs[8] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum5_l[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 9);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_fp;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_k;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch3_nf;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 3);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 21);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o1_k));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 3);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o2_h));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel9/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_d);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_d);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_l);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn41.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 9);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_khb[0]);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 9);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ai
                   [0]);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 3);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cw
                   [0]);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 3);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ln
                   [0]);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 3);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bt
                   [0]);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 3);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_hi
                   [0]);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kk
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 21);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_du
                   [0]);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 21);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_hr
                   [0]);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ig);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_l);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1196>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[42];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [42]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [42]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [42]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [42]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [42]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [42]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [42]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_b;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_c;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_m;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_b;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_c;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_m;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem1/Send1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_m0);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_l[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn42.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_l[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1208>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[43];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [43]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [43]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [43]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [43]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [43]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [43]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [43]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_c;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_cp;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_ml;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_c;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_cp;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_ml;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem20/Send20/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_a1);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_k[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn43.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_k[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1209>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[44];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [44]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [44]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [44]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [44]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [44]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [44]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [44]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_f;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_k0;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory1[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory1[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory1[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_o[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem21/Send21/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_lnc);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_o[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn44.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_o[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1210>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[45];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [45]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [45]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [45]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [45]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [45]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [45]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [45]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_i;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_i;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_ay[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_fg[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem22/Send22/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_mu);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_h[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn45.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_h[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1207>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[46];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [46]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [46]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [46]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [46]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [46]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [46]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [46]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_cz;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_c;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_n[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_l[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem2/Send2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_cd);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_g[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn46.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_g[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1211>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[47];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [47]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [47]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [47]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [47]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [47]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [47]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [47]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_p;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_e;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_i;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_p;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_e;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_i;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem3/Send3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_dq);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_eo[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn47.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_eo[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1212>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[48];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [48]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [48]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [48]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [48]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [48]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [48]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [48]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_f3;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_it;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_l[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_j[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem4/Send4/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_hll);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_a[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn48.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_a[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1213>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[49];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [49]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [49]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [49]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [49]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [49]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [49]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [49]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_i;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_j;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_mn;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pa_kW_i;
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pb_kW_j;
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.D_Pc_kW_mn;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 6);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem5/Send5/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_c0);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_lo[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn49.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_lo[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 6);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1214>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[50];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [50]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [50]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [50]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [50]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [50]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [50]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [50]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum4_a;
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.puV_g;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[0];
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[1];
          sfcnUPtrs[4] = &acdcmg_sim8_1_sm_grid_simulation_B.Memory_j[2];
          sfcnUPtrs[5] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[0];
          sfcnUPtrs[6] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[1];
          sfcnUPtrs[7] = &acdcmg_sim8_1_sm_grid_simulation_B.Kv_i[2];
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 8);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem6/Send6/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_db);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_fr[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn50.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_fr[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 8);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S718>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[51];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [51]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [51]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [51]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [51]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [51]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [51]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [51]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.K1;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_e));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Bus_AC//DC3/Battery system/Mean/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_k4);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_h2);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_b5);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_ck);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_nz);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn51.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_nz);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1215>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[52];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [52]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [52]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [52]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [52]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [52]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [52]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [52]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.toKw;
          sfcnUPtrs[1] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.toKw1;
          sfcnUPtrs[3] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_h1;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 4);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem7/Send7/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_by);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_d[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn52.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_d[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 4);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1216>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[53];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [53]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [53]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [53]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [53]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [53]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [53]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [53]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.UPtrs0;
          sfcnUPtrs[0] = ((real_T*) &acdcmg_sim8_1_sm_grid_simulation_RGND);
          sfcnUPtrs[1] = &acdcmg_sim8_1_sm_grid_simulation_B.PowerkW;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.Switch_g1;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 3);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem8/Send8/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_nn);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ol[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn53.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_ol[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 3);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1217>/S-Function (OP_SEND) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[54];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [54]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [54]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [54]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [54]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [54]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [54]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [54]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Pmean_PVkW;
          sfcnUPtrs[1] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_m;
          sfcnUPtrs[2] = &acdcmg_sim8_1_sm_grid_simulation_B.toKw1_b;
          sfcnUPtrs[3] = &acdcmg_sim8_1_sm_grid_simulation_B.RateLimiter;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 4);
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/rtlab_send_subsystem/Subsystem9/Send9/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.params;
        ssSetSFcnParamsCount(rts, 1);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_i);
      }

      /* work vectors */
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_bb[0]);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn54.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* IWORK */
        ssSetDWorkWidth(rts, 0, 5);
        ssSetDWorkDataType(rts, 0,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_bb[0]);
      }

      /* registration */
      OP_SEND(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 4);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S153>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[55];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [55]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [55]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [55]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [55]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [55]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [55]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [55]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_g;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.K1_d;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_m));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Boost converter 2 5 kHz - 300V /MPPT Controller using  Incremental Conductance and  Integral Regulator  technique /MPPT/Mean/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_kw);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_jh);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_jf);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_n);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_l);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_oo);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_h);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn55.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_l);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_oo);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_h);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S155>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[56];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [56]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [56]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [56]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [56]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [56]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [56]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [56]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_b;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.K1_j;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_p));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Boost converter 2 5 kHz - 300V /MPPT Controller using  Incremental Conductance and  Integral Regulator  technique /MPPT/Mean1/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_i1);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_k);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_m);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_ap);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_n);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_it);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_k);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn56.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_n);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_it);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_k);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S158>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[57];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [57]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [57]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [57]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [57]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [57]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [57]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [57]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_k;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.K1_c;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_i));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Boost converter 2 5 kHz - 300V /Mean1/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ov);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_cb);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_h);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_iq);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_p);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_o0);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_o);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn57.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_p);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_o0);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_o);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S892>/S-Function (sfun_discreteVariableDelay) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[58];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [58]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [58]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [58]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [58]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [58]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [58]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [58]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Integ4_m;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.UPtrs1;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Delay;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o));
        }
      }

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/Inverter   300 (DC) // 150 V (AC) P_nom 10 kW4/Control of  Inverter/Subsystem2/PLL (3ph)/Model/Variable Frequency Mean value/Model/Discrete Variable Time Delay/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ho);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_as);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_a);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_h4);
      }

      /* work vectors */
      ssSetRWork(rts, (real_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_j);
      ssSetIWork(rts, (int_T *)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_hv);
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_hs);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn58.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 3);

        /* RWORK */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_RWORK_j);

        /* IWORK */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_INTEGER);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWork(rts, 1,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_IWORK_hv);

        /* PWORK */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWork(rts, 2,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_PWORK_hs);
      }

      /* registration */
      sfun_discreteVariableDelay(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 0.00024000000000000003);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 2;

      /* set compiled values of dynamic vector attributes */
      ssSetInputPortWidth(rts, 0, 1);
      ssSetInputPortDataType(rts, 0, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 0, 0);
      ssSetInputPortFrameData(rts, 0, 0);
      ssSetInputPortUnit(rts, 0, 0);
      ssSetInputPortIsContinuousQuantity(rts, 0, 0);
      ssSetInputPortWidth(rts, 1, 1);
      ssSetInputPortDataType(rts, 1, SS_DOUBLE);
      ssSetInputPortComplexSignal(rts, 1, 0);
      ssSetInputPortFrameData(rts, 1, 0);
      ssSetInputPortUnit(rts, 1, 0);
      ssSetInputPortIsContinuousQuantity(rts, 1, 0);
      ssSetOutputPortWidth(rts, 0, 1);
      ssSetOutputPortDataType(rts, 0, SS_DOUBLE);
      ssSetOutputPortComplexSignal(rts, 0, 0);
      ssSetOutputPortFrameData(rts, 0, 0);
      ssSetOutputPortUnit(rts, 0, 0);
      ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
      ssSetNumIWork(rts, 1);
      ssSetNumPWork(rts, 1);
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1051>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[59];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [59]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [59]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [59]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [59]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [59]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [59]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [59]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_fq;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fb;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_k4));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_hr));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_mc[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL1/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_o4);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_ca);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_c3);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_bn);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn59.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_mc[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1063>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[60];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [60]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [60]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [60]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [60]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [60]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [60]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [60]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_k;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_f4;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_fr));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_kt));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_lb[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL2/Half 1-ph Stubline1/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_hg);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_ex);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_i);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_ds);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn60.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_lb[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1218>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[61];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [61]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [61]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [61]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [61]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [61]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [61]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [61]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_am;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel1/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_h);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_p);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_k);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn61.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_pa);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_o);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kx);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_e2);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_afl);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ir);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cq
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bh);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ex);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_li);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_k);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1052>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[62];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [62]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [62]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [62]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [62]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [62]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [62]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [62]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_or;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_p2s;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_a));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_p));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_f[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL1/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_aq);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_bg);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_nu);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_pi);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn62.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_f[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1064>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[63];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [63]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [63]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [63]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [63]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [63]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [63]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [63]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_gy;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_ox;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_mr));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_gg));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_e[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL2/Half 1-ph Stubline2/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_g3);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_jp);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_jfu);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_me);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn63.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_e[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1221>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[64];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [64]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [64]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [64]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [64]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [64]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [64]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [64]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_np;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_i));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel2/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_hg);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_g);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_d);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn64.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_lu);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_mk);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_cn);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_et);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_fi);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dg);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_lh
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_je);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_e3);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dd);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_d);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1053>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[65];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [65]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [65]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [65]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [65]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [65]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [65]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [65]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_a;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_nf;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_m4o));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_dv));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_he[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL1/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_ob);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_l1);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_iw);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_j4);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn65.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_he[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1065>/S-Function (fts5stub) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[66];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [66]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [66]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [66]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [66]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [66]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [66]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [66]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 2);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        ssSetInputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);
        ssSetInputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Sum3_ou;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }

        /* port 1 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.UPtrs1;
          sfcnUPtrs[0] =
            &acdcmg_sim8_1_sm_grid_simulation_B.donotdeletethisgain_fj;
          ssSetInputPortSignalPtrs(rts, 1, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 1, 1);
          ssSetInputPortWidth(rts, 1, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 2);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        ssSetOutputPortUnit(rts, 1, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);
        ssSetOutputPortIsContinuousQuantity(rts, 1, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o1_jf));
        }

        /* port 1 */
        {
          _ssSetOutputPortNumDimensions(rts, 1, 1);
          ssSetOutputPortWidth(rts, 1, 1);
          ssSetOutputPortSignal(rts, 1, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.SFunction_o2_hv));
        }
      }

      /* states */
      ssSetDiscStates(rts, (real_T *)
                      &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_au[0]);

      /* path info */
      ssSetModelName(rts, "S-Function");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/SM_Grid_Simulation/StubLine1/SL2/Half 1-ph Stubline3/S-Function");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.params;
        ssSetSFcnParamsCount(rts, 4);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P1_Size_he);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P2_Size_c1);
        ssSetSFcnParam(rts, 2, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P3_Size_nh);
        ssSetSFcnParam(rts, 3, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.SFunction_P4_Size_e);
      }

      /* work vectors */
      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn66.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 1);

        /* DSTATE */
        ssSetDWorkWidth(rts, 0, 2);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.SFunction_DSTATE_au[0]);
      }

      /* registration */
      fts5stub(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetInputPortConnected(rts, 1, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 1, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);
      _ssSetOutputPortBeingMerged(rts, 1, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
      ssSetInputPortBufferDstPort(rts, 1, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1222>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[67];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [67]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [67]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [67]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [67]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [67]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [67]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [67]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_d4;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel3/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_f);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_i);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_a1);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn67.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bc);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_m0);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ed);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dc);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bi);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dl);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_fb
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_aj);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kl);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_g5);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_a1);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1223>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[68];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [68]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [68]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [68]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [68]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [68]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [68]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [68]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_jt;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_o0));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel4/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_de);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_b);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_dc);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn68.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bj);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_fq);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_gf);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_ac);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_lh1);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bk);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_is
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_m2);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_di);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_mt);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_dc);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1224>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[69];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [69]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [69]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [69]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [69]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [69]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [69]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [69]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_ck;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_b));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel5/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_l);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_pi);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_j);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn69.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_j3);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_dz);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_le);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_p0);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_eo);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_gb);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bd
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_nw);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_l2);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_mn);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_j);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }

    /* Level2 S-Function Block: acdcmg_sim8_1_sm_grid_simulation/<S1225>/State-Space (ssn_sfun_v1) */
    {
      SimStruct *rts = acdcmg_sim8_1_sm_grid_simulation_M->childSfunctions[70];

      /* timing info */
      time_T *sfcnPeriod =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.sfcnPeriod;
      time_T *sfcnOffset =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.sfcnOffset;
      int_T *sfcnTsMap =
        acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.sfcnTsMap;
      (void) memset((void*)sfcnPeriod, 0,
                    sizeof(time_T)*1);
      (void) memset((void*)sfcnOffset, 0,
                    sizeof(time_T)*1);
      ssSetSampleTimePtr(rts, &sfcnPeriod[0]);
      ssSetOffsetTimePtr(rts, &sfcnOffset[0]);
      ssSetSampleTimeTaskIDPtr(rts, sfcnTsMap);

      {
        ssSetBlkInfo2Ptr(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.blkInfo2
                         [70]);
      }

      _ssSetBlkInfo2PortInfo2Ptr(rts,
        &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.inputOutputPortInfo2
        [70]);

      /* Set up the mdlInfo pointer */
      ssSetRTWSfcnInfo(rts, acdcmg_sim8_1_sm_grid_simulation_M->sfcnInfo);

      /* Allocate memory of model methods 2 */
      {
        ssSetModelMethods2(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods2
                           [70]);
      }

      /* Allocate memory of model methods 3 */
      {
        ssSetModelMethods3(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods3
                           [70]);
      }

      /* Allocate memory of model methods 4 */
      {
        ssSetModelMethods4(rts,
                           &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.methods4
                           [70]);
      }

      /* Allocate memory for states auxilliary information */
      {
        ssSetStatesInfo2(rts,
                         &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.statesInfo2
                         [70]);
        ssSetPeriodicStatesInfo(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.periodicStatesInfo
          [70]);
      }

      /* inputs */
      {
        _ssSetNumInputPorts(rts, 1);
        ssSetPortInfoForInputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.inputPortInfo
          [0]);
        _ssSetPortInfo2ForInputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.inputPortUnits
          [0]);
        ssSetInputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForInputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.inputPortCoSimAttribute
          [0]);
        ssSetInputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          real_T const **sfcnUPtrs = (real_T const **)
            &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.UPtrs0;
          sfcnUPtrs[0] = &acdcmg_sim8_1_sm_grid_simulation_B.Gain2_f4;
          ssSetInputPortSignalPtrs(rts, 0, (InputPtrsType)&sfcnUPtrs[0]);
          _ssSetInputPortNumDimensions(rts, 0, 1);
          ssSetInputPortWidth(rts, 0, 1);
        }
      }

      /* outputs */
      {
        ssSetPortInfoForOutputs(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.outputPortInfo
          [0]);
        _ssSetNumOutputPorts(rts, 1);
        _ssSetPortInfo2ForOutputUnits(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.outputPortUnits
          [0]);
        ssSetOutputPortUnit(rts, 0, 0);
        _ssSetPortInfo2ForOutputCoSimAttribute(rts,
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.outputPortCoSimAttribute
          [0]);
        ssSetOutputPortIsContinuousQuantity(rts, 0, 0);

        /* port 0 */
        {
          _ssSetOutputPortNumDimensions(rts, 0, 1);
          ssSetOutputPortWidth(rts, 0, 1);
          ssSetOutputPortSignal(rts, 0, ((real_T *)
            &acdcmg_sim8_1_sm_grid_simulation_B.StateSpace_n));
        }
      }

      /* path info */
      ssSetModelName(rts, "State-Space");
      ssSetPath(rts,
                "acdcmg_sim8_1_sm_grid_simulation/powergui/EquivalentModel6/State-Space");
      ssSetRTModel(rts,acdcmg_sim8_1_sm_grid_simulation_M);
      ssSetParentSS(rts, (NULL));
      ssSetRootSS(rts, rts);
      ssSetVersion(rts, SIMSTRUCT_VERSION_LEVEL2);

      /* parameters */
      {
        mxArray **sfcnParams = (mxArray **)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.params;
        ssSetSFcnParamsCount(rts, 2);
        ssSetSFcnParamsPtr(rts, &sfcnParams[0]);
        ssSetSFcnParam(rts, 0, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P1_Size_bz);
        ssSetSFcnParam(rts, 1, (mxArray*)
                       acdcmg_sim8_1_sm_grid_simulation_P.StateSpace_P2_Size_g5);
      }

      /* work vectors */
      ssSetPWork(rts, (void **)
                 &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_f);

      {
        struct _ssDWorkRecord *dWorkRecord = (struct _ssDWorkRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.dWork;
        struct _ssDWorkAuxRecord *dWorkAuxRecord = (struct _ssDWorkAuxRecord *)
          &acdcmg_sim8_1_sm_grid_simulation_M->NonInlinedSFcns.Sfcn70.dWorkAux;
        ssSetSFcnDWork(rts, dWorkRecord);
        ssSetSFcnDWorkAux(rts, dWorkAuxRecord);
        _ssSetNumDWork(rts, 11);

        /* xn_g0 */
        ssSetDWorkWidth(rts, 0, 1);
        ssSetDWorkDataType(rts, 0,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 0, 0);
        ssSetDWorkUsedAsDState(rts, 0, 1);
        ssSetDWork(rts, 0, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_oc);

        /* un_g0 */
        ssSetDWorkWidth(rts, 1, 1);
        ssSetDWorkDataType(rts, 1,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 1, 0);
        ssSetDWorkUsedAsDState(rts, 1, 1);
        ssSetDWork(rts, 1, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_py);

        /* sw_g0 */
        ssSetDWorkWidth(rts, 2, 1);
        ssSetDWorkDataType(rts, 2,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 2, 0);
        ssSetDWorkUsedAsDState(rts, 2, 1);
        ssSetDWork(rts, 2, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_gd);

        /* sw_volta0 */
        ssSetDWorkWidth(rts, 3, 1);
        ssSetDWorkDataType(rts, 3,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 3, 0);
        ssSetDWorkUsedAsDState(rts, 3, 1);
        ssSetDWork(rts, 3, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_oa);

        /* sw_volta_old0 */
        ssSetDWorkWidth(rts, 4, 1);
        ssSetDWorkDataType(rts, 4,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 4, 0);
        ssSetDWorkUsedAsDState(rts, 4, 1);
        ssSetDWork(rts, 4, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_bj0);

        /* sw_sta_old_g0 */
        ssSetDWorkWidth(rts, 5, 1);
        ssSetDWorkDataType(rts, 5,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 5, 0);
        ssSetDWorkUsedAsDState(rts, 5, 1);
        ssSetDWork(rts, 5, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_nd);

        /* global_sw_g0 */
        ssSetDWorkWidth(rts, 6, 6);
        ssSetDWorkDataType(rts, 6,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 6, 0);
        ssSetDWorkUsedAsDState(rts, 6, 1);
        ssSetDWork(rts, 6, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_js
                   [0]);

        /* yout_g0 */
        ssSetDWorkWidth(rts, 7, 1);
        ssSetDWorkDataType(rts, 7,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 7, 0);
        ssSetDWorkUsedAsDState(rts, 7, 1);
        ssSetDWork(rts, 7, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_hy);

        /* youtold_g0 */
        ssSetDWorkWidth(rts, 8, 1);
        ssSetDWorkDataType(rts, 8,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 8, 0);
        ssSetDWorkUsedAsDState(rts, 8, 1);
        ssSetDWork(rts, 8, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_lj);

        /* MOV_segment0 */
        ssSetDWorkWidth(rts, 9, 1);
        ssSetDWorkDataType(rts, 9,SS_DOUBLE);
        ssSetDWorkComplexSignal(rts, 9, 0);
        ssSetDWorkUsedAsDState(rts, 9, 1);
        ssSetDWork(rts, 9, &acdcmg_sim8_1_sm_grid_simulation_DW.MOV_segment9_kr);

        /* PWORK */
        ssSetDWorkWidth(rts, 10, 1);
        ssSetDWorkDataType(rts, 10,SS_POINTER);
        ssSetDWorkComplexSignal(rts, 10, 0);
        ssSetDWork(rts, 10,
                   &acdcmg_sim8_1_sm_grid_simulation_DW.StateSpace_PWORK_f);
      }

      /* registration */
      ssn_sfun_v1(rts);
      sfcnInitializeSizes(rts);
      sfcnInitializeSampleTimes(rts);

      /* adjust sample time */
      ssSetSampleTime(rts, 0, 4.0E-5);
      ssSetOffsetTime(rts, 0, 0.0);
      sfcnTsMap[0] = 1;

      /* set compiled values of dynamic vector attributes */
      ssSetNumNonsampledZCs(rts, 0);

      /* Update connectivity flags for each port */
      _ssSetInputPortConnected(rts, 0, 1);
      _ssSetOutputPortConnected(rts, 0, 1);
      _ssSetOutputPortBeingMerged(rts, 0, 0);

      /* Update the BufferDstPort flags for each input port */
      ssSetInputPortBufferDstPort(rts, 0, -1);
    }
  }

  /* Initialize Sizes */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numContStates = (140);/* Number of continuous states */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numPeriodicContStates = (0);
                                      /* Number of periodic continuous states */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numY = (0);/* Number of model outputs */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numU = (0);/* Number of model inputs */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.sysDirFeedThru = (0);/* The model is not direct feedthrough */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numSampTimes = (3);/* Number of sample times */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numBlocks = (2698);/* Number of blocks */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numBlockIO = (1428);/* Number of block outputs */
  acdcmg_sim8_1_sm_grid_simulation_M->Sizes.numBlockPrms = (2478);/* Sum of parameter "widths" */
  return acdcmg_sim8_1_sm_grid_simulation_M;
}

/*========================================================================*
 * End of Classic call interface                                          *
 *========================================================================*/
